{"ast":null,"code":"import jQuery from 'jquery'; // Nicescroll\n\n(function (jQuery) {\n  // globals\n  var domfocus = false;\n  var mousefocus = false;\n  var zoomactive = false;\n  var tabindexcounter = 5000;\n  var ascrailcounter = 2000;\n  var globalmaxzindex = 0;\n  var $ = jQuery; // sandbox\n  // http://stackoverflow.com/questions/2161159/get-script-path\n\n  function getScriptPath() {\n    var scripts = document.getElementsByTagName('script');\n    var path = scripts[scripts.length - 1].src.split('?')[0];\n    return path.split('/').length > 0 ? path.split('/').slice(0, -1).join('/') + '/' : '';\n  }\n\n  var scriptpath = getScriptPath();\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\n  var setAnimationFrame = window.requestAnimationFrame || false;\n  var clearAnimationFrame = window.cancelAnimationFrame || false;\n\n  if (!setAnimationFrame) {\n    for (var vx in vendors) {\n      var v = vendors[vx];\n      if (!setAnimationFrame) setAnimationFrame = window[v + 'RequestAnimationFrame'];\n      if (!clearAnimationFrame) clearAnimationFrame = window[v + 'CancelAnimationFrame'] || window[v + 'CancelRequestAnimationFrame'];\n    }\n  }\n\n  var clsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;\n  var _globaloptions = {\n    zindex: \"auto\",\n    cursoropacitymin: 0,\n    cursoropacitymax: 1,\n    cursorcolor: \"#424242\",\n    cursorwidth: \"5px\",\n    cursorborder: \"1px solid #fff\",\n    cursorborderradius: \"5px\",\n    scrollspeed: 60,\n    mousescrollstep: 8 * 3,\n    touchbehavior: false,\n    hwacceleration: true,\n    usetransition: true,\n    boxzoom: false,\n    dblclickzoom: true,\n    gesturezoom: true,\n    grabcursorenabled: true,\n    autohidemode: true,\n    background: \"\",\n    iframeautoresize: true,\n    cursorminheight: 32,\n    preservenativescrolling: true,\n    railoffset: false,\n    bouncescroll: true,\n    spacebarenabled: true,\n    railpadding: {\n      top: 0,\n      right: 0,\n      left: 0,\n      bottom: 0\n    },\n    disableoutline: true,\n    horizrailenabled: true,\n    railalign: \"right\",\n    railvalign: \"bottom\",\n    enabletranslate3d: true,\n    enablemousewheel: true,\n    enablekeyboard: true,\n    smoothscroll: true,\n    sensitiverail: true,\n    enablemouselockapi: true,\n    //      cursormaxheight:false,\n    cursorfixedheight: false,\n    directionlockdeadzone: 6,\n    hidecursordelay: 400,\n    nativeparentscrolling: true,\n    enablescrollonselection: true,\n    overflowx: true,\n    overflowy: true,\n    cursordragspeed: 0.3,\n    rtlmode: false,\n    cursordragontouch: false,\n    oneaxismousemode: \"auto\"\n  };\n  var browserdetected = false;\n\n  var getBrowserDetection = function () {\n    if (browserdetected) return browserdetected;\n    var domtest = document.createElement('DIV');\n    var d = {};\n    d.haspointerlock = \"pointerLockElement\" in document || \"mozPointerLockElement\" in document || \"webkitPointerLockElement\" in document;\n    d.isopera = \"opera\" in window;\n    d.isopera12 = d.isopera && \"getUserMedia\" in navigator;\n    d.isoperamini = Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\";\n    d.isie = \"all\" in document && \"attachEvent\" in domtest && !d.isopera;\n    d.isieold = d.isie && !(\"msInterpolationMode\" in domtest.style); // IE6 and older\n\n    d.isie7 = d.isie && !d.isieold && (!(\"documentMode\" in document) || document.documentMode == 7);\n    d.isie8 = d.isie && \"documentMode\" in document && document.documentMode == 8;\n    d.isie9 = d.isie && \"performance\" in window && document.documentMode >= 9;\n    d.isie10 = d.isie && \"performance\" in window && document.documentMode >= 10;\n    d.isie9mobile = /iemobile.9/i.test(navigator.userAgent); //wp 7.1 mango\n\n    if (d.isie9mobile) d.isie9 = false;\n    d.isie7mobile = !d.isie9mobile && d.isie7 && /iemobile/i.test(navigator.userAgent); //wp 7.0\n\n    d.ismozilla = \"MozAppearance\" in domtest.style;\n    d.iswebkit = \"WebkitAppearance\" in domtest.style;\n    d.ischrome = \"chrome\" in window;\n    d.ischrome22 = d.ischrome && d.haspointerlock;\n    d.ischrome26 = d.ischrome && \"transition\" in domtest.style; // issue with transform detection (maintain prefix)\n\n    d.cantouch = \"ontouchstart\" in document.documentElement || \"ontouchstart\" in window; // detection for Chrome Touch Emulation\n\n    d.hasmstouch = window.navigator.msPointerEnabled || false; // IE10+ pointer events\n\n    d.ismac = /^mac$/i.test(navigator.platform);\n    d.isios = d.cantouch && /iphone|ipad|ipod/i.test(navigator.platform);\n    d.isios4 = d.isios && !(\"seal\" in Object);\n    d.isandroid = /android/i.test(navigator.userAgent);\n    d.trstyle = false;\n    d.hastransform = false;\n    d.hastranslate3d = false;\n    d.transitionstyle = false;\n    d.hastransition = false;\n    d.transitionend = false;\n    var check = ['transform', 'msTransform', 'webkitTransform', 'MozTransform', 'OTransform'];\n\n    for (var a = 0; a < check.length; a++) {\n      if (typeof domtest.style[check[a]] != \"undefined\") {\n        d.trstyle = check[a];\n        break;\n      }\n    }\n\n    d.hastransform = d.trstyle != false;\n\n    if (d.hastransform) {\n      domtest.style[d.trstyle] = \"translate3d(1px,2px,3px)\";\n      d.hastranslate3d = /translate3d/.test(domtest.style[d.trstyle]);\n    }\n\n    d.transitionstyle = false;\n    d.prefixstyle = '';\n    d.transitionend = false;\n    var check = ['transition', 'webkitTransition', 'MozTransition', 'OTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n    var prefix = ['', '-webkit-', '-moz-', '-o-', '-o', '-ms-', '-khtml-'];\n    var evs = ['transitionend', 'webkitTransitionEnd', 'transitionend', 'otransitionend', 'oTransitionEnd', 'msTransitionEnd', 'KhtmlTransitionEnd'];\n\n    for (var a = 0; a < check.length; a++) {\n      if (check[a] in domtest.style) {\n        d.transitionstyle = check[a];\n        d.prefixstyle = prefix[a];\n        d.transitionend = evs[a];\n        break;\n      }\n    }\n\n    if (d.ischrome26) {\n      // use always prefix\n      d.prefixstyle = prefix[1];\n    }\n\n    d.hastransition = d.transitionstyle;\n\n    function detectCursorGrab() {\n      var lst = ['-moz-grab', '-webkit-grab', 'grab'];\n      if (d.ischrome && !d.ischrome22 || d.isie) lst = []; // force setting for IE returns false positive and chrome cursor bug\n\n      for (var a = 0; a < lst.length; a++) {\n        var p = lst[a];\n        domtest.style['cursor'] = p;\n        if (domtest.style['cursor'] == p) return p;\n      }\n\n      return 'url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize'; // thank you google for custom cursor!\n    }\n\n    d.cursorgrabvalue = detectCursorGrab();\n    d.hasmousecapture = \"setCapture\" in domtest;\n    d.hasMutationObserver = clsMutationObserver !== false;\n    domtest = null; //memory released\n\n    browserdetected = d;\n    return d;\n  };\n\n  var NiceScrollClass = function (myopt, me) {\n    var self = this;\n    this.version = '3.5.0 BETA5';\n    this.name = 'nicescroll';\n    this.me = me;\n    this.opt = {\n      doc: $(\"body\"),\n      win: false\n    };\n    $.extend(this.opt, _globaloptions); // Options for internal use\n\n    this.opt.snapbackspeed = 80;\n\n    if (myopt || false) {\n      for (var a in self.opt) {\n        if (typeof myopt[a] != \"undefined\") self.opt[a] = myopt[a];\n      }\n    }\n\n    this.doc = self.opt.doc;\n    this.iddoc = this.doc && this.doc[0] ? this.doc[0].id || '' : '';\n    this.ispage = /BODY|HTML/.test(self.opt.win ? self.opt.win[0].nodeName : this.doc[0].nodeName);\n    this.haswrapper = self.opt.win !== false;\n    this.win = self.opt.win || (this.ispage ? $(window) : this.doc);\n    this.docscroll = this.ispage && !this.haswrapper ? $(window) : this.win;\n    this.body = $(\"body\");\n    this.viewport = false;\n    this.isfixed = false;\n    this.iframe = false;\n    this.isiframe = this.doc[0].nodeName == 'IFRAME' && this.win[0].nodeName == 'IFRAME';\n    this.istextarea = this.win[0].nodeName == 'TEXTAREA';\n    this.forcescreen = false; //force to use screen position on events\n\n    this.canshowonmouseevent = self.opt.autohidemode != \"scroll\"; // Events jump table\n\n    this.onmousedown = false;\n    this.onmouseup = false;\n    this.onmousemove = false;\n    this.onmousewheel = false;\n    this.onkeypress = false;\n    this.ongesturezoom = false;\n    this.onclick = false; // Nicescroll custom events\n\n    this.onscrollstart = false;\n    this.onscrollend = false;\n    this.onscrollcancel = false;\n    this.onzoomin = false;\n    this.onzoomout = false; // Let's start!\n\n    this.view = false;\n    this.page = false;\n    this.scroll = {\n      x: 0,\n      y: 0\n    };\n    this.scrollratio = {\n      x: 0,\n      y: 0\n    };\n    this.cursorheight = 20;\n    this.scrollvaluemax = 0;\n    this.checkrtlmode = false;\n    this.scrollrunning = false;\n    this.scrollmom = false;\n    this.observer = false;\n    this.observerremover = false; // observer on parent for remove detection\n\n    do {\n      this.id = \"ascrail\" + ascrailcounter++;\n    } while (document.getElementById(this.id));\n\n    this.rail = false;\n    this.cursor = false;\n    this.cursorfreezed = false;\n    this.selectiondrag = false;\n    this.zoom = false;\n    this.zoomactive = false;\n    this.hasfocus = false;\n    this.hasmousefocus = false;\n    this.visibility = true;\n    this.locked = false;\n    this.hidden = false; // rails always hidden\n\n    this.cursoractive = true; // user can interact with cursors\n\n    this.overflowx = self.opt.overflowx;\n    this.overflowy = self.opt.overflowy;\n    this.nativescrollingarea = false;\n    this.checkarea = 0;\n    this.events = []; // event list for unbind\n\n    this.saved = {};\n    this.delaylist = {};\n    this.synclist = {};\n    this.lastdeltax = 0;\n    this.lastdeltay = 0;\n    this.detected = getBrowserDetection();\n    var cap = $.extend({}, this.detected);\n    this.canhwscroll = cap.hastransform && self.opt.hwacceleration;\n    this.ishwscroll = this.canhwscroll && self.haswrapper;\n    this.istouchcapable = false; // desktop devices with touch screen support\n    //## Check Chrome desktop with touch support\n\n    if (cap.cantouch && cap.ischrome && !cap.isios && !cap.isandroid) {\n      this.istouchcapable = true;\n      cap.cantouch = false; // parse normal desktop events\n    } //## Firefox 18 nightly build (desktop) false positive (or desktop with touch support)\n\n\n    if (cap.cantouch && cap.ismozilla && !cap.isios && !cap.isandroid) {\n      this.istouchcapable = true;\n      cap.cantouch = false; // parse normal desktop events\n    } //## disable MouseLock API on user request\n\n\n    if (!self.opt.enablemouselockapi) {\n      cap.hasmousecapture = false;\n      cap.haspointerlock = false;\n    }\n\n    this.delayed = function (name, fn, tm, lazy) {\n      var dd = self.delaylist[name];\n      var nw = new Date().getTime();\n      if (!lazy && dd && dd.tt) return false;\n      if (dd && dd.tt) clearTimeout(dd.tt);\n\n      if (dd && dd.last + tm > nw && !dd.tt) {\n        self.delaylist[name] = {\n          last: nw + tm,\n          tt: setTimeout(function () {\n            self.delaylist[name].tt = 0;\n            fn.call();\n          }, tm)\n        };\n      } else if (!dd || !dd.tt) {\n        self.delaylist[name] = {\n          last: nw,\n          tt: 0\n        };\n        setTimeout(function () {\n          fn.call();\n        }, 0);\n      }\n    };\n\n    this.debounced = function (name, fn, tm) {\n      var dd = self.delaylist[name];\n      var nw = new Date().getTime();\n      self.delaylist[name] = fn;\n\n      if (!dd) {\n        setTimeout(function () {\n          var fn = self.delaylist[name];\n          self.delaylist[name] = false;\n          fn.call();\n        }, tm);\n      }\n    };\n\n    this.synched = function (name, fn) {\n      function requestSync() {\n        if (self.onsync) return;\n        setAnimationFrame(function () {\n          self.onsync = false;\n\n          for (name in self.synclist) {\n            var fn = self.synclist[name];\n            if (fn) fn.call(self);\n            self.synclist[name] = false;\n          }\n        });\n        self.onsync = true;\n      }\n\n      ;\n      self.synclist[name] = fn;\n      requestSync();\n      return name;\n    };\n\n    this.unsynched = function (name) {\n      if (self.synclist[name]) self.synclist[name] = false;\n    };\n\n    this.css = function (el, pars) {\n      // save & set\n      for (var n in pars) {\n        self.saved.css.push([el, n, el.css(n)]);\n        el.css(n, pars[n]);\n      }\n    };\n\n    this.scrollTop = function (val) {\n      return typeof val == \"undefined\" ? self.getScrollTop() : self.setScrollTop(val);\n    };\n\n    this.scrollLeft = function (val) {\n      return typeof val == \"undefined\" ? self.getScrollLeft() : self.setScrollLeft(val);\n    }; // derived by by Dan Pupius www.pupius.net\n\n\n    BezierClass = function (st, ed, spd, p1, p2, p3, p4) {\n      this.st = st;\n      this.ed = ed;\n      this.spd = spd;\n      this.p1 = p1 || 0;\n      this.p2 = p2 || 1;\n      this.p3 = p3 || 0;\n      this.p4 = p4 || 1;\n      this.ts = new Date().getTime();\n      this.df = this.ed - this.st;\n    };\n\n    BezierClass.prototype = {\n      B2: function (t) {\n        return 3 * t * t * (1 - t);\n      },\n      B3: function (t) {\n        return 3 * t * (1 - t) * (1 - t);\n      },\n      B4: function (t) {\n        return (1 - t) * (1 - t) * (1 - t);\n      },\n      getNow: function () {\n        var nw = new Date().getTime();\n        var pc = 1 - (nw - this.ts) / this.spd;\n        var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);\n        return pc < 0 ? this.ed : this.st + Math.round(this.df * bz);\n      },\n      update: function (ed, spd) {\n        this.st = this.getNow();\n        this.ed = ed;\n        this.spd = spd;\n        this.ts = new Date().getTime();\n        this.df = this.ed - this.st;\n        return this;\n      }\n    };\n\n    if (this.ishwscroll) {\n      // hw accelerated scroll\n      this.doc.translate = {\n        x: 0,\n        y: 0,\n        tx: \"0px\",\n        ty: \"0px\"\n      }; //this one can help to enable hw accel on ios6 http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/\n\n      if (cap.hastranslate3d && cap.isios) this.doc.css(\"-webkit-backface-visibility\", \"hidden\"); // prevent flickering http://stackoverflow.com/questions/3461441/\n      //derived from http://stackoverflow.com/questions/11236090/\n\n      function getMatrixValues() {\n        var tr = self.doc.css(cap.trstyle);\n\n        if (tr && tr.substr(0, 6) == \"matrix\") {\n          return tr.replace(/^.*\\((.*)\\)$/g, \"$1\").replace(/px/g, '').split(/, +/);\n        }\n\n        return false;\n      }\n\n      this.getScrollTop = function (last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return mtx.length == 16 ? -mtx[13] : -mtx[5]; //matrix3d 16 on IE10\n\n          if (self.timerscroll && self.timerscroll.bz) return self.timerscroll.bz.getNow();\n        }\n\n        return self.doc.translate.y;\n      };\n\n      this.getScrollLeft = function (last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return mtx.length == 16 ? -mtx[12] : -mtx[4]; //matrix3d 16 on IE10\n\n          if (self.timerscroll && self.timerscroll.bh) return self.timerscroll.bh.getNow();\n        }\n\n        return self.doc.translate.x;\n      };\n\n      if (document.createEvent) {\n        this.notifyScrollEvent = function (el) {\n          var e = document.createEvent(\"UIEvents\");\n          e.initUIEvent(\"scroll\", false, true, window, 1);\n          el.dispatchEvent(e);\n        };\n      } else if (document.fireEvent) {\n        this.notifyScrollEvent = function (el) {\n          var e = document.createEventObject();\n          el.fireEvent(\"onscroll\");\n          e.cancelBubble = true;\n        };\n      } else {\n        this.notifyScrollEvent = function (el, add) {}; //NOPE\n\n      }\n\n      if (cap.hastranslate3d && self.opt.enabletranslate3d) {\n        this.setScrollTop = function (val, silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = val * -1 + \"px\";\n          self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n\n        this.setScrollLeft = function (val, silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = val * -1 + \"px\";\n          self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      } else {\n        this.setScrollTop = function (val, silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = val * -1 + \"px\";\n          self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n\n        this.setScrollLeft = function (val, silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = val * -1 + \"px\";\n          self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      }\n    } else {\n      // native scroll\n      this.getScrollTop = function () {\n        return self.docscroll.scrollTop();\n      };\n\n      this.setScrollTop = function (val) {\n        return self.docscroll.scrollTop(val);\n      };\n\n      this.getScrollLeft = function () {\n        return self.docscroll.scrollLeft();\n      };\n\n      this.setScrollLeft = function (val) {\n        return self.docscroll.scrollLeft(val);\n      };\n    }\n\n    this.getTarget = function (e) {\n      if (!e) return false;\n      if (e.target) return e.target;\n      if (e.srcElement) return e.srcElement;\n      return false;\n    };\n\n    this.hasParent = function (e, id) {\n      if (!e) return false;\n      var el = e.target || e.srcElement || e || false;\n\n      while (el && el.id != id) {\n        el = el.parentNode || false;\n      }\n\n      return el !== false;\n    };\n\n    function getZIndex() {\n      var dom = self.win;\n      if (\"zIndex\" in dom) return dom.zIndex(); // use jQuery UI method when available\n\n      while (dom.length > 0) {\n        if (dom[0].nodeType == 9) return false;\n        var zi = dom.css('zIndex');\n        if (!isNaN(zi) && zi != 0) return parseInt(zi);\n        dom = dom.parent();\n      }\n\n      return false;\n    }\n\n    ; //inspired by http://forum.jquery.com/topic/width-includes-border-width-when-set-to-thin-medium-thick-in-ie\n\n    var _convertBorderWidth = {\n      \"thin\": 1,\n      \"medium\": 3,\n      \"thick\": 5\n    };\n\n    function getWidthToPixel(dom, prop, chkheight) {\n      var wd = dom.css(prop);\n      var px = parseFloat(wd);\n\n      if (isNaN(px)) {\n        px = _convertBorderWidth[wd] || 0;\n        var brd = px == 3 ? chkheight ? self.win.outerHeight() - self.win.innerHeight() : self.win.outerWidth() - self.win.innerWidth() : 1; //DON'T TRUST CSS\n\n        if (self.isie8 && px) px += 1;\n        return brd ? px : 0;\n      }\n\n      return px;\n    }\n\n    ;\n\n    this.getOffset = function () {\n      if (self.isfixed) return {\n        top: parseFloat(self.win.css('top')),\n        left: parseFloat(self.win.css('left'))\n      };\n      if (!self.viewport) return self.win.offset();\n      var ww = self.win.offset();\n      var vp = self.viewport.offset();\n      return {\n        top: ww.top - vp.top + self.viewport.scrollTop(),\n        left: ww.left - vp.left + self.viewport.scrollLeft()\n      };\n    };\n\n    this.updateScrollBar = function (len) {\n      if (self.ishwscroll) {\n        self.rail.css({\n          height: self.win.innerHeight()\n        });\n        if (self.railh) self.railh.css({\n          width: self.win.innerWidth()\n        });\n      } else {\n        var wpos = self.getOffset();\n        var pos = {\n          top: wpos.top,\n          left: wpos.left\n        };\n        pos.top += getWidthToPixel(self.win, 'border-top-width', true);\n        var brd = (self.win.outerWidth() - self.win.innerWidth()) / 2;\n        pos.left += self.rail.align ? self.win.outerWidth() - getWidthToPixel(self.win, 'border-right-width') - self.rail.width : getWidthToPixel(self.win, 'border-left-width');\n        var off = self.opt.railoffset;\n\n        if (off) {\n          if (off.top) pos.top += off.top;\n          if (self.rail.align && off.left) pos.left += off.left;\n        }\n\n        if (!self.locked) self.rail.css({\n          top: pos.top,\n          left: pos.left,\n          height: len ? len.h : self.win.innerHeight()\n        });\n\n        if (self.zoom) {\n          self.zoom.css({\n            top: pos.top + 1,\n            left: self.rail.align == 1 ? pos.left - 20 : pos.left + self.rail.width + 4\n          });\n        }\n\n        if (self.railh && !self.locked) {\n          var pos = {\n            top: wpos.top,\n            left: wpos.left\n          };\n          var y = self.railh.align ? pos.top + getWidthToPixel(self.win, 'border-top-width', true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win, 'border-top-width', true);\n          var x = pos.left + getWidthToPixel(self.win, 'border-left-width');\n          self.railh.css({\n            top: y,\n            left: x,\n            width: self.railh.width\n          });\n        }\n      }\n    };\n\n    this.doRailClick = function (e, dbl, hr) {\n      var fn, pg, cur, pos; //      if (self.rail.drag&&self.rail.drag.pt!=1) return;\n\n      if (self.locked) return; //      if (self.rail.drag) return;\n      //      self.cancelScroll();\n\n      self.cancelEvent(e);\n\n      if (dbl) {\n        fn = hr ? self.doScrollLeft : self.doScrollTop;\n        cur = hr ? (e.pageX - self.railh.offset().left - self.cursorwidth / 2) * self.scrollratio.x : (e.pageY - self.rail.offset().top - self.cursorheight / 2) * self.scrollratio.y;\n        fn(cur);\n      } else {\n        //        console.log(e.pageY);\n        fn = hr ? self.doScrollLeftBy : self.doScrollBy;\n        cur = hr ? self.scroll.x : self.scroll.y;\n        pos = hr ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;\n        pg = hr ? self.view.w : self.view.h;\n        cur >= pos ? fn(pg) : fn(-pg);\n      }\n    };\n\n    self.hasanimationframe = setAnimationFrame;\n    self.hascancelanimationframe = clearAnimationFrame;\n\n    if (!self.hasanimationframe) {\n      setAnimationFrame = function (fn) {\n        return setTimeout(fn, 15 - Math.floor(+new Date() / 1000) % 16);\n      }; // 1000/60)};\n\n\n      clearAnimationFrame = clearInterval;\n    } else if (!self.hascancelanimationframe) clearAnimationFrame = function () {\n      self.cancelAnimationFrame = true;\n    };\n\n    this.init = function () {\n      self.saved.css = [];\n      if (cap.isie7mobile) return true; // SORRY, DO NOT WORK!\n\n      if (cap.isoperamini) return true; // SORRY, DO NOT WORK!\n\n      if (cap.hasmstouch) self.css(self.ispage ? $(\"html\") : self.win, {\n        '-ms-touch-action': 'none'\n      });\n      self.zindex = \"auto\";\n\n      if (!self.ispage && self.opt.zindex == \"auto\") {\n        self.zindex = getZIndex() || \"auto\";\n      } else {\n        self.zindex = self.opt.zindex;\n      }\n\n      if (!self.ispage && self.zindex != \"auto\") {\n        if (self.zindex > globalmaxzindex) globalmaxzindex = self.zindex;\n      }\n\n      if (self.isie && self.zindex == 0 && self.opt.zindex == \"auto\") {\n        // fix IE auto == 0\n        self.zindex = \"auto\";\n      }\n      /*\n            self.ispage = true;\n            self.haswrapper = true;\n      //      self.win = $(window);\n            self.docscroll = $(\"body\");\n      //      self.doc = $(\"body\");\n      */\n\n\n      if (!self.ispage || !cap.cantouch && !cap.isieold && !cap.isie9mobile) {\n        var cont = self.docscroll;\n        if (self.ispage) cont = self.haswrapper ? self.win : self.doc;\n        if (!cap.isie9mobile) self.css(cont, {\n          'overflow-y': 'hidden'\n        });\n\n        if (self.ispage && cap.isie7) {\n          if (self.doc[0].nodeName == 'BODY') self.css($(\"html\"), {\n            'overflow-y': 'hidden'\n          }); //IE7 double scrollbar issue\n          else if (self.doc[0].nodeName == 'HTML') self.css($(\"body\"), {\n            'overflow-y': 'hidden'\n          }); //IE7 double scrollbar issue\n        }\n\n        if (cap.isios && !self.ispage && !self.haswrapper) self.css($(\"body\"), {\n          \"-webkit-overflow-scrolling\": \"touch\"\n        }); //force hw acceleration\n\n        var cursor = $(document.createElement('div'));\n        cursor.css({\n          position: \"relative\",\n          top: 0,\n          \"float\": \"right\",\n          width: self.opt.cursorwidth,\n          height: \"0px\",\n          'background-color': self.opt.cursorcolor,\n          border: self.opt.cursorborder,\n          'background-clip': 'padding-box',\n          '-webkit-border-radius': self.opt.cursorborderradius,\n          '-moz-border-radius': self.opt.cursorborderradius,\n          'border-radius': self.opt.cursorborderradius\n        });\n        cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());\n        self.cursor = cursor;\n        var rail = $(document.createElement('div'));\n        rail.attr('id', self.id);\n        rail.addClass('nicescroll-rails');\n        var v,\n            a,\n            kp = [\"left\", \"right\"]; //\"top\",\"bottom\"\n\n        for (var n in kp) {\n          a = kp[n];\n          v = self.opt.railpadding[a];\n          v ? rail.css(\"padding-\" + a, v + \"px\") : self.opt.railpadding[a] = 0;\n        }\n\n        rail.append(cursor);\n        rail.width = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerWidth()) + self.opt.railpadding['left'] + self.opt.railpadding['right'];\n        rail.css({\n          width: rail.width + \"px\",\n          'zIndex': self.zindex,\n          \"background\": self.opt.background,\n          cursor: \"default\"\n        });\n        rail.visibility = true;\n        rail.scrollable = true;\n        rail.align = self.opt.railalign == \"left\" ? 0 : 1;\n        self.rail = rail;\n        self.rail.drag = false;\n        var zoom = false;\n\n        if (self.opt.boxzoom && !self.ispage && !cap.isieold) {\n          zoom = document.createElement('div');\n          self.bind(zoom, \"click\", self.doZoom);\n          self.zoom = $(zoom);\n          self.zoom.css({\n            \"cursor\": \"pointer\",\n            'z-index': self.zindex,\n            'backgroundImage': 'url(' + scriptpath + 'zoomico.png)',\n            'height': 18,\n            'width': 18,\n            'backgroundPosition': '0px 0px'\n          });\n          if (self.opt.dblclickzoom) self.bind(self.win, \"dblclick\", self.doZoom);\n\n          if (cap.cantouch && self.opt.gesturezoom) {\n            self.ongesturezoom = function (e) {\n              if (e.scale > 1.5) self.doZoomIn(e);\n              if (e.scale < 0.8) self.doZoomOut(e);\n              return self.cancelEvent(e);\n            };\n\n            self.bind(self.win, \"gestureend\", self.ongesturezoom);\n          }\n        } // init HORIZ\n\n\n        self.railh = false;\n\n        if (self.opt.horizrailenabled) {\n          self.css(cont, {\n            'overflow-x': 'hidden'\n          });\n          var cursor = $(document.createElement('div'));\n          cursor.css({\n            position: \"relative\",\n            top: 0,\n            height: self.opt.cursorwidth,\n            width: \"0px\",\n            'background-color': self.opt.cursorcolor,\n            border: self.opt.cursorborder,\n            'background-clip': 'padding-box',\n            '-webkit-border-radius': self.opt.cursorborderradius,\n            '-moz-border-radius': self.opt.cursorborderradius,\n            'border-radius': self.opt.cursorborderradius\n          });\n          cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());\n          self.cursorh = cursor;\n          var railh = $(document.createElement('div'));\n          railh.attr('id', self.id + '-hr');\n          railh.addClass('nicescroll-rails');\n          railh.height = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerHeight());\n          railh.css({\n            height: railh.height + \"px\",\n            'zIndex': self.zindex,\n            \"background\": self.opt.background\n          });\n          railh.append(cursor);\n          railh.visibility = true;\n          railh.scrollable = true;\n          railh.align = self.opt.railvalign == \"top\" ? 0 : 1;\n          self.railh = railh;\n          self.railh.drag = false;\n        } //\n\n\n        if (self.ispage) {\n          rail.css({\n            position: \"fixed\",\n            top: \"0px\",\n            height: \"100%\"\n          });\n          rail.align ? rail.css({\n            right: \"0px\"\n          }) : rail.css({\n            left: \"0px\"\n          });\n          self.body.append(rail);\n\n          if (self.railh) {\n            railh.css({\n              position: \"fixed\",\n              left: \"0px\",\n              width: \"100%\"\n            });\n            railh.align ? railh.css({\n              bottom: \"0px\"\n            }) : railh.css({\n              top: \"0px\"\n            });\n            self.body.append(railh);\n          }\n        } else {\n          if (self.ishwscroll) {\n            if (self.win.css('position') == 'static') self.css(self.win, {\n              'position': 'relative'\n            });\n            var bd = self.win[0].nodeName == 'HTML' ? self.body : self.win;\n\n            if (self.zoom) {\n              self.zoom.css({\n                position: \"absolute\",\n                top: 1,\n                right: 0,\n                \"margin-right\": rail.width + 4\n              });\n              bd.append(self.zoom);\n            }\n\n            rail.css({\n              position: \"absolute\",\n              top: 0\n            });\n            rail.align ? rail.css({\n              right: 0\n            }) : rail.css({\n              left: 0\n            });\n            bd.append(rail);\n\n            if (railh) {\n              railh.css({\n                position: \"absolute\",\n                left: 0,\n                bottom: 0\n              });\n              railh.align ? railh.css({\n                bottom: 0\n              }) : railh.css({\n                top: 0\n              });\n              bd.append(railh);\n            }\n          } else {\n            self.isfixed = self.win.css(\"position\") == \"fixed\";\n            var rlpos = self.isfixed ? \"fixed\" : \"absolute\";\n            if (!self.isfixed) self.viewport = self.getViewport(self.win[0]);\n\n            if (self.viewport) {\n              self.body = self.viewport;\n              if (/relative|absolute/.test(self.viewport.css(\"position\")) == false) self.css(self.viewport, {\n                \"position\": \"relative\"\n              });\n            }\n\n            rail.css({\n              position: rlpos\n            });\n            if (self.zoom) self.zoom.css({\n              position: rlpos\n            });\n            self.updateScrollBar();\n            self.body.append(rail);\n            if (self.zoom) self.body.append(self.zoom);\n\n            if (self.railh) {\n              railh.css({\n                position: rlpos\n              });\n              self.body.append(railh);\n            }\n          }\n\n          if (cap.isios) self.css(self.win, {\n            '-webkit-tap-highlight-color': 'rgba(0,0,0,0)',\n            '-webkit-touch-callout': 'none'\n          }); // prevent grey layer on click\n\n          if (cap.isie && self.opt.disableoutline) self.win.attr(\"hideFocus\", \"true\"); // IE, prevent dotted rectangle on focused div\n\n          if (cap.iswebkit && self.opt.disableoutline) self.win.css({\n            \"outline\": \"none\"\n          }); //          if (cap.isopera&&self.opt.disableoutline) self.win.css({\"outline\":\"0\"});  // Opera to test [TODO]\n        }\n\n        if (self.opt.autohidemode === false) {\n          self.autohidedom = false;\n          self.rail.css({\n            opacity: self.opt.cursoropacitymax\n          });\n          if (self.railh) self.railh.css({\n            opacity: self.opt.cursoropacitymax\n          });\n        } else if (self.opt.autohidemode === true) {\n          self.autohidedom = $().add(self.rail);\n          if (cap.isie8) self.autohidedom = self.autohidedom.add(self.cursor);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\n          if (self.railh && cap.isie8) self.autohidedom = self.autohidedom.add(self.cursorh);\n        } else if (self.opt.autohidemode == \"scroll\") {\n          self.autohidedom = $().add(self.rail);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\n        } else if (self.opt.autohidemode == \"cursor\") {\n          self.autohidedom = $().add(self.cursor);\n          if (self.railh) self.autohidedom = self.autohidedom.add(self.cursorh);\n        } else if (self.opt.autohidemode == \"hidden\") {\n          self.autohidedom = false;\n          self.hide();\n          self.locked = false;\n        }\n\n        if (cap.isie9mobile) {\n          self.scrollmom = new ScrollMomentumClass2D(self);\n          /*\n          var trace = function(msg) {\n            var db = $(\"#debug\");\n            if (isNaN(msg)&&(typeof msg != \"string\")) {\n              var x = [];\n              for(var a in msg) {\n                x.push(a+\":\"+msg[a]);\n              }\n              msg =\"{\"+x.join(\",\")+\"}\";\n            }\n            if (db.children().length>0) {\n              db.children().eq(0).before(\"<div>\"+msg+\"</div>\");\n            } else {\n              db.append(\"<div>\"+msg+\"</div>\");\n            }\n          }\n          window.onerror = function(msg,url,ln) {\n            trace(\"ERR: \"+msg+\" at \"+ln);\n          }\n          */\n\n          self.onmangotouch = function (e) {\n            var py = self.getScrollTop();\n            var px = self.getScrollLeft();\n            if (py == self.scrollmom.lastscrolly && px == self.scrollmom.lastscrollx) return true; //            $(\"#debug\").html('DRAG:'+py);\n\n            var dfy = py - self.mangotouch.sy;\n            var dfx = px - self.mangotouch.sx;\n            var df = Math.round(Math.sqrt(Math.pow(dfx, 2) + Math.pow(dfy, 2)));\n            if (df == 0) return;\n            var dry = dfy < 0 ? -1 : 1;\n            var drx = dfx < 0 ? -1 : 1;\n            var tm = +new Date();\n            if (self.mangotouch.lazy) clearTimeout(self.mangotouch.lazy);\n\n            if (tm - self.mangotouch.tm > 80 || self.mangotouch.dry != dry || self.mangotouch.drx != drx) {\n              //              trace('RESET+'+(tm-self.mangotouch.tm));\n              self.scrollmom.stop();\n              self.scrollmom.reset(px, py);\n              self.mangotouch.sy = py;\n              self.mangotouch.ly = py;\n              self.mangotouch.sx = px;\n              self.mangotouch.lx = px;\n              self.mangotouch.dry = dry;\n              self.mangotouch.drx = drx;\n              self.mangotouch.tm = tm;\n            } else {\n              self.scrollmom.stop();\n              self.scrollmom.update(self.mangotouch.sx - dfx, self.mangotouch.sy - dfy);\n              var gap = tm - self.mangotouch.tm;\n              self.mangotouch.tm = tm; //              trace('MOVE:'+df+\" - \"+gap);\n\n              var ds = Math.max(Math.abs(self.mangotouch.ly - py), Math.abs(self.mangotouch.lx - px));\n              self.mangotouch.ly = py;\n              self.mangotouch.lx = px;\n\n              if (ds > 2) {\n                self.mangotouch.lazy = setTimeout(function () {\n                  //                  trace('END:'+ds+'+'+gap);\n                  self.mangotouch.lazy = false;\n                  self.mangotouch.dry = 0;\n                  self.mangotouch.drx = 0;\n                  self.mangotouch.tm = 0;\n                  self.scrollmom.doMomentum(30);\n                }, 100);\n              }\n            }\n          };\n\n          var top = self.getScrollTop();\n          var lef = self.getScrollLeft();\n          self.mangotouch = {\n            sy: top,\n            ly: top,\n            dry: 0,\n            sx: lef,\n            lx: lef,\n            drx: 0,\n            lazy: false,\n            tm: 0\n          };\n          self.bind(self.docscroll, \"scroll\", self.onmangotouch);\n        } else {\n          if (cap.cantouch || self.istouchcapable || self.opt.touchbehavior || cap.hasmstouch) {\n            self.scrollmom = new ScrollMomentumClass2D(self);\n\n            self.ontouchstart = function (e) {\n              if (e.pointerType && e.pointerType != 2) return false;\n\n              if (!self.locked) {\n                if (cap.hasmstouch) {\n                  var tg = e.target ? e.target : false;\n\n                  while (tg) {\n                    var nc = $(tg).getNiceScroll();\n                    if (nc.length > 0 && nc[0].me == self.me) break;\n                    if (nc.length > 0) return false;\n                    if (tg.nodeName == 'DIV' && tg.id == self.id) break;\n                    tg = tg.parentNode ? tg.parentNode : false;\n                  }\n                }\n\n                self.cancelScroll();\n                var tg = self.getTarget(e);\n\n                if (tg) {\n                  var skp = /INPUT/i.test(tg.nodeName) && /range/i.test(tg.type);\n                  if (skp) return self.stopPropagation(e);\n                }\n\n                if (!(\"clientX\" in e) && \"changedTouches\" in e) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  var e = {\n                    \"original\": e.original ? e.original : e\n                  };\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                self.rail.drag = {\n                  x: e.clientX,\n                  y: e.clientY,\n                  sx: self.scroll.x,\n                  sy: self.scroll.y,\n                  st: self.getScrollTop(),\n                  sl: self.getScrollLeft(),\n                  pt: 2,\n                  dl: false\n                };\n\n                if (self.ispage || !self.opt.directionlockdeadzone) {\n                  self.rail.drag.dl = \"f\";\n                } else {\n                  var view = {\n                    w: $(window).width(),\n                    h: $(window).height()\n                  };\n                  var page = {\n                    w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\n                    h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n                  };\n                  var maxh = Math.max(0, page.h - view.h);\n                  var maxw = Math.max(0, page.w - view.w);\n                  if (!self.rail.scrollable && self.railh.scrollable) self.rail.drag.ck = maxh > 0 ? \"v\" : false;else if (self.rail.scrollable && !self.railh.scrollable) self.rail.drag.ck = maxw > 0 ? \"h\" : false;else self.rail.drag.ck = false;\n                  if (!self.rail.drag.ck) self.rail.drag.dl = \"f\";\n                }\n\n                if (self.opt.touchbehavior && self.isiframe && cap.isie) {\n                  var wp = self.win.position();\n                  self.rail.drag.x += wp.left;\n                  self.rail.drag.y += wp.top;\n                }\n\n                self.hasmoving = false;\n                self.lastmouseup = false;\n                self.scrollmom.reset(e.clientX, e.clientY);\n\n                if (!cap.cantouch && !this.istouchcapable && !cap.hasmstouch) {\n                  var ip = tg ? /INPUT|SELECT|TEXTAREA/i.test(tg.nodeName) : false;\n\n                  if (!ip) {\n                    if (!self.ispage && cap.hasmousecapture) tg.setCapture(); //                  return self.cancelEvent(e);\n\n                    return self.opt.touchbehavior ? self.cancelEvent(e) : self.stopPropagation(e);\n                  }\n\n                  if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))) {\n                    pc = {\n                      \"tg\": tg,\n                      \"click\": false\n                    };\n                    self.preventclick = pc;\n                  }\n                }\n              }\n            };\n\n            self.ontouchend = function (e) {\n              if (e.pointerType && e.pointerType != 2) return false;\n\n              if (self.rail.drag && self.rail.drag.pt == 2) {\n                self.scrollmom.doMomentum();\n                self.rail.drag = false;\n\n                if (self.hasmoving) {\n                  self.hasmoving = false;\n                  self.lastmouseup = true;\n                  self.hideCursor();\n                  if (cap.hasmousecapture) document.releaseCapture();\n                  if (!cap.cantouch) return self.cancelEvent(e);\n                }\n              }\n            };\n\n            var moveneedoffset = self.opt.touchbehavior && self.isiframe && !cap.hasmousecapture;\n\n            self.ontouchmove = function (e, byiframe) {\n              if (e.pointerType && e.pointerType != 2) return false;\n\n              if (self.rail.drag && self.rail.drag.pt == 2) {\n                if (cap.cantouch && typeof e.original == \"undefined\") return true; // prevent ios \"ghost\" events by clickable elements\n\n                self.hasmoving = true;\n\n                if (self.preventclick && !self.preventclick.click) {\n                  self.preventclick.click = self.preventclick.tg.onclick || false;\n                  self.preventclick.tg.onclick = self.onpreventclick;\n                }\n\n                var ev = $.extend({\n                  \"original\": e\n                }, e);\n                e = ev;\n\n                if (\"changedTouches\" in e) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  var e = {\n                    \"original\": e.original ? e.original : e\n                  };\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                var ofx = ofy = 0;\n\n                if (moveneedoffset && !byiframe) {\n                  var wp = self.win.position();\n                  ofx = -wp.left;\n                  ofy = -wp.top;\n                }\n\n                var fy = e.clientY + ofy;\n                var my = fy - self.rail.drag.y;\n                var fx = e.clientX + ofx;\n                var mx = fx - self.rail.drag.x;\n                var ny = self.rail.drag.st - my;\n\n                if (self.ishwscroll && self.opt.bouncescroll) {\n                  if (ny < 0) {\n                    ny = Math.round(ny / 2); //                    fy = 0;\n                  } else if (ny > self.page.maxh) {\n                    ny = self.page.maxh + Math.round((ny - self.page.maxh) / 2); //                    fy = 0;\n                  }\n                } else {\n                  if (ny < 0) {\n                    ny = 0;\n                    fy = 0;\n                  }\n\n                  if (ny > self.page.maxh) {\n                    ny = self.page.maxh;\n                    fy = 0;\n                  }\n                }\n\n                if (self.railh && self.railh.scrollable) {\n                  var nx = self.rail.drag.sl - mx;\n\n                  if (self.ishwscroll && self.opt.bouncescroll) {\n                    if (nx < 0) {\n                      nx = Math.round(nx / 2); //                      fx = 0;\n                    } else if (nx > self.page.maxw) {\n                      nx = self.page.maxw + Math.round((nx - self.page.maxw) / 2); //                      fx = 0;\n                    }\n                  } else {\n                    if (nx < 0) {\n                      nx = 0;\n                      fx = 0;\n                    }\n\n                    if (nx > self.page.maxw) {\n                      nx = self.page.maxw;\n                      fx = 0;\n                    }\n                  }\n                }\n\n                var grabbed = false;\n\n                if (self.rail.drag.dl) {\n                  grabbed = true;\n                  if (self.rail.drag.dl == \"v\") nx = self.rail.drag.sl;else if (self.rail.drag.dl == \"h\") ny = self.rail.drag.st;\n                } else {\n                  var ay = Math.abs(my);\n                  var ax = Math.abs(mx);\n                  var dz = self.opt.directionlockdeadzone;\n\n                  if (self.rail.drag.ck == \"v\") {\n                    if (ay > dz && ax <= ay * 0.3) {\n                      self.rail.drag = false;\n                      return true;\n                    } else if (ax > dz) {\n                      self.rail.drag.dl = \"f\";\n                      $(\"body\").scrollTop($(\"body\").scrollTop()); // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  } else if (self.rail.drag.ck == \"h\") {\n                    if (ax > dz && ay <= ax * 0.3) {\n                      self.rail.drag = false;\n                      return true;\n                    } else if (ay > dz) {\n                      self.rail.drag.dl = \"f\";\n                      $(\"body\").scrollLeft($(\"body\").scrollLeft()); // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  }\n                }\n\n                self.synched(\"touchmove\", function () {\n                  if (self.rail.drag && self.rail.drag.pt == 2) {\n                    if (self.prepareTransition) self.prepareTransition(0);\n                    if (self.rail.scrollable) self.setScrollTop(ny);\n                    self.scrollmom.update(fx, fy);\n\n                    if (self.railh && self.railh.scrollable) {\n                      self.setScrollLeft(nx);\n                      self.showCursor(ny, nx);\n                    } else {\n                      self.showCursor(ny);\n                    }\n\n                    if (cap.isie10) document.selection.clear();\n                  }\n                });\n                if (cap.ischrome && self.istouchcapable) grabbed = false; //chrome touch emulation doesn't like!\n\n                if (grabbed) return self.cancelEvent(e);\n              }\n            };\n          }\n\n          self.onmousedown = function (e, hronly) {\n            if (self.rail.drag && self.rail.drag.pt != 1) return;\n            if (self.locked) return self.cancelEvent(e);\n            self.cancelScroll();\n            self.rail.drag = {\n              x: e.clientX,\n              y: e.clientY,\n              sx: self.scroll.x,\n              sy: self.scroll.y,\n              pt: 1,\n              hr: !!hronly\n            };\n            var tg = self.getTarget(e);\n            if (!self.ispage && cap.hasmousecapture) tg.setCapture();\n\n            if (self.isiframe && !cap.hasmousecapture) {\n              self.saved[\"csspointerevents\"] = self.doc.css(\"pointer-events\");\n              self.css(self.doc, {\n                \"pointer-events\": \"none\"\n              });\n            }\n\n            return self.cancelEvent(e);\n          };\n\n          self.onmouseup = function (e) {\n            if (self.rail.drag) {\n              if (cap.hasmousecapture) document.releaseCapture();\n              if (self.isiframe && !cap.hasmousecapture) self.doc.css(\"pointer-events\", self.saved[\"csspointerevents\"]);\n              if (self.rail.drag.pt != 1) return;\n              self.rail.drag = false; //if (!self.rail.active) self.hideCursor();\n\n              return self.cancelEvent(e);\n            }\n          };\n\n          self.onmousemove = function (e) {\n            if (self.rail.drag) {\n              if (self.rail.drag.pt != 1) return;\n              if (cap.ischrome && e.which == 0) return self.onmouseup(e);\n              self.cursorfreezed = true;\n\n              if (self.rail.drag.hr) {\n                self.scroll.x = self.rail.drag.sx + (e.clientX - self.rail.drag.x);\n                if (self.scroll.x < 0) self.scroll.x = 0;\n                var mw = self.scrollvaluemaxw;\n                if (self.scroll.x > mw) self.scroll.x = mw;\n              } else {\n                self.scroll.y = self.rail.drag.sy + (e.clientY - self.rail.drag.y);\n                if (self.scroll.y < 0) self.scroll.y = 0;\n                var my = self.scrollvaluemax;\n                if (self.scroll.y > my) self.scroll.y = my;\n              }\n\n              self.synched('mousemove', function () {\n                if (self.rail.drag && self.rail.drag.pt == 1) {\n                  self.showCursor();\n                  if (self.rail.drag.hr) self.doScrollLeft(Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);else self.doScrollTop(Math.round(self.scroll.y * self.scrollratio.y), self.opt.cursordragspeed);\n                }\n              });\n              return self.cancelEvent(e);\n            }\n            /*\n                        else {\n                          self.checkarea = true;\n                        }\n            */\n\n          };\n\n          if (cap.cantouch || self.opt.touchbehavior) {\n            self.onpreventclick = function (e) {\n              if (self.preventclick) {\n                self.preventclick.tg.onclick = self.preventclick.click;\n                self.preventclick = false;\n                return self.cancelEvent(e);\n              }\n            }; //            self.onmousedown = self.ontouchstart;\n            //            self.onmouseup = self.ontouchend;\n            //            self.onmousemove = self.ontouchmove;\n\n\n            self.bind(self.win, \"mousedown\", self.ontouchstart); // control content dragging\n\n            self.onclick = cap.isios ? false : function (e) {\n              if (self.lastmouseup) {\n                self.lastmouseup = false;\n                return self.cancelEvent(e);\n              } else {\n                return true;\n              }\n            };\n\n            if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {\n              self.css(self.ispage ? self.doc : self.win, {\n                'cursor': cap.cursorgrabvalue\n              });\n              self.css(self.rail, {\n                'cursor': cap.cursorgrabvalue\n              });\n            }\n          } else {\n            function checkSelectionScroll(e) {\n              if (!self.selectiondrag) return;\n\n              if (e) {\n                var ww = self.win.outerHeight();\n                var df = e.pageY - self.selectiondrag.top;\n                if (df > 0 && df < ww) df = 0;\n                if (df >= ww) df -= ww;\n                self.selectiondrag.df = df;\n              }\n\n              if (self.selectiondrag.df == 0) return;\n              var rt = -Math.floor(self.selectiondrag.df / 6) * 2; //              self.doScrollTop(self.getScrollTop(true)+rt);\n\n              self.doScrollBy(rt);\n              self.debounced(\"doselectionscroll\", function () {\n                checkSelectionScroll();\n              }, 50);\n            }\n\n            if (\"getSelection\" in document) {\n              // A grade - Major browsers\n              self.hasTextSelected = function () {\n                return document.getSelection().rangeCount > 0;\n              };\n            } else if (\"selection\" in document) {\n              //IE9-\n              self.hasTextSelected = function () {\n                return document.selection.type != \"None\";\n              };\n            } else {\n              self.hasTextSelected = function () {\n                // no support\n                return false;\n              };\n            }\n\n            self.onselectionstart = function (e) {\n              if (self.ispage) return;\n              self.selectiondrag = self.win.offset();\n            };\n\n            self.onselectionend = function (e) {\n              self.selectiondrag = false;\n            };\n\n            self.onselectiondrag = function (e) {\n              if (!self.selectiondrag) return;\n              if (self.hasTextSelected()) self.debounced(\"selectionscroll\", function () {\n                checkSelectionScroll(e);\n              }, 250);\n            };\n          }\n\n          if (cap.hasmstouch) {\n            self.css(self.rail, {\n              '-ms-touch-action': 'none'\n            });\n            self.css(self.cursor, {\n              '-ms-touch-action': 'none'\n            });\n            self.bind(self.win, \"MSPointerDown\", self.ontouchstart);\n            self.bind(document, \"MSPointerUp\", self.ontouchend);\n            self.bind(document, \"MSPointerMove\", self.ontouchmove);\n            self.bind(self.cursor, \"MSGestureHold\", function (e) {\n              e.preventDefault();\n            });\n            self.bind(self.cursor, \"contextmenu\", function (e) {\n              e.preventDefault();\n            });\n          }\n\n          if (this.istouchcapable) {\n            //desktop with screen touch enabled\n            self.bind(self.win, \"touchstart\", self.ontouchstart);\n            self.bind(document, \"touchend\", self.ontouchend);\n            self.bind(document, \"touchcancel\", self.ontouchend);\n            self.bind(document, \"touchmove\", self.ontouchmove);\n          }\n\n          self.bind(self.cursor, \"mousedown\", self.onmousedown);\n          self.bind(self.cursor, \"mouseup\", self.onmouseup);\n\n          if (self.railh) {\n            self.bind(self.cursorh, \"mousedown\", function (e) {\n              self.onmousedown(e, true);\n            });\n            self.bind(self.cursorh, \"mouseup\", function (e) {\n              if (self.rail.drag && self.rail.drag.pt == 2) return;\n              self.rail.drag = false;\n              self.hasmoving = false;\n              self.hideCursor();\n              if (cap.hasmousecapture) document.releaseCapture();\n              return self.cancelEvent(e);\n            });\n          }\n\n          if (self.opt.cursordragontouch || !cap.cantouch && !self.opt.touchbehavior) {\n            self.rail.css({\n              \"cursor\": \"default\"\n            });\n            self.railh && self.railh.css({\n              \"cursor\": \"default\"\n            });\n            self.jqbind(self.rail, \"mouseenter\", function () {\n              if (self.canshowonmouseevent) self.showCursor();\n              self.rail.active = true;\n            });\n            self.jqbind(self.rail, \"mouseleave\", function () {\n              self.rail.active = false;\n              if (!self.rail.drag) self.hideCursor();\n            });\n\n            if (self.opt.sensitiverail) {\n              self.bind(self.rail, \"click\", function (e) {\n                self.doRailClick(e, false, false);\n              });\n              self.bind(self.rail, \"dblclick\", function (e) {\n                self.doRailClick(e, true, false);\n              });\n              self.bind(self.cursor, \"click\", function (e) {\n                self.cancelEvent(e);\n              });\n              self.bind(self.cursor, \"dblclick\", function (e) {\n                self.cancelEvent(e);\n              });\n            }\n\n            if (self.railh) {\n              self.jqbind(self.railh, \"mouseenter\", function () {\n                if (self.canshowonmouseevent) self.showCursor();\n                self.rail.active = true;\n              });\n              self.jqbind(self.railh, \"mouseleave\", function () {\n                self.rail.active = false;\n                if (!self.rail.drag) self.hideCursor();\n              });\n\n              if (self.opt.sensitiverail) {\n                self.bind(self.railh, \"click\", function (e) {\n                  self.doRailClick(e, false, true);\n                });\n                self.bind(self.railh, \"dblclick\", function (e) {\n                  self.doRailClick(e, true, true);\n                });\n                self.bind(self.cursorh, \"click\", function (e) {\n                  self.cancelEvent(e);\n                });\n                self.bind(self.cursorh, \"dblclick\", function (e) {\n                  self.cancelEvent(e);\n                });\n              }\n            }\n          }\n\n          if (!cap.cantouch && !self.opt.touchbehavior) {\n            self.bind(cap.hasmousecapture ? self.win : document, \"mouseup\", self.onmouseup);\n            self.bind(document, \"mousemove\", self.onmousemove);\n            if (self.onclick) self.bind(document, \"click\", self.onclick);\n\n            if (!self.ispage && self.opt.enablescrollonselection) {\n              self.bind(self.win[0], \"mousedown\", self.onselectionstart);\n              self.bind(document, \"mouseup\", self.onselectionend);\n              self.bind(self.cursor, \"mouseup\", self.onselectionend);\n              if (self.cursorh) self.bind(self.cursorh, \"mouseup\", self.onselectionend);\n              self.bind(document, \"mousemove\", self.onselectiondrag);\n            }\n\n            if (self.zoom) {\n              self.jqbind(self.zoom, \"mouseenter\", function () {\n                if (self.canshowonmouseevent) self.showCursor();\n                self.rail.active = true;\n              });\n              self.jqbind(self.zoom, \"mouseleave\", function () {\n                self.rail.active = false;\n                if (!self.rail.drag) self.hideCursor();\n              });\n            }\n          } else {\n            self.bind(cap.hasmousecapture ? self.win : document, \"mouseup\", self.ontouchend);\n            self.bind(document, \"mousemove\", self.ontouchmove);\n            if (self.onclick) self.bind(document, \"click\", self.onclick);\n\n            if (self.opt.cursordragontouch) {\n              self.bind(self.cursor, \"mousedown\", self.onmousedown);\n              self.bind(self.cursor, \"mousemove\", self.onmousemove);\n              self.cursorh && self.bind(self.cursorh, \"mousedown\", self.onmousedown);\n              self.cursorh && self.bind(self.cursorh, \"mousemove\", self.onmousemove);\n            }\n          }\n\n          if (self.opt.enablemousewheel) {\n            if (!self.isiframe) self.bind(cap.isie && self.ispage ? document : self.win\n            /*self.docscroll*/\n            , \"mousewheel\", self.onmousewheel);\n            self.bind(self.rail, \"mousewheel\", self.onmousewheel);\n            if (self.railh) self.bind(self.railh, \"mousewheel\", self.onmousewheelhr);\n          }\n\n          if (!self.ispage && !cap.cantouch && !/HTML|BODY/.test(self.win[0].nodeName)) {\n            if (!self.win.attr(\"tabindex\")) self.win.attr({\n              \"tabindex\": tabindexcounter++\n            });\n            self.jqbind(self.win, \"focus\", function (e) {\n              domfocus = self.getTarget(e).id || true;\n              self.hasfocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win, \"blur\", function (e) {\n              domfocus = false;\n              self.hasfocus = false;\n            });\n            self.jqbind(self.win, \"mouseenter\", function (e) {\n              mousefocus = self.getTarget(e).id || true;\n              self.hasmousefocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win, \"mouseleave\", function () {\n              mousefocus = false;\n              self.hasmousefocus = false;\n            });\n          }\n\n          ;\n        } // !ie9mobile\n        //Thanks to http://www.quirksmode.org !!\n\n\n        self.onkeypress = function (e) {\n          if (self.locked && self.page.maxh == 0) return true;\n          e = e ? e : window.e;\n          var tg = self.getTarget(e);\n\n          if (tg && /INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {\n            var tp = tg.getAttribute('type') || tg.type || false;\n            if (!tp || !/submit|button|cancel/i.tp) return true;\n          }\n\n          if (self.hasfocus || self.hasmousefocus && !domfocus || self.ispage && !domfocus && !mousefocus) {\n            var key = e.keyCode;\n            if (self.locked && key != 27) return self.cancelEvent(e);\n            var ctrl = e.ctrlKey || false;\n            var shift = e.shiftKey || false;\n            var ret = false;\n\n            switch (key) {\n              case 38:\n              case 63233:\n                //safari\n                self.doScrollBy(24 * 3);\n                ret = true;\n                break;\n\n              case 40:\n              case 63235:\n                //safari\n                self.doScrollBy(-24 * 3);\n                ret = true;\n                break;\n\n              case 37:\n              case 63232:\n                //safari\n                if (self.railh) {\n                  ctrl ? self.doScrollLeft(0) : self.doScrollLeftBy(24 * 3);\n                  ret = true;\n                }\n\n                break;\n\n              case 39:\n              case 63234:\n                //safari\n                if (self.railh) {\n                  ctrl ? self.doScrollLeft(self.page.maxw) : self.doScrollLeftBy(-24 * 3);\n                  ret = true;\n                }\n\n                break;\n\n              case 33:\n              case 63276:\n                // safari\n                self.doScrollBy(self.view.h);\n                ret = true;\n                break;\n\n              case 34:\n              case 63277:\n                // safari\n                self.doScrollBy(-self.view.h);\n                ret = true;\n                break;\n\n              case 36:\n              case 63273:\n                // safari\n                self.railh && ctrl ? self.doScrollPos(0, 0) : self.doScrollTo(0);\n                ret = true;\n                break;\n\n              case 35:\n              case 63275:\n                // safari\n                self.railh && ctrl ? self.doScrollPos(self.page.maxw, self.page.maxh) : self.doScrollTo(self.page.maxh);\n                ret = true;\n                break;\n\n              case 32:\n                if (self.opt.spacebarenabled) {\n                  shift ? self.doScrollBy(self.view.h) : self.doScrollBy(-self.view.h);\n                  ret = true;\n                }\n\n                break;\n\n              case 27:\n                // ESC\n                if (self.zoomactive) {\n                  self.doZoom();\n                  ret = true;\n                }\n\n                break;\n            }\n\n            if (ret) return self.cancelEvent(e);\n          }\n        };\n\n        if (self.opt.enablekeyboard) self.bind(document, cap.isopera && !cap.isopera12 ? \"keypress\" : \"keydown\", self.onkeypress);\n        self.bind(window, 'resize', self.lazyResize);\n        self.bind(window, 'orientationchange', self.lazyResize);\n        self.bind(window, \"load\", self.lazyResize);\n\n        if (cap.ischrome && !self.ispage && !self.haswrapper) {\n          //chrome void scrollbar bug - it persists in version 26\n          var tmp = self.win.attr(\"style\");\n          var ww = parseFloat(self.win.css(\"width\")) + 1;\n          self.win.css('width', ww);\n          self.synched(\"chromefix\", function () {\n            self.win.attr(\"style\", tmp);\n          });\n        } // Trying a cross-browser implementation - good luck!\n\n\n        self.onAttributeChange = function (e) {\n          self.lazyResize(250);\n        };\n\n        if (!self.ispage && !self.haswrapper) {\n          // redesigned MutationObserver for Chrome18+/Firefox14+/iOS6+ with support for: remove div, add/remove content\n          if (clsMutationObserver !== false) {\n            self.observer = new clsMutationObserver(function (mutations) {\n              mutations.forEach(self.onAttributeChange);\n            });\n            self.observer.observe(self.win[0], {\n              childList: true,\n              characterData: false,\n              attributes: true,\n              subtree: false\n            });\n            self.observerremover = new clsMutationObserver(function (mutations) {\n              mutations.forEach(function (mo) {\n                if (mo.removedNodes.length > 0) {\n                  for (var dd in mo.removedNodes) {\n                    if (mo.removedNodes[dd] == self.win[0]) return self.remove();\n                  }\n                }\n              });\n            });\n            self.observerremover.observe(self.win[0].parentNode, {\n              childList: true,\n              characterData: false,\n              attributes: false,\n              subtree: false\n            });\n          } else {\n            self.bind(self.win, cap.isie && !cap.isie9 ? \"propertychange\" : \"DOMAttrModified\", self.onAttributeChange);\n            if (cap.isie9) self.win[0].attachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\n\n            self.bind(self.win, \"DOMNodeRemoved\", function (e) {\n              if (e.target == self.win[0]) self.remove();\n            });\n          }\n        } //\n\n\n        if (!self.ispage && self.opt.boxzoom) self.bind(window, \"resize\", self.resizeZoom);\n        if (self.istextarea) self.bind(self.win, \"mouseup\", self.lazyResize);\n        self.checkrtlmode = true;\n        self.lazyResize(30);\n      }\n\n      if (this.doc[0].nodeName == 'IFRAME') {\n        function oniframeload(e) {\n          self.iframexd = false;\n\n          try {\n            var doc = 'contentDocument' in this ? this.contentDocument : this.contentWindow.document;\n            var a = doc.domain;\n          } catch (e) {\n            self.iframexd = true;\n            doc = false;\n          }\n\n          ;\n\n          if (self.iframexd) {\n            if (\"console\" in window) console.log('NiceScroll error: policy restriced iframe');\n            return true; //cross-domain - I can't manage this\n          }\n\n          self.forcescreen = true;\n\n          if (self.isiframe) {\n            self.iframe = {\n              \"doc\": $(doc),\n              \"html\": self.doc.contents().find('html')[0],\n              \"body\": self.doc.contents().find('body')[0]\n            };\n\n            self.getContentSize = function () {\n              return {\n                w: Math.max(self.iframe.html.scrollWidth, self.iframe.body.scrollWidth),\n                h: Math.max(self.iframe.html.scrollHeight, self.iframe.body.scrollHeight)\n              };\n            };\n\n            self.docscroll = $(self.iframe.body); //$(this.contentWindow);\n          }\n\n          if (!cap.isios && self.opt.iframeautoresize && !self.isiframe) {\n            self.win.scrollTop(0); // reset position\n\n            self.doc.height(\"\"); //reset height to fix browser bug\n\n            var hh = Math.max(doc.getElementsByTagName('html')[0].scrollHeight, doc.body.scrollHeight);\n            self.doc.height(hh);\n          }\n\n          self.lazyResize(30);\n          if (cap.isie7) self.css($(self.iframe.html), {\n            'overflow-y': 'hidden'\n          }); //self.css($(doc.body),{'overflow-y':'hidden'});\n\n          self.css($(self.iframe.body), {\n            'overflow-y': 'hidden'\n          });\n\n          if (cap.isios && self.haswrapper) {\n            self.css($(doc.body), {\n              '-webkit-transform': 'translate3d(0,0,0)'\n            }); // avoid iFrame content clipping - thanks to http://blog.derraab.com/2012/04/02/avoid-iframe-content-clipping-with-css-transform-on-ios/\n\n            console.log(1);\n          }\n\n          if ('contentWindow' in this) {\n            self.bind(this.contentWindow, \"scroll\", self.onscroll); //IE8 & minor\n          } else {\n            self.bind(doc, \"scroll\", self.onscroll);\n          }\n\n          if (self.opt.enablemousewheel) {\n            self.bind(doc, \"mousewheel\", self.onmousewheel);\n          }\n\n          if (self.opt.enablekeyboard) self.bind(doc, cap.isopera ? \"keypress\" : \"keydown\", self.onkeypress);\n\n          if (cap.cantouch || self.opt.touchbehavior) {\n            self.bind(doc, \"mousedown\", self.ontouchstart);\n            self.bind(doc, \"mousemove\", function (e) {\n              self.ontouchmove(e, true);\n            });\n            if (self.opt.grabcursorenabled && cap.cursorgrabvalue) self.css($(doc.body), {\n              'cursor': cap.cursorgrabvalue\n            });\n          }\n\n          self.bind(doc, \"mouseup\", self.ontouchend);\n\n          if (self.zoom) {\n            if (self.opt.dblclickzoom) self.bind(doc, 'dblclick', self.doZoom);\n            if (self.ongesturezoom) self.bind(doc, \"gestureend\", self.ongesturezoom);\n          }\n        }\n\n        ;\n\n        if (this.doc[0].readyState && this.doc[0].readyState == \"complete\") {\n          setTimeout(function () {\n            oniframeload.call(self.doc[0], false);\n          }, 500);\n        }\n\n        self.bind(this.doc, \"load\", oniframeload);\n      }\n    };\n\n    this.showCursor = function (py, px) {\n      if (self.cursortimeout) {\n        clearTimeout(self.cursortimeout);\n        self.cursortimeout = 0;\n      }\n\n      if (!self.rail) return;\n\n      if (self.autohidedom) {\n        self.autohidedom.stop().css({\n          opacity: self.opt.cursoropacitymax\n        });\n        self.cursoractive = true;\n      }\n\n      if (!self.rail.drag || self.rail.drag.pt != 1) {\n        if (typeof py != \"undefined\" && py !== false) {\n          self.scroll.y = Math.round(py * 1 / self.scrollratio.y);\n        }\n\n        if (typeof px != \"undefined\") {\n          self.scroll.x = Math.round(px * 1 / self.scrollratio.x);\n        }\n      }\n\n      self.cursor.css({\n        height: self.cursorheight,\n        top: self.scroll.y\n      });\n\n      if (self.cursorh) {\n        !self.rail.align && self.rail.visibility ? self.cursorh.css({\n          width: self.cursorwidth,\n          left: self.scroll.x + self.rail.width\n        }) : self.cursorh.css({\n          width: self.cursorwidth,\n          left: self.scroll.x\n        });\n        self.cursoractive = true;\n      }\n\n      if (self.zoom) self.zoom.stop().css({\n        opacity: self.opt.cursoropacitymax\n      });\n    };\n\n    this.hideCursor = function (tm) {\n      if (self.cursortimeout) return;\n      if (!self.rail) return;\n      if (!self.autohidedom) return;\n      self.cursortimeout = setTimeout(function () {\n        if (!self.rail.active || !self.showonmouseevent) {\n          self.autohidedom.stop().animate({\n            opacity: self.opt.cursoropacitymin\n          });\n          if (self.zoom) self.zoom.stop().animate({\n            opacity: self.opt.cursoropacitymin\n          });\n          self.cursoractive = false;\n        }\n\n        self.cursortimeout = 0;\n      }, tm || self.opt.hidecursordelay);\n    };\n\n    this.noticeCursor = function (tm, py, px) {\n      self.showCursor(py, px);\n      if (!self.rail.active) self.hideCursor(tm);\n    };\n\n    this.getContentSize = self.ispage ? function () {\n      return {\n        w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\n        h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\n      };\n    } : self.haswrapper ? function () {\n      return {\n        w: self.doc.outerWidth() + parseInt(self.win.css('paddingLeft')) + parseInt(self.win.css('paddingRight')),\n        h: self.doc.outerHeight() + parseInt(self.win.css('paddingTop')) + parseInt(self.win.css('paddingBottom'))\n      };\n    } : function () {\n      return {\n        w: self.docscroll[0].scrollWidth,\n        h: self.docscroll[0].scrollHeight\n      };\n    };\n\n    this.onResize = function (e, page) {\n      if (!self.win) return false;\n\n      if (!self.haswrapper && !self.ispage) {\n        if (self.win.css('display') == 'none') {\n          if (self.visibility) self.hideRail().hideRailHr();\n          return false;\n        } else {\n          if (!self.hidden && !self.visibility) self.showRail().showRailHr();\n        }\n      }\n\n      var premaxh = self.page.maxh;\n      var premaxw = self.page.maxw;\n      var preview = {\n        h: self.view.h,\n        w: self.view.w\n      };\n      self.view = {\n        w: self.ispage ? self.win.width() : parseInt(self.win[0].clientWidth),\n        h: self.ispage ? self.win.height() : parseInt(self.win[0].clientHeight)\n      };\n      self.page = page ? page : self.getContentSize();\n      self.page.maxh = Math.max(0, self.page.h - self.view.h);\n      self.page.maxw = Math.max(0, self.page.w - self.view.w);\n\n      if (self.page.maxh == premaxh && self.page.maxw == premaxw && self.view.w == preview.w) {\n        // test position\n        if (!self.ispage) {\n          var pos = self.win.offset();\n\n          if (self.lastposition) {\n            var lst = self.lastposition;\n            if (lst.top == pos.top && lst.left == pos.left) return self; //nothing to do\n          }\n\n          self.lastposition = pos;\n        } else {\n          return self; //nothing to do\n        }\n      }\n\n      if (self.page.maxh == 0) {\n        self.hideRail();\n        self.scrollvaluemax = 0;\n        self.scroll.y = 0;\n        self.scrollratio.y = 0;\n        self.cursorheight = 0;\n        self.setScrollTop(0);\n        self.rail.scrollable = false;\n      } else {\n        self.rail.scrollable = true;\n      }\n\n      if (self.page.maxw == 0) {\n        self.hideRailHr();\n        self.scrollvaluemaxw = 0;\n        self.scroll.x = 0;\n        self.scrollratio.x = 0;\n        self.cursorwidth = 0;\n        self.setScrollLeft(0);\n        self.railh.scrollable = false;\n      } else {\n        self.railh.scrollable = true;\n      }\n\n      self.locked = self.page.maxh == 0 && self.page.maxw == 0;\n\n      if (self.locked) {\n        if (!self.ispage) self.updateScrollBar(self.view);\n        return false;\n      }\n\n      if (!self.hidden && !self.visibility) {\n        self.showRail().showRailHr();\n      } else if (!self.hidden && !self.railh.visibility) self.showRailHr();\n\n      if (self.istextarea && self.win.css('resize') && self.win.css('resize') != 'none') self.view.h -= 20;\n      self.cursorheight = Math.min(self.view.h, Math.round(self.view.h * (self.view.h / self.page.h)));\n      self.cursorheight = self.opt.cursorfixedheight ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorheight);\n      self.cursorwidth = Math.min(self.view.w, Math.round(self.view.w * (self.view.w / self.page.w)));\n      self.cursorwidth = self.opt.cursorfixedheight ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorwidth);\n      self.scrollvaluemax = self.view.h - self.cursorheight - self.cursor.hborder;\n\n      if (self.railh) {\n        self.railh.width = self.page.maxh > 0 ? self.view.w - self.rail.width : self.view.w;\n        self.scrollvaluemaxw = self.railh.width - self.cursorwidth - self.cursorh.wborder;\n      }\n\n      if (self.checkrtlmode && self.railh) {\n        self.checkrtlmode = false;\n        if (self.opt.rtlmode && self.scroll.x == 0) self.setScrollLeft(self.page.maxw);\n      }\n\n      if (!self.ispage) self.updateScrollBar(self.view);\n      self.scrollratio = {\n        x: self.page.maxw / self.scrollvaluemaxw,\n        y: self.page.maxh / self.scrollvaluemax\n      };\n      var sy = self.getScrollTop();\n\n      if (sy > self.page.maxh) {\n        self.doScrollTop(self.page.maxh);\n      } else {\n        self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n        self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\n        if (self.cursoractive) self.noticeCursor();\n      }\n\n      if (self.scroll.y && self.getScrollTop() == 0) self.doScrollTo(Math.floor(self.scroll.y * self.scrollratio.y));\n      return self;\n    };\n\n    this.resize = self.onResize;\n\n    this.lazyResize = function (tm) {\n      // event debounce\n      tm = isNaN(tm) ? 30 : tm;\n      self.delayed('resize', self.resize, tm);\n      return self;\n    }; // modified by MDN https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/wheel\n\n\n    function _modernWheelEvent(dom, name, fn, bubble) {\n      self._bind(dom, name, function (e) {\n        var e = e ? e : window.event;\n        var event = {\n          original: e,\n          target: e.target || e.srcElement,\n          type: \"wheel\",\n          deltaMode: e.type == \"MozMousePixelScroll\" ? 0 : 1,\n          deltaX: 0,\n          deltaZ: 0,\n          preventDefault: function () {\n            e.preventDefault ? e.preventDefault() : e.returnValue = false;\n            return false;\n          },\n          stopImmediatePropagation: function () {\n            e.stopImmediatePropagation ? e.stopImmediatePropagation() : e.cancelBubble = true;\n          }\n        };\n\n        if (name == \"mousewheel\") {\n          event.deltaY = -1 / 40 * e.wheelDelta;\n          e.wheelDeltaX && (event.deltaX = -1 / 40 * e.wheelDeltaX);\n        } else {\n          event.deltaY = e.detail;\n        }\n\n        return fn.call(dom, event);\n      }, bubble);\n    }\n\n    ;\n\n    this._bind = function (el, name, fn, bubble) {\n      // primitive bind\n      self.events.push({\n        e: el,\n        n: name,\n        f: fn,\n        b: bubble,\n        q: false\n      });\n\n      if (el.addEventListener) {\n        el.addEventListener(name, fn, bubble || false);\n      } else if (el.attachEvent) {\n        el.attachEvent(\"on\" + name, fn);\n      } else {\n        el[\"on\" + name] = fn;\n      }\n    };\n\n    this.jqbind = function (dom, name, fn) {\n      // use jquery bind for non-native events (mouseenter/mouseleave)\n      self.events.push({\n        e: dom,\n        n: name,\n        f: fn,\n        q: true\n      });\n      $(dom).bind(name, fn);\n    };\n\n    this.bind = function (dom, name, fn, bubble) {\n      // touch-oriented & fixing jquery bind\n      var el = \"jquery\" in dom ? dom[0] : dom;\n\n      if (name == 'mousewheel') {\n        if (\"onwheel\" in self.win) {\n          self._bind(el, \"wheel\", fn, bubble || false);\n        } else {\n          var wname = typeof document.onmousewheel != \"undefined\" ? \"mousewheel\" : \"DOMMouseScroll\"; // older IE/Firefox\n\n          _modernWheelEvent(el, wname, fn, bubble || false);\n\n          if (wname == \"DOMMouseScroll\") _modernWheelEvent(el, \"MozMousePixelScroll\", fn, bubble || false); // Firefox legacy\n        }\n      } else if (el.addEventListener) {\n        if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) {\n          // touch device support\n          var tt = name == 'mousedown' ? 'touchstart' : name == 'mouseup' ? 'touchend' : 'touchmove';\n\n          self._bind(el, tt, function (e) {\n            if (e.touches) {\n              if (e.touches.length < 2) {\n                var ev = e.touches.length ? e.touches[0] : e;\n                ev.original = e;\n                fn.call(this, ev);\n              }\n            } else if (e.changedTouches) {\n              var ev = e.changedTouches[0];\n              ev.original = e;\n              fn.call(this, ev);\n            } //blackberry\n\n          }, bubble || false);\n        }\n\n        self._bind(el, name, fn, bubble || false);\n\n        if (cap.cantouch && name == \"mouseup\") self._bind(el, \"touchcancel\", fn, bubble || false);\n      } else {\n        self._bind(el, name, function (e) {\n          e = e || window.event || false;\n\n          if (e) {\n            if (e.srcElement) e.target = e.srcElement;\n          }\n\n          if (!(\"pageY\" in e)) {\n            e.pageX = e.clientX + document.documentElement.scrollLeft;\n            e.pageY = e.clientY + document.documentElement.scrollTop;\n          }\n\n          return fn.call(el, e) === false || bubble === false ? self.cancelEvent(e) : true;\n        });\n      }\n    };\n\n    this._unbind = function (el, name, fn, bub) {\n      // primitive unbind\n      if (el.removeEventListener) {\n        el.removeEventListener(name, fn, bub);\n      } else if (el.detachEvent) {\n        el.detachEvent('on' + name, fn);\n      } else {\n        el['on' + name] = false;\n      }\n    };\n\n    this.unbindAll = function () {\n      for (var a = 0; a < self.events.length; a++) {\n        var r = self.events[a];\n        r.q ? r.e.unbind(r.n, r.f) : self._unbind(r.e, r.n, r.f, r.b);\n      }\n    }; // Thanks to http://www.switchonthecode.com !!\n\n\n    this.cancelEvent = function (e) {\n      var e = e.original ? e.original : e ? e : window.event || false;\n      if (!e) return false;\n      if (e.preventDefault) e.preventDefault();\n      if (e.stopPropagation) e.stopPropagation();\n      if (e.preventManipulation) e.preventManipulation(); //IE10\n\n      e.cancelBubble = true;\n      e.cancel = true;\n      e.returnValue = false;\n      return false;\n    };\n\n    this.stopPropagation = function (e) {\n      var e = e.original ? e.original : e ? e : window.event || false;\n      if (!e) return false;\n      if (e.stopPropagation) return e.stopPropagation();\n      if (e.cancelBubble) e.cancelBubble = true;\n      return false;\n    };\n\n    this.showRail = function () {\n      if (self.page.maxh != 0 && (self.ispage || self.win.css('display') != 'none')) {\n        self.visibility = true;\n        self.rail.visibility = true;\n        self.rail.css('display', 'block');\n      }\n\n      return self;\n    };\n\n    this.showRailHr = function () {\n      if (!self.railh) return self;\n\n      if (self.page.maxw != 0 && (self.ispage || self.win.css('display') != 'none')) {\n        self.railh.visibility = true;\n        self.railh.css('display', 'block');\n      }\n\n      return self;\n    };\n\n    this.hideRail = function () {\n      self.visibility = false;\n      self.rail.visibility = false;\n      self.rail.css('display', 'none');\n      return self;\n    };\n\n    this.hideRailHr = function () {\n      if (!self.railh) return self;\n      self.railh.visibility = false;\n      self.railh.css('display', 'none');\n      return self;\n    };\n\n    this.show = function () {\n      self.hidden = false;\n      self.locked = false;\n      return self.showRail().showRailHr();\n    };\n\n    this.hide = function () {\n      self.hidden = true;\n      self.locked = true;\n      return self.hideRail().hideRailHr();\n    };\n\n    this.toggle = function () {\n      return self.hidden ? self.show() : self.hide();\n    };\n\n    this.remove = function () {\n      self.stop();\n      if (self.cursortimeout) clearTimeout(self.cursortimeout);\n      self.doZoomOut();\n      self.unbindAll();\n      if (cap.isie9) self.win[0].detachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\n\n      if (self.observer !== false) self.observer.disconnect();\n      if (self.observerremover !== false) self.observerremover.disconnect();\n      self.events = null;\n\n      if (self.cursor) {\n        self.cursor.remove();\n      }\n\n      if (self.cursorh) {\n        self.cursorh.remove();\n      }\n\n      if (self.rail) {\n        self.rail.remove();\n      }\n\n      if (self.railh) {\n        self.railh.remove();\n      }\n\n      if (self.zoom) {\n        self.zoom.remove();\n      }\n\n      for (var a = 0; a < self.saved.css.length; a++) {\n        var d = self.saved.css[a];\n        d[0].css(d[1], typeof d[2] == \"undefined\" ? '' : d[2]);\n      }\n\n      self.saved = false;\n      self.me.data('__nicescroll', ''); //erase all traces\n      // memory leak fixed by GianlucaGuarini - thanks a lot!\n      // remove the current nicescroll from the $.nicescroll array & normalize array\n\n      var lst = $.nicescroll;\n      lst.each(function (i) {\n        if (!this) return;\n\n        if (this.id === self.id) {\n          delete lst[i];\n\n          for (var b = ++i; b < lst.length; b++, i++) lst[i] = lst[b];\n\n          lst.length--;\n          if (lst.length) delete lst[lst.length];\n        }\n      });\n\n      for (var i in self) {\n        self[i] = null;\n        delete self[i];\n      }\n\n      self = null;\n    };\n\n    this.scrollstart = function (fn) {\n      this.onscrollstart = fn;\n      return self;\n    };\n\n    this.scrollend = function (fn) {\n      this.onscrollend = fn;\n      return self;\n    };\n\n    this.scrollcancel = function (fn) {\n      this.onscrollcancel = fn;\n      return self;\n    };\n\n    this.zoomin = function (fn) {\n      this.onzoomin = fn;\n      return self;\n    };\n\n    this.zoomout = function (fn) {\n      this.onzoomout = fn;\n      return self;\n    };\n\n    this.isScrollable = function (e) {\n      var dom = e.target ? e.target : e;\n      if (dom.nodeName == 'OPTION') return true;\n\n      while (dom && dom.nodeType == 1 && !/BODY|HTML/.test(dom.nodeName)) {\n        var dd = $(dom);\n        var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\n        if (/scroll|auto/.test(ov)) return dom.clientHeight != dom.scrollHeight;\n        dom = dom.parentNode ? dom.parentNode : false;\n      }\n\n      return false;\n    };\n\n    this.getViewport = function (me) {\n      var dom = me && me.parentNode ? me.parentNode : false;\n\n      while (dom && dom.nodeType == 1 && !/BODY|HTML/.test(dom.nodeName)) {\n        var dd = $(dom);\n        var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\n        if (/scroll|auto/.test(ov) && dom.clientHeight != dom.scrollHeight) return dd;\n        if (dd.getNiceScroll().length > 0) return dd;\n        dom = dom.parentNode ? dom.parentNode : false;\n      }\n\n      return false;\n    };\n\n    function execScrollWheel(e, hr, chkscroll) {\n      var px, py;\n      var rt = 1;\n\n      if (e.deltaMode == 0) {\n        // PIXEL\n        px = -Math.floor(e.deltaX * (self.opt.mousescrollstep / (18 * 3)));\n        py = -Math.floor(e.deltaY * (self.opt.mousescrollstep / (18 * 3)));\n      } else if (e.deltaMode == 1) {\n        // LINE\n        px = -Math.floor(e.deltaX * self.opt.mousescrollstep);\n        py = -Math.floor(e.deltaY * self.opt.mousescrollstep);\n      }\n\n      if (hr && self.opt.oneaxismousemode && px == 0 && py) {\n        // classic vertical-only mousewheel + browser with x/y support\n        px = py;\n        py = 0;\n      }\n\n      if (px) {\n        if (self.scrollmom) {\n          self.scrollmom.stop();\n        }\n\n        self.lastdeltax += px;\n        self.debounced(\"mousewheelx\", function () {\n          var dt = self.lastdeltax;\n          self.lastdeltax = 0;\n\n          if (!self.rail.drag) {\n            self.doScrollLeftBy(dt);\n          }\n        }, 120);\n      }\n\n      if (py) {\n        if (self.opt.nativeparentscrolling && chkscroll && !self.ispage && !self.zoomactive) {\n          if (py < 0) {\n            if (self.getScrollTop() >= self.page.maxh) return true;\n          } else {\n            if (self.getScrollTop() <= 0) return true;\n          }\n        }\n\n        if (self.scrollmom) {\n          self.scrollmom.stop();\n        }\n\n        self.lastdeltay += py;\n        self.debounced(\"mousewheely\", function () {\n          var dt = self.lastdeltay;\n          self.lastdeltay = 0;\n\n          if (!self.rail.drag) {\n            self.doScrollBy(dt);\n          }\n        }, 120);\n      }\n\n      e.stopImmediatePropagation();\n      return e.preventDefault(); //      return self.cancelEvent(e);\n    }\n\n    ;\n\n    this.onmousewheel = function (e) {\n      if (self.locked) {\n        self.debounced(\"checkunlock\", self.resize, 250);\n        return true;\n      }\n\n      if (self.rail.drag) return self.cancelEvent(e);\n      if (self.opt.oneaxismousemode == \"auto\" && e.deltaX != 0) self.opt.oneaxismousemode = false; // check two-axis mouse support (not very elegant)\n\n      if (self.opt.oneaxismousemode && e.deltaX == 0) {\n        if (!self.rail.scrollable) {\n          if (self.railh && self.railh.scrollable) {\n            return self.onmousewheelhr(e);\n          } else {\n            return true;\n          }\n        }\n      }\n\n      var nw = +new Date();\n      var chk = false;\n\n      if (self.opt.preservenativescrolling && self.checkarea + 600 < nw) {\n        //        self.checkarea = false;\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n      //      if (self.locked) return self.cancelEvent(e);\n\n      var ret = execScrollWheel(e, false, chk);\n      if (ret) self.checkarea = 0;\n      return ret;\n    };\n\n    this.onmousewheelhr = function (e) {\n      if (self.locked || !self.railh.scrollable) return true;\n      if (self.rail.drag) return self.cancelEvent(e);\n      var nw = +new Date();\n      var chk = false;\n\n      if (self.opt.preservenativescrolling && self.checkarea + 600 < nw) {\n        //        self.checkarea = false;\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n\n      if (self.locked) return self.cancelEvent(e);\n      return execScrollWheel(e, true, chk);\n    };\n\n    this.stop = function () {\n      self.cancelScroll();\n      if (self.scrollmon) self.scrollmon.stop();\n      self.cursorfreezed = false;\n      self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n      self.noticeCursor();\n      return self;\n    };\n\n    this.getTransitionSpeed = function (dif) {\n      var sp = Math.round(self.opt.scrollspeed * 10);\n      var ex = Math.min(sp, Math.round(dif / 20 * self.opt.scrollspeed));\n      return ex > 20 ? ex : 0;\n    };\n\n    if (!self.opt.smoothscroll) {\n      this.doScrollLeft = function (x, spd) {\n        //direct\n        var y = self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollTop = function (y, spd) {\n        //direct\n        var x = self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollPos = function (x, y, spd) {\n        //direct\n        var nx = x > self.page.maxw ? self.page.maxw : x;\n        if (nx < 0) nx = 0;\n        var ny = y > self.page.maxh ? self.page.maxh : y;\n        if (ny < 0) ny = 0;\n        self.synched('scroll', function () {\n          self.setScrollTop(ny);\n          self.setScrollLeft(nx);\n        });\n      };\n\n      this.cancelScroll = function () {}; // direct\n\n    } else if (self.ishwscroll && cap.hastransition && self.opt.usetransition) {\n      this.prepareTransition = function (dif, istime) {\n        var ex = istime ? dif > 20 ? dif : 0 : self.getTransitionSpeed(dif);\n        var trans = ex ? cap.prefixstyle + 'transform ' + ex + 'ms ease-out' : '';\n\n        if (!self.lasttransitionstyle || self.lasttransitionstyle != trans) {\n          self.lasttransitionstyle = trans;\n          self.doc.css(cap.transitionstyle, trans);\n        }\n\n        return ex;\n      };\n\n      this.doScrollLeft = function (x, spd) {\n        //trans\n        var y = self.scrollrunning ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollTop = function (y, spd) {\n        //trans\n        var x = self.scrollrunning ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollPos = function (x, y, spd) {\n        //trans\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        if ((self.newscrolly - py) * (y - py) < 0 || (self.newscrollx - px) * (x - px) < 0) self.cancelScroll(); //inverted movement detection\n\n        if (self.opt.bouncescroll == false) {\n          if (y < 0) y = 0;else if (y > self.page.maxh) y = self.page.maxh;\n          if (x < 0) x = 0;else if (x > self.page.maxw) x = self.page.maxw;\n        }\n\n        if (self.scrollrunning && x == self.newscrollx && y == self.newscrolly) return false;\n        self.newscrolly = y;\n        self.newscrollx = x;\n        self.newscrollspeed = spd || false;\n        if (self.timer) return false;\n        self.timer = setTimeout(function () {\n          var top = self.getScrollTop();\n          var lft = self.getScrollLeft();\n          var dst = {};\n          dst.x = x - lft;\n          dst.y = y - top;\n          dst.px = lft;\n          dst.py = top;\n          var dd = Math.round(Math.sqrt(Math.pow(dst.x, 2) + Math.pow(dst.y, 2))); //          var df = (self.newscrollspeed) ? self.newscrollspeed : dd;\n\n          var ms = self.newscrollspeed && self.newscrollspeed > 1 ? self.newscrollspeed : self.getTransitionSpeed(dd);\n          if (self.newscrollspeed && self.newscrollspeed <= 1) ms *= self.newscrollspeed;\n          self.prepareTransition(ms, true);\n          if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n\n          if (ms > 0) {\n            if (!self.scrollrunning && self.onscrollstart) {\n              var info = {\n                \"type\": \"scrollstart\",\n                \"current\": {\n                  \"x\": lft,\n                  \"y\": top\n                },\n                \"request\": {\n                  \"x\": x,\n                  \"y\": y\n                },\n                \"end\": {\n                  \"x\": self.newscrollx,\n                  \"y\": self.newscrolly\n                },\n                \"speed\": ms\n              };\n              self.onscrollstart.call(self, info);\n            }\n\n            if (cap.transitionend) {\n              if (!self.scrollendtrapped) {\n                self.scrollendtrapped = true;\n                self.bind(self.doc, cap.transitionend, self.onScrollEnd, false); //I have got to do something usefull!!\n              }\n            } else {\n              if (self.scrollendtrapped) clearTimeout(self.scrollendtrapped);\n              self.scrollendtrapped = setTimeout(self.onScrollEnd, ms); // simulate transitionend event\n            }\n\n            var py = top;\n            var px = lft;\n            self.timerscroll = {\n              bz: new BezierClass(py, self.newscrolly, ms, 0, 0, 0.58, 1),\n              bh: new BezierClass(px, self.newscrollx, ms, 0, 0, 0.58, 1)\n            };\n            if (!self.cursorfreezed) self.timerscroll.tm = setInterval(function () {\n              self.showCursor(self.getScrollTop(), self.getScrollLeft());\n            }, 60);\n          }\n\n          self.synched(\"doScroll-set\", function () {\n            self.timer = 0;\n            if (self.scrollendtrapped) self.scrollrunning = true;\n            self.setScrollTop(self.newscrolly);\n            self.setScrollLeft(self.newscrollx);\n            if (!self.scrollendtrapped) self.onScrollEnd();\n          });\n        }, 50);\n      };\n\n      this.cancelScroll = function () {\n        if (!self.scrollendtrapped) return true;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.scrollrunning = false;\n        if (!cap.transitionend) clearTimeout(cap.transitionend);\n        self.scrollendtrapped = false;\n\n        self._unbind(self.doc, cap.transitionend, self.onScrollEnd);\n\n        self.prepareTransition(0);\n        self.setScrollTop(py); // fire event onscroll\n\n        if (self.railh) self.setScrollLeft(px);\n        if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n        self.cursorfreezed = false; //self.noticeCursor(false,py,px);\n\n        self.showCursor(py, px);\n        return self;\n      };\n\n      this.onScrollEnd = function () {\n        if (self.scrollendtrapped) self._unbind(self.doc, cap.transitionend, self.onScrollEnd);\n        self.scrollendtrapped = false;\n        self.prepareTransition(0);\n        if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.setScrollTop(py); // fire event onscroll\n\n        if (self.railh) self.setScrollLeft(px); // fire event onscroll left\n\n        self.noticeCursor(false, py, px);\n        self.cursorfreezed = false;\n        if (py < 0) py = 0;else if (py > self.page.maxh) py = self.page.maxh;\n        if (px < 0) px = 0;else if (px > self.page.maxw) px = self.page.maxw;\n        if (py != self.newscrolly || px != self.newscrollx) return self.doScrollPos(px, py, self.opt.snapbackspeed);\n\n        if (self.onscrollend && self.scrollrunning) {\n          var info = {\n            \"type\": \"scrollend\",\n            \"current\": {\n              \"x\": px,\n              \"y\": py\n            },\n            \"end\": {\n              \"x\": self.newscrollx,\n              \"y\": self.newscrolly\n            }\n          };\n          self.onscrollend.call(self, info);\n        }\n\n        self.scrollrunning = false;\n      };\n    } else {\n      this.doScrollLeft = function (x, spd) {\n        //no-trans\n        var y = self.scrollrunning ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollTop = function (y, spd) {\n        //no-trans\n        var x = self.scrollrunning ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x, y, spd);\n      };\n\n      this.doScrollPos = function (x, y, spd) {\n        //no-trans\n        var y = typeof y == \"undefined\" || y === false ? self.getScrollTop(true) : y;\n        if (self.timer && self.newscrolly == y && self.newscrollx == x) return true;\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        if ((self.newscrolly - py) * (y - py) < 0 || (self.newscrollx - px) * (x - px) < 0) self.cancelScroll(); //inverted movement detection\n\n        self.newscrolly = y;\n        self.newscrollx = x;\n\n        if (!self.bouncescroll || !self.rail.visibility) {\n          if (self.newscrolly < 0) {\n            self.newscrolly = 0;\n          } else if (self.newscrolly > self.page.maxh) {\n            self.newscrolly = self.page.maxh;\n          }\n        }\n\n        if (!self.bouncescroll || !self.railh.visibility) {\n          if (self.newscrollx < 0) {\n            self.newscrollx = 0;\n          } else if (self.newscrollx > self.page.maxw) {\n            self.newscrollx = self.page.maxw;\n          }\n        }\n\n        self.dst = {};\n        self.dst.x = x - px;\n        self.dst.y = y - py;\n        self.dst.px = px;\n        self.dst.py = py;\n        var dst = Math.round(Math.sqrt(Math.pow(self.dst.x, 2) + Math.pow(self.dst.y, 2)));\n        self.dst.ax = self.dst.x / dst;\n        self.dst.ay = self.dst.y / dst;\n        var pa = 0;\n        var pe = dst;\n\n        if (self.dst.x == 0) {\n          pa = py;\n          pe = y;\n          self.dst.ay = 1;\n          self.dst.py = 0;\n        } else if (self.dst.y == 0) {\n          pa = px;\n          pe = x;\n          self.dst.ax = 1;\n          self.dst.px = 0;\n        }\n\n        var ms = self.getTransitionSpeed(dst);\n        if (spd && spd <= 1) ms *= spd;\n\n        if (ms > 0) {\n          self.bzscroll = self.bzscroll ? self.bzscroll.update(pe, ms) : new BezierClass(pa, pe, ms, 0, 1, 0, 1);\n        } else {\n          self.bzscroll = false;\n        }\n\n        if (self.timer) return;\n        if (py == self.page.maxh && y >= self.page.maxh || px == self.page.maxw && x >= self.page.maxw) self.checkContentSize();\n        var sync = 1;\n\n        function scrolling() {\n          if (self.cancelAnimationFrame) return true;\n          self.scrollrunning = true;\n          sync = 1 - sync;\n          if (sync) return self.timer = setAnimationFrame(scrolling) || 1;\n          var done = 0;\n          var sc = sy = self.getScrollTop();\n\n          if (self.dst.ay) {\n            sc = self.bzscroll ? self.dst.py + self.bzscroll.getNow() * self.dst.ay : self.newscrolly;\n            var dr = sc - sy;\n            if (dr < 0 && sc < self.newscrolly || dr > 0 && sc > self.newscrolly) sc = self.newscrolly;\n            self.setScrollTop(sc);\n            if (sc == self.newscrolly) done = 1;\n          } else {\n            done = 1;\n          }\n\n          var scx = sx = self.getScrollLeft();\n\n          if (self.dst.ax) {\n            scx = self.bzscroll ? self.dst.px + self.bzscroll.getNow() * self.dst.ax : self.newscrollx;\n            var dr = scx - sx;\n            if (dr < 0 && scx < self.newscrollx || dr > 0 && scx > self.newscrollx) scx = self.newscrollx;\n            self.setScrollLeft(scx);\n            if (scx == self.newscrollx) done += 1;\n          } else {\n            done += 1;\n          }\n\n          if (done == 2) {\n            self.timer = 0;\n            self.cursorfreezed = false;\n            self.bzscroll = false;\n            self.scrollrunning = false;\n            if (sc < 0) sc = 0;else if (sc > self.page.maxh) sc = self.page.maxh;\n            if (scx < 0) scx = 0;else if (scx > self.page.maxw) scx = self.page.maxw;\n            if (scx != self.newscrollx || sc != self.newscrolly) self.doScrollPos(scx, sc);else {\n              if (self.onscrollend) {\n                var info = {\n                  \"type\": \"scrollend\",\n                  \"current\": {\n                    \"x\": sx,\n                    \"y\": sy\n                  },\n                  \"end\": {\n                    \"x\": self.newscrollx,\n                    \"y\": self.newscrolly\n                  }\n                };\n                self.onscrollend.call(self, info);\n              }\n            }\n          } else {\n            self.timer = setAnimationFrame(scrolling) || 1;\n          }\n        }\n\n        ;\n        self.cancelAnimationFrame = false;\n        self.timer = 1;\n\n        if (self.onscrollstart && !self.scrollrunning) {\n          var info = {\n            \"type\": \"scrollstart\",\n            \"current\": {\n              \"x\": px,\n              \"y\": py\n            },\n            \"request\": {\n              \"x\": x,\n              \"y\": y\n            },\n            \"end\": {\n              \"x\": self.newscrollx,\n              \"y\": self.newscrolly\n            },\n            \"speed\": ms\n          };\n          self.onscrollstart.call(self, info);\n        }\n\n        scrolling();\n        if (py == self.page.maxh && y >= py || px == self.page.maxw && x >= px) self.checkContentSize();\n        self.noticeCursor();\n      };\n\n      this.cancelScroll = function () {\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n        self.bzscroll = false;\n        self.scrollrunning = false;\n        return self;\n      };\n    }\n\n    this.doScrollBy = function (stp, relative) {\n      var ny = 0;\n\n      if (relative) {\n        ny = Math.floor((self.scroll.y - stp) * self.scrollratio.y);\n      } else {\n        var sy = self.timer ? self.newscrolly : self.getScrollTop(true);\n        ny = sy - stp;\n      }\n\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.h / 2);\n        if (ny < -haf) ny = -haf;else if (ny > self.page.maxh + haf) ny = self.page.maxh + haf;\n      }\n\n      self.cursorfreezed = false;\n      py = self.getScrollTop(true);\n      if (ny < 0 && py <= 0) return self.noticeCursor();else if (ny > self.page.maxh && py >= self.page.maxh) {\n        self.checkContentSize();\n        return self.noticeCursor();\n      }\n      self.doScrollTop(ny);\n    };\n\n    this.doScrollLeftBy = function (stp, relative) {\n      var nx = 0;\n\n      if (relative) {\n        nx = Math.floor((self.scroll.x - stp) * self.scrollratio.x);\n      } else {\n        var sx = self.timer ? self.newscrollx : self.getScrollLeft(true);\n        nx = sx - stp;\n      }\n\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.w / 2);\n        if (nx < -haf) nx = -haf;else if (nx > self.page.maxw + haf) nx = self.page.maxw + haf;\n      }\n\n      self.cursorfreezed = false;\n      px = self.getScrollLeft(true);\n      if (nx < 0 && px <= 0) return self.noticeCursor();else if (nx > self.page.maxw && px >= self.page.maxw) return self.noticeCursor();\n      self.doScrollLeft(nx);\n    };\n\n    this.doScrollTo = function (pos, relative) {\n      var ny = relative ? Math.round(pos * self.scrollratio.y) : pos;\n      if (ny < 0) ny = 0;else if (ny > self.page.maxh) ny = self.page.maxh;\n      self.cursorfreezed = false;\n      self.doScrollTop(pos);\n    };\n\n    this.checkContentSize = function () {\n      var pg = self.getContentSize();\n      if (pg.h != self.page.h || pg.w != self.page.w) self.resize(false, pg);\n    };\n\n    self.onscroll = function (e) {\n      if (self.rail.drag) return;\n\n      if (!self.cursorfreezed) {\n        self.synched('scroll', function () {\n          self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\n          if (self.railh) self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\n          self.noticeCursor();\n        });\n      }\n    };\n\n    self.bind(self.docscroll, \"scroll\", self.onscroll);\n\n    this.doZoomIn = function (e) {\n      if (self.zoomactive) return;\n      self.zoomactive = true;\n      self.zoomrestore = {\n        style: {}\n      };\n      var lst = ['position', 'top', 'left', 'zIndex', 'backgroundColor', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight'];\n      var win = self.win[0].style;\n\n      for (var a in lst) {\n        var pp = lst[a];\n        self.zoomrestore.style[pp] = typeof win[pp] != \"undefined\" ? win[pp] : '';\n      }\n\n      self.zoomrestore.style.width = self.win.css('width');\n      self.zoomrestore.style.height = self.win.css('height');\n      self.zoomrestore.padding = {\n        w: self.win.outerWidth() - self.win.width(),\n        h: self.win.outerHeight() - self.win.height()\n      };\n\n      if (cap.isios4) {\n        self.zoomrestore.scrollTop = $(window).scrollTop();\n        $(window).scrollTop(0);\n      }\n\n      self.win.css({\n        \"position\": cap.isios4 ? \"absolute\" : \"fixed\",\n        \"top\": 0,\n        \"left\": 0,\n        \"z-index\": globalmaxzindex + 100,\n        \"margin\": \"0px\"\n      });\n      var bkg = self.win.css(\"backgroundColor\");\n      if (bkg == \"\" || /transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(bkg)) self.win.css(\"backgroundColor\", \"#fff\");\n      self.rail.css({\n        \"z-index\": globalmaxzindex + 101\n      });\n      self.zoom.css({\n        \"z-index\": globalmaxzindex + 102\n      });\n      self.zoom.css('backgroundPosition', '0px -18px');\n      self.resizeZoom();\n      if (self.onzoomin) self.onzoomin.call(self);\n      return self.cancelEvent(e);\n    };\n\n    this.doZoomOut = function (e) {\n      if (!self.zoomactive) return;\n      self.zoomactive = false;\n      self.win.css(\"margin\", \"\");\n      self.win.css(self.zoomrestore.style);\n\n      if (cap.isios4) {\n        $(window).scrollTop(self.zoomrestore.scrollTop);\n      }\n\n      self.rail.css({\n        \"z-index\": self.zindex\n      });\n      self.zoom.css({\n        \"z-index\": self.zindex\n      });\n      self.zoomrestore = false;\n      self.zoom.css('backgroundPosition', '0px 0px');\n      self.onResize();\n      if (self.onzoomout) self.onzoomout.call(self);\n      return self.cancelEvent(e);\n    };\n\n    this.doZoom = function (e) {\n      return self.zoomactive ? self.doZoomOut(e) : self.doZoomIn(e);\n    };\n\n    this.resizeZoom = function () {\n      if (!self.zoomactive) return;\n      var py = self.getScrollTop(); //preserve scrolling position\n\n      self.win.css({\n        width: $(window).width() - self.zoomrestore.padding.w + \"px\",\n        height: $(window).height() - self.zoomrestore.padding.h + \"px\"\n      });\n      self.onResize();\n      self.setScrollTop(Math.min(self.page.maxh, py));\n    };\n\n    this.init();\n    $.nicescroll.push(this);\n  }; // Inspired by the work of Kin Blas\n  // http://webpro.host.adobe.com/people/jblas/momentum/includes/jquery.momentum.0.7.js\n\n\n  var ScrollMomentumClass2D = function (nc) {\n    var self = this;\n    this.nc = nc;\n    this.lastx = 0;\n    this.lasty = 0;\n    this.speedx = 0;\n    this.speedy = 0;\n    this.lasttime = 0;\n    this.steptime = 0;\n    this.snapx = false;\n    this.snapy = false;\n    this.demulx = 0;\n    this.demuly = 0;\n    this.lastscrollx = -1;\n    this.lastscrolly = -1;\n    this.chkx = 0;\n    this.chky = 0;\n    this.timer = 0;\n\n    this.time = function () {\n      return +new Date(); //beautifull hack\n    };\n\n    this.reset = function (px, py) {\n      self.stop();\n      var now = self.time();\n      self.steptime = 0;\n      self.lasttime = now;\n      self.speedx = 0;\n      self.speedy = 0;\n      self.lastx = px;\n      self.lasty = py;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.update = function (px, py) {\n      var now = self.time();\n      self.steptime = now - self.lasttime;\n      self.lasttime = now;\n      var dy = py - self.lasty;\n      var dx = px - self.lastx;\n      var sy = self.nc.getScrollTop();\n      var sx = self.nc.getScrollLeft();\n      var newy = sy + dy;\n      var newx = sx + dx;\n      self.snapx = newx < 0 || newx > self.nc.page.maxw;\n      self.snapy = newy < 0 || newy > self.nc.page.maxh;\n      self.speedx = dx;\n      self.speedy = dy;\n      self.lastx = px;\n      self.lasty = py;\n    };\n\n    this.stop = function () {\n      self.nc.unsynched(\"domomentum2d\");\n      if (self.timer) clearTimeout(self.timer);\n      self.timer = 0;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.doSnapy = function (nx, ny) {\n      var snap = false;\n\n      if (ny < 0) {\n        ny = 0;\n        snap = true;\n      } else if (ny > self.nc.page.maxh) {\n        ny = self.nc.page.maxh;\n        snap = true;\n      }\n\n      if (nx < 0) {\n        nx = 0;\n        snap = true;\n      } else if (nx > self.nc.page.maxw) {\n        nx = self.nc.page.maxw;\n        snap = true;\n      }\n\n      if (snap) self.nc.doScrollPos(nx, ny, self.nc.opt.snapbackspeed);\n    };\n\n    this.doMomentum = function (gp) {\n      var t = self.time();\n      var l = gp ? t + gp : self.lasttime;\n      var sl = self.nc.getScrollLeft();\n      var st = self.nc.getScrollTop();\n      var pageh = self.nc.page.maxh;\n      var pagew = self.nc.page.maxw;\n      self.speedx = pagew > 0 ? Math.min(60, self.speedx) : 0;\n      self.speedy = pageh > 0 ? Math.min(60, self.speedy) : 0;\n      var chk = l && t - l <= 60;\n      if (st < 0 || st > pageh || sl < 0 || sl > pagew) chk = false;\n      var sy = self.speedy && chk ? self.speedy : false;\n      var sx = self.speedx && chk ? self.speedx : false;\n\n      if (sy || sx) {\n        var tm = Math.max(16, self.steptime); //timeout granularity\n\n        if (tm > 50) {\n          // do smooth\n          var xm = tm / 50;\n          self.speedx *= xm;\n          self.speedy *= xm;\n          tm = 50;\n        }\n\n        self.demulxy = 0;\n        self.lastscrollx = self.nc.getScrollLeft();\n        self.chkx = self.lastscrollx;\n        self.lastscrolly = self.nc.getScrollTop();\n        self.chky = self.lastscrolly;\n        var nx = self.lastscrollx;\n        var ny = self.lastscrolly;\n\n        var onscroll = function () {\n          var df = self.time() - t > 600 ? 0.04 : 0.02;\n\n          if (self.speedx) {\n            nx = Math.floor(self.lastscrollx - self.speedx * (1 - self.demulxy));\n            self.lastscrollx = nx;\n            if (nx < 0 || nx > pagew) df = 0.10;\n          }\n\n          if (self.speedy) {\n            ny = Math.floor(self.lastscrolly - self.speedy * (1 - self.demulxy));\n            self.lastscrolly = ny;\n            if (ny < 0 || ny > pageh) df = 0.10;\n          }\n\n          self.demulxy = Math.min(1, self.demulxy + df);\n          self.nc.synched(\"domomentum2d\", function () {\n            if (self.speedx) {\n              var scx = self.nc.getScrollLeft();\n              if (scx != self.chkx) self.stop();\n              self.chkx = nx;\n              self.nc.setScrollLeft(nx);\n            }\n\n            if (self.speedy) {\n              var scy = self.nc.getScrollTop();\n              if (scy != self.chky) self.stop();\n              self.chky = ny;\n              self.nc.setScrollTop(ny);\n            }\n\n            if (!self.timer) {\n              self.nc.hideCursor();\n              self.doSnapy(nx, ny);\n            }\n          });\n\n          if (self.demulxy < 1) {\n            self.timer = setTimeout(onscroll, tm);\n          } else {\n            self.stop();\n            self.nc.hideCursor();\n            self.doSnapy(nx, ny);\n          }\n        };\n\n        onscroll();\n      } else {\n        self.doSnapy(self.nc.getScrollLeft(), self.nc.getScrollTop());\n      }\n    };\n  }; // override jQuery scrollTop\n\n\n  var _scrollTop = jQuery.fn.scrollTop; // preserve original function\n\n  jQuery.cssHooks[\"pageYOffset\"] = {\n    get: function (elem, computed, extra) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      return nice && nice.ishwscroll ? nice.getScrollTop() : _scrollTop.call(elem);\n    },\n    set: function (elem, value) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      nice && nice.ishwscroll ? nice.setScrollTop(parseInt(value)) : _scrollTop.call(elem, value);\n      return this;\n    }\n  };\n  /*\n    $.fx.step[\"scrollTop\"] = function(fx){\n      $.cssHooks[\"scrollTop\"].set( fx.elem, fx.now + fx.unit );\n    };\n  */\n\n  jQuery.fn.scrollTop = function (value) {\n    if (typeof value == \"undefined\") {\n      var nice = this[0] ? $.data(this[0], '__nicescroll') || false : false;\n      return nice && nice.ishwscroll ? nice.getScrollTop() : _scrollTop.call(this);\n    } else {\n      return this.each(function () {\n        var nice = $.data(this, '__nicescroll') || false;\n        nice && nice.ishwscroll ? nice.setScrollTop(parseInt(value)) : _scrollTop.call($(this), value);\n      });\n    }\n  }; // override jQuery scrollLeft\n\n\n  var _scrollLeft = jQuery.fn.scrollLeft; // preserve original function\n\n  $.cssHooks.pageXOffset = {\n    get: function (elem, computed, extra) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      return nice && nice.ishwscroll ? nice.getScrollLeft() : _scrollLeft.call(elem);\n    },\n    set: function (elem, value) {\n      var nice = $.data(elem, '__nicescroll') || false;\n      nice && nice.ishwscroll ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call(elem, value);\n      return this;\n    }\n  };\n  /*\n    $.fx.step[\"scrollLeft\"] = function(fx){\n      $.cssHooks[\"scrollLeft\"].set( fx.elem, fx.now + fx.unit );\n    };\n  */\n\n  jQuery.fn.scrollLeft = function (value) {\n    if (typeof value == \"undefined\") {\n      var nice = this[0] ? $.data(this[0], '__nicescroll') || false : false;\n      return nice && nice.ishwscroll ? nice.getScrollLeft() : _scrollLeft.call(this);\n    } else {\n      return this.each(function () {\n        var nice = $.data(this, '__nicescroll') || false;\n        nice && nice.ishwscroll ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call($(this), value);\n      });\n    }\n  };\n\n  var NiceScrollArray = function (doms) {\n    var self = this;\n    this.length = 0;\n    this.name = \"nicescrollarray\";\n\n    this.each = function (fn) {\n      for (var a = 0, i = 0; a < self.length; a++) fn.call(self[a], i++);\n\n      return self;\n    };\n\n    this.push = function (nice) {\n      self[self.length] = nice;\n      self.length++;\n    };\n\n    this.eq = function (idx) {\n      return self[idx];\n    };\n\n    if (doms) {\n      for (a = 0; a < doms.length; a++) {\n        var nice = $.data(doms[a], '__nicescroll') || false;\n\n        if (nice) {\n          this[this.length] = nice;\n          this.length++;\n        }\n      }\n\n      ;\n    }\n\n    return this;\n  };\n\n  function mplex(el, lst, fn) {\n    for (var a = 0; a < lst.length; a++) fn(el, lst[a]);\n  }\n\n  ;\n  mplex(NiceScrollArray.prototype, ['show', 'hide', 'toggle', 'onResize', 'resize', 'remove', 'stop', 'doScrollPos'], function (e, n) {\n    e[n] = function () {\n      var args = arguments;\n      return this.each(function () {\n        this[n].apply(this, args);\n      });\n    };\n  });\n\n  jQuery.fn.getNiceScroll = function (index) {\n    if (typeof index == \"undefined\") {\n      return new NiceScrollArray(this);\n    } else {\n      var nice = this[index] && $.data(this[index], '__nicescroll') || false;\n      return nice;\n    }\n  };\n\n  jQuery.extend(jQuery.expr[':'], {\n    nicescroll: function (a) {\n      return $.data(a, '__nicescroll') ? true : false;\n    }\n  });\n\n  $.fn.niceScroll = function (wrapper, opt) {\n    if (typeof opt == \"undefined\") {\n      if (typeof wrapper == \"object\" && !(\"jquery\" in wrapper)) {\n        opt = wrapper;\n        wrapper = false;\n      }\n    }\n\n    var ret = new NiceScrollArray();\n    if (typeof opt == \"undefined\") opt = {};\n\n    if (wrapper || false) {\n      opt.doc = $(wrapper);\n      opt.win = $(this);\n    }\n\n    var docundef = !(\"doc\" in opt);\n    if (!docundef && !(\"win\" in opt)) opt.win = $(this);\n    this.each(function () {\n      var nice = $(this).data('__nicescroll') || false;\n\n      if (!nice) {\n        opt.doc = docundef ? $(this) : opt.doc;\n        nice = new NiceScrollClass(opt, $(this));\n        $(this).data('__nicescroll', nice);\n      }\n\n      ret.push(nice);\n    });\n    return ret.length == 1 ? ret[0] : ret;\n  };\n\n  window.NiceScroll = {\n    getjQuery: function () {\n      return jQuery;\n    }\n  };\n\n  if (!$.nicescroll) {\n    $.nicescroll = new NiceScrollArray();\n    $.nicescroll.options = _globaloptions;\n  }\n})(jQuery);","map":{"version":3,"sources":["/Users/thanh.nguyen/Documents/ThanhNguyen/React/web/taichinhso24h/src/access/niceScroll.js"],"names":["jQuery","domfocus","mousefocus","zoomactive","tabindexcounter","ascrailcounter","globalmaxzindex","$","getScriptPath","scripts","document","getElementsByTagName","path","length","src","split","slice","join","scriptpath","vendors","setAnimationFrame","window","requestAnimationFrame","clearAnimationFrame","cancelAnimationFrame","vx","v","clsMutationObserver","MutationObserver","WebKitMutationObserver","_globaloptions","zindex","cursoropacitymin","cursoropacitymax","cursorcolor","cursorwidth","cursorborder","cursorborderradius","scrollspeed","mousescrollstep","touchbehavior","hwacceleration","usetransition","boxzoom","dblclickzoom","gesturezoom","grabcursorenabled","autohidemode","background","iframeautoresize","cursorminheight","preservenativescrolling","railoffset","bouncescroll","spacebarenabled","railpadding","top","right","left","bottom","disableoutline","horizrailenabled","railalign","railvalign","enabletranslate3d","enablemousewheel","enablekeyboard","smoothscroll","sensitiverail","enablemouselockapi","cursorfixedheight","directionlockdeadzone","hidecursordelay","nativeparentscrolling","enablescrollonselection","overflowx","overflowy","cursordragspeed","rtlmode","cursordragontouch","oneaxismousemode","browserdetected","getBrowserDetection","domtest","createElement","d","haspointerlock","isopera","isopera12","navigator","isoperamini","Object","prototype","toString","call","operamini","isie","isieold","style","isie7","documentMode","isie8","isie9","isie10","isie9mobile","test","userAgent","isie7mobile","ismozilla","iswebkit","ischrome","ischrome22","ischrome26","cantouch","documentElement","hasmstouch","msPointerEnabled","ismac","platform","isios","isios4","isandroid","trstyle","hastransform","hastranslate3d","transitionstyle","hastransition","transitionend","check","a","prefixstyle","prefix","evs","detectCursorGrab","lst","p","cursorgrabvalue","hasmousecapture","hasMutationObserver","NiceScrollClass","myopt","me","self","version","name","opt","doc","win","extend","snapbackspeed","iddoc","id","ispage","nodeName","haswrapper","docscroll","body","viewport","isfixed","iframe","isiframe","istextarea","forcescreen","canshowonmouseevent","onmousedown","onmouseup","onmousemove","onmousewheel","onkeypress","ongesturezoom","onclick","onscrollstart","onscrollend","onscrollcancel","onzoomin","onzoomout","view","page","scroll","x","y","scrollratio","cursorheight","scrollvaluemax","checkrtlmode","scrollrunning","scrollmom","observer","observerremover","getElementById","rail","cursor","cursorfreezed","selectiondrag","zoom","hasfocus","hasmousefocus","visibility","locked","hidden","cursoractive","nativescrollingarea","checkarea","events","saved","delaylist","synclist","lastdeltax","lastdeltay","detected","cap","canhwscroll","ishwscroll","istouchcapable","delayed","fn","tm","lazy","dd","nw","Date","getTime","tt","clearTimeout","last","setTimeout","debounced","synched","requestSync","onsync","unsynched","css","el","pars","n","push","scrollTop","val","getScrollTop","setScrollTop","scrollLeft","getScrollLeft","setScrollLeft","BezierClass","st","ed","spd","p1","p2","p3","p4","ts","df","B2","t","B3","B4","getNow","pc","bz","Math","round","update","translate","tx","ty","getMatrixValues","tr","substr","replace","mtx","timerscroll","bh","createEvent","notifyScrollEvent","e","initUIEvent","dispatchEvent","fireEvent","createEventObject","cancelBubble","add","silent","getTarget","target","srcElement","hasParent","parentNode","getZIndex","dom","zIndex","nodeType","zi","isNaN","parseInt","parent","_convertBorderWidth","getWidthToPixel","prop","chkheight","wd","px","parseFloat","brd","outerHeight","innerHeight","outerWidth","innerWidth","getOffset","offset","ww","vp","updateScrollBar","len","height","railh","width","wpos","pos","align","off","h","doRailClick","dbl","hr","pg","cur","cancelEvent","doScrollLeft","doScrollTop","pageX","pageY","doScrollLeftBy","doScrollBy","w","hasanimationframe","hascancelanimationframe","floor","clearInterval","init","cont","position","border","hborder","attr","addClass","kp","append","max","scrollable","drag","bind","doZoom","scale","doZoomIn","doZoomOut","wborder","cursorh","bd","rlpos","getViewport","autohidedom","opacity","hide","ScrollMomentumClass2D","onmangotouch","py","lastscrolly","lastscrollx","dfy","mangotouch","sy","dfx","sx","sqrt","pow","dry","drx","stop","reset","ly","lx","gap","ds","abs","doMomentum","lef","ontouchstart","pointerType","tg","nc","getNiceScroll","cancelScroll","skp","type","stopPropagation","clientX","changedTouches","clientY","le","original","screenX","screenY","sl","pt","dl","scrollWidth","scrollHeight","maxh","maxw","ck","wp","hasmoving","lastmouseup","ip","setCapture","preventclick","ontouchend","hideCursor","releaseCapture","moveneedoffset","ontouchmove","byiframe","click","onpreventclick","ev","ofx","ofy","fy","my","fx","mx","ny","nx","grabbed","ay","ax","dz","prepareTransition","showCursor","selection","clear","hronly","which","mw","scrollvaluemaxw","checkSelectionScroll","rt","hasTextSelected","getSelection","rangeCount","onselectionstart","onselectionend","onselectiondrag","preventDefault","jqbind","active","onmousewheelhr","noticeCursor","tp","getAttribute","key","keyCode","ctrl","ctrlKey","shift","shiftKey","ret","doScrollPos","doScrollTo","lazyResize","tmp","onAttributeChange","mutations","forEach","observe","childList","characterData","attributes","subtree","mo","removedNodes","remove","attachEvent","resizeZoom","oniframeload","iframexd","contentDocument","contentWindow","domain","console","log","contents","find","getContentSize","html","hh","onscroll","readyState","cursortimeout","showonmouseevent","animate","onResize","hideRail","hideRailHr","showRail","showRailHr","premaxh","premaxw","preview","clientWidth","clientHeight","lastposition","min","resize","_modernWheelEvent","bubble","_bind","event","deltaMode","deltaX","deltaZ","returnValue","stopImmediatePropagation","deltaY","wheelDelta","wheelDeltaX","detail","f","b","q","addEventListener","wname","touches","_unbind","bub","removeEventListener","detachEvent","unbindAll","r","unbind","preventManipulation","cancel","show","toggle","disconnect","data","nicescroll","each","i","scrollstart","scrollend","scrollcancel","zoomin","zoomout","isScrollable","ov","execScrollWheel","chkscroll","dt","chk","scrollmon","getTransitionSpeed","dif","sp","ex","istime","trans","lasttransitionstyle","newscrolly","newscrollx","newscrollspeed","timer","lft","dst","ms","info","scrollendtrapped","onScrollEnd","setInterval","pa","pe","bzscroll","checkContentSize","sync","scrolling","done","sc","dr","scx","stp","relative","haf","zoomrestore","pp","padding","bkg","lastx","lasty","speedx","speedy","lasttime","steptime","snapx","snapy","demulx","demuly","chkx","chky","time","now","dy","dx","newy","newx","doSnapy","snap","gp","l","pageh","pagew","xm","demulxy","scy","_scrollTop","cssHooks","get","elem","computed","extra","nice","set","value","_scrollLeft","pageXOffset","NiceScrollArray","doms","eq","idx","mplex","args","arguments","apply","index","expr","niceScroll","wrapper","docundef","NiceScroll","getjQuery","options"],"mappings":"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","sourcesContent":["\nimport jQuery from 'jquery'\n// Nicescroll\n\n(function(jQuery){\n\n  // globals\n  var domfocus = false;\n  var mousefocus = false;\n  var zoomactive = false;\n  var tabindexcounter = 5000;\n  var ascrailcounter = 2000;\n  var globalmaxzindex = 0;\n\n  var $ = jQuery;  // sandbox\n\n  // http://stackoverflow.com/questions/2161159/get-script-path\n  function getScriptPath() {\n    var scripts=document.getElementsByTagName('script');\n    var path=scripts[scripts.length-1].src.split('?')[0];\n    return (path.split('/').length>0) ? path.split('/').slice(0,-1).join('/')+'/' : '';\n  }\n  var scriptpath = getScriptPath();\n\n  var vendors = ['ms','moz','webkit','o'];\n\n  var setAnimationFrame = window.requestAnimationFrame||false;\n  var clearAnimationFrame = window.cancelAnimationFrame||false;\n\n  if (!setAnimationFrame) {\n    for(var vx in vendors) {\n      var v = vendors[vx];\n      if (!setAnimationFrame) setAnimationFrame = window[v+'RequestAnimationFrame'];\n      if (!clearAnimationFrame) clearAnimationFrame = window[v+'CancelAnimationFrame']||window[v+'CancelRequestAnimationFrame'];\n    }\n  }\n\n  var clsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;\n\n  var _globaloptions = {\n      zindex:\"auto\",\n      cursoropacitymin:0,\n      cursoropacitymax:1,\n      cursorcolor:\"#424242\",\n      cursorwidth:\"5px\",\n      cursorborder:\"1px solid #fff\",\n      cursorborderradius:\"5px\",\n      scrollspeed:60,\n      mousescrollstep:8*3,\n      touchbehavior:false,\n      hwacceleration:true,\n      usetransition:true,\n      boxzoom:false,\n      dblclickzoom:true,\n      gesturezoom:true,\n      grabcursorenabled:true,\n      autohidemode:true,\n      background:\"\",\n      iframeautoresize:true,\n      cursorminheight:32,\n      preservenativescrolling:true,\n      railoffset:false,\n      bouncescroll:true,\n      spacebarenabled:true,\n      railpadding:{top:0,right:0,left:0,bottom:0},\n      disableoutline:true,\n      horizrailenabled:true,\n      railalign:\"right\",\n      railvalign:\"bottom\",\n      enabletranslate3d:true,\n      enablemousewheel:true,\n      enablekeyboard:true,\n      smoothscroll:true,\n      sensitiverail:true,\n      enablemouselockapi:true,\n//      cursormaxheight:false,\n      cursorfixedheight:false,\n      directionlockdeadzone:6,\n      hidecursordelay:400,\n      nativeparentscrolling:true,\n      enablescrollonselection:true,\n      overflowx:true,\n      overflowy:true,\n      cursordragspeed:0.3,\n      rtlmode:false,\n      cursordragontouch:false,\n      oneaxismousemode:\"auto\"\n  }\n\n  var browserdetected = false;\n\n  var getBrowserDetection = function() {\n\n    if (browserdetected) return browserdetected;\n\n    var domtest = document.createElement('DIV');\n\n    var d = {};\n\n\t\td.haspointerlock = \"pointerLockElement\" in document || \"mozPointerLockElement\" in document || \"webkitPointerLockElement\" in document;\n\n    d.isopera = (\"opera\" in window);\n    d.isopera12 = (d.isopera&&(\"getUserMedia\" in navigator));\n    d.isoperamini = (Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\");\n\n    d.isie = ((\"all\" in document) && (\"attachEvent\" in domtest) && !d.isopera);\n    d.isieold = (d.isie && !(\"msInterpolationMode\" in domtest.style));  // IE6 and older\n    d.isie7 = d.isie&&!d.isieold&&(!(\"documentMode\" in document)||(document.documentMode==7));\n    d.isie8 = d.isie&&(\"documentMode\" in document)&&(document.documentMode==8);\n    d.isie9 = d.isie&&(\"performance\" in window)&&(document.documentMode>=9);\n    d.isie10 = d.isie&&(\"performance\" in window)&&(document.documentMode>=10);\n\n    d.isie9mobile = /iemobile.9/i.test(navigator.userAgent);  //wp 7.1 mango\n    if (d.isie9mobile) d.isie9 = false;\n    d.isie7mobile = (!d.isie9mobile&&d.isie7) && /iemobile/i.test(navigator.userAgent);  //wp 7.0\n\n    d.ismozilla = (\"MozAppearance\" in domtest.style);\n\n    d.iswebkit = (\"WebkitAppearance\" in domtest.style);\n\n    d.ischrome = (\"chrome\" in window);\n\t\td.ischrome22 = (d.ischrome&&d.haspointerlock);\n    d.ischrome26 = (d.ischrome&&(\"transition\" in domtest.style));  // issue with transform detection (maintain prefix)\n\n    d.cantouch = (\"ontouchstart\" in document.documentElement)||(\"ontouchstart\" in window);  // detection for Chrome Touch Emulation\n    d.hasmstouch = (window.navigator.msPointerEnabled||false);  // IE10+ pointer events\n\n    d.ismac = /^mac$/i.test(navigator.platform);\n\n    d.isios = (d.cantouch && /iphone|ipad|ipod/i.test(navigator.platform));\n    d.isios4 = ((d.isios)&&!(\"seal\" in Object));\n\n    d.isandroid = (/android/i.test(navigator.userAgent));\n\n    d.trstyle = false;\n    d.hastransform = false;\n    d.hastranslate3d = false;\n    d.transitionstyle = false;\n    d.hastransition = false;\n    d.transitionend = false;\n\n    var check = ['transform','msTransform','webkitTransform','MozTransform','OTransform'];\n    for(var a=0;a<check.length;a++){\n      if (typeof domtest.style[check[a]] != \"undefined\") {\n        d.trstyle = check[a];\n        break;\n      }\n    }\n    d.hastransform = (d.trstyle != false);\n    if (d.hastransform) {\n      domtest.style[d.trstyle] = \"translate3d(1px,2px,3px)\";\n      d.hastranslate3d = /translate3d/.test(domtest.style[d.trstyle]);\n    }\n\n    d.transitionstyle = false;\n    d.prefixstyle = '';\n    d.transitionend = false;\n    var check = ['transition','webkitTransition','MozTransition','OTransition','OTransition','msTransition','KhtmlTransition'];\n    var prefix = ['','-webkit-','-moz-','-o-','-o','-ms-','-khtml-'];\n    var evs = ['transitionend','webkitTransitionEnd','transitionend','otransitionend','oTransitionEnd','msTransitionEnd','KhtmlTransitionEnd'];\n    for(var a=0;a<check.length;a++) {\n      if (check[a] in domtest.style) {\n        d.transitionstyle = check[a];\n        d.prefixstyle = prefix[a];\n        d.transitionend = evs[a];\n        break;\n      }\n    }\n    if (d.ischrome26) {  // use always prefix\n      d.prefixstyle = prefix[1];\n    }\n\n    d.hastransition = (d.transitionstyle);\n\n    function detectCursorGrab() {\n      var lst = ['-moz-grab','-webkit-grab','grab'];\n      if ((d.ischrome&&!d.ischrome22)||d.isie) lst=[];  // force setting for IE returns false positive and chrome cursor bug\n      for(var a=0;a<lst.length;a++) {\n        var p = lst[a];\n        domtest.style['cursor']=p;\n        if (domtest.style['cursor']==p) return p;\n      }\n      return 'url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize';  // thank you google for custom cursor!\n    }\n    d.cursorgrabvalue = detectCursorGrab();\n\n    d.hasmousecapture = (\"setCapture\" in domtest);\n\n    d.hasMutationObserver = (clsMutationObserver !== false);\n\n    domtest = null;  //memory released\n\n    browserdetected = d;\n\n    return d;\n  }\n\n  var NiceScrollClass = function(myopt,me) {\n\n    var self = this;\n\n    this.version = '3.5.0 BETA5';\n    this.name = 'nicescroll';\n\n    this.me = me;\n\n    this.opt = {\n      doc:$(\"body\"),\n      win:false\n    };\n\n    $.extend(this.opt,_globaloptions);\n\n// Options for internal use\n    this.opt.snapbackspeed = 80;\n\n    if (myopt||false) {\n      for(var a in self.opt) {\n        if (typeof myopt[a] != \"undefined\") self.opt[a] = myopt[a];\n      }\n    }\n\n    this.doc = self.opt.doc;\n    this.iddoc = (this.doc&&this.doc[0])?this.doc[0].id||'':'';\n    this.ispage = /BODY|HTML/.test((self.opt.win)?self.opt.win[0].nodeName:this.doc[0].nodeName);\n    this.haswrapper = (self.opt.win!==false);\n    this.win = self.opt.win||(this.ispage?$(window):this.doc);\n    this.docscroll = (this.ispage&&!this.haswrapper)?$(window):this.win;\n    this.body = $(\"body\");\n    this.viewport = false;\n\n    this.isfixed = false;\n\n    this.iframe = false;\n    this.isiframe = ((this.doc[0].nodeName == 'IFRAME') && (this.win[0].nodeName == 'IFRAME'));\n\n    this.istextarea = (this.win[0].nodeName == 'TEXTAREA');\n\n    this.forcescreen = false; //force to use screen position on events\n\n    this.canshowonmouseevent = (self.opt.autohidemode!=\"scroll\");\n\n// Events jump table\n    this.onmousedown = false;\n    this.onmouseup = false;\n    this.onmousemove = false;\n    this.onmousewheel = false;\n    this.onkeypress = false;\n    this.ongesturezoom = false;\n    this.onclick = false;\n\n// Nicescroll custom events\n    this.onscrollstart = false;\n    this.onscrollend = false;\n    this.onscrollcancel = false;\n\n    this.onzoomin = false;\n    this.onzoomout = false;\n\n// Let's start!\n    this.view = false;\n    this.page = false;\n\n    this.scroll = {x:0,y:0};\n    this.scrollratio = {x:0,y:0};\n    this.cursorheight = 20;\n    this.scrollvaluemax = 0;\n\n    this.checkrtlmode = false;\n\n    this.scrollrunning = false;\n\n    this.scrollmom = false;\n\n    this.observer = false;\n    this.observerremover = false;  // observer on parent for remove detection\n\n    do {\n      this.id = \"ascrail\"+(ascrailcounter++);\n    } while (document.getElementById(this.id));\n\n    this.rail = false;\n    this.cursor = false;\n    this.cursorfreezed = false;\n    this.selectiondrag = false;\n\n    this.zoom = false;\n    this.zoomactive = false;\n\n    this.hasfocus = false;\n    this.hasmousefocus = false;\n\n    this.visibility = true;\n    this.locked = false;\n    this.hidden = false; // rails always hidden\n    this.cursoractive = true; // user can interact with cursors\n\n    this.overflowx = self.opt.overflowx;\n    this.overflowy = self.opt.overflowy;\n\n    this.nativescrollingarea = false;\n    this.checkarea = 0;\n\n    this.events = [];  // event list for unbind\n\n    this.saved = {};\n\n    this.delaylist = {};\n    this.synclist = {};\n\n    this.lastdeltax = 0;\n    this.lastdeltay = 0;\n\n    this.detected = getBrowserDetection();\n\n    var cap = $.extend({},this.detected);\n\n    this.canhwscroll = (cap.hastransform&&self.opt.hwacceleration);\n    this.ishwscroll = (this.canhwscroll&&self.haswrapper);\n\n    this.istouchcapable = false;  // desktop devices with touch screen support\n\n//## Check Chrome desktop with touch support\n    if (cap.cantouch&&cap.ischrome&&!cap.isios&&!cap.isandroid) {\n      this.istouchcapable = true;\n      cap.cantouch = false;  // parse normal desktop events\n    }\n\n//## Firefox 18 nightly build (desktop) false positive (or desktop with touch support)\n    if (cap.cantouch&&cap.ismozilla&&!cap.isios&&!cap.isandroid) {\n      this.istouchcapable = true;\n      cap.cantouch = false;  // parse normal desktop events\n    }\n\n//## disable MouseLock API on user request\n\n    if (!self.opt.enablemouselockapi) {\n      cap.hasmousecapture = false;\n      cap.haspointerlock = false;\n    }\n\n    this.delayed = function(name,fn,tm,lazy) {\n      var dd = self.delaylist[name];\n      var nw = (new Date()).getTime();\n      if (!lazy&&dd&&dd.tt) return false;\n      if (dd&&dd.tt) clearTimeout(dd.tt);\n      if (dd&&dd.last+tm>nw&&!dd.tt) {\n        self.delaylist[name] = {\n          last:nw+tm,\n          tt:setTimeout(function(){self.delaylist[name].tt=0;fn.call();},tm)\n        }\n      }\n      else if (!dd||!dd.tt) {\n        self.delaylist[name] = {\n          last:nw,\n          tt:0\n        }\n        setTimeout(function(){fn.call();},0);\n      }\n    };\n\n    this.debounced = function(name,fn,tm) {\n      var dd = self.delaylist[name];\n      var nw = (new Date()).getTime();\n      self.delaylist[name] = fn;\n      if (!dd) {\n        setTimeout(function(){var fn=self.delaylist[name];self.delaylist[name]=false;fn.call();},tm);\n      }\n    }\n\n    this.synched = function(name,fn) {\n\n      function requestSync() {\n        if (self.onsync) return;\n        setAnimationFrame(function(){\n          self.onsync = false;\n          for(name in self.synclist){\n            var fn = self.synclist[name];\n            if (fn) fn.call(self);\n            self.synclist[name] = false;\n          }\n        });\n        self.onsync = true;\n      };\n\n      self.synclist[name] = fn;\n      requestSync();\n      return name;\n    };\n\n    this.unsynched = function(name) {\n      if (self.synclist[name]) self.synclist[name] = false;\n    }\n\n    this.css = function(el,pars) {  // save & set\n      for(var n in pars) {\n        self.saved.css.push([el,n,el.css(n)]);\n        el.css(n,pars[n]);\n      }\n    };\n\n    this.scrollTop = function(val) {\n      return (typeof val == \"undefined\") ? self.getScrollTop() : self.setScrollTop(val);\n    };\n\n    this.scrollLeft = function(val) {\n      return (typeof val == \"undefined\") ? self.getScrollLeft() : self.setScrollLeft(val);\n    };\n\n// derived by by Dan Pupius www.pupius.net\n    BezierClass = function(st,ed,spd,p1,p2,p3,p4) {\n      this.st = st;\n      this.ed = ed;\n      this.spd = spd;\n\n      this.p1 = p1||0;\n      this.p2 = p2||1;\n      this.p3 = p3||0;\n      this.p4 = p4||1;\n\n      this.ts = (new Date()).getTime();\n      this.df = this.ed-this.st;\n    };\n    BezierClass.prototype = {\n      B2:function(t){ return 3*t*t*(1-t) },\n      B3:function(t){ return 3*t*(1-t)*(1-t) },\n      B4:function(t){ return (1-t)*(1-t)*(1-t) },\n      getNow:function(){\n        var nw = (new Date()).getTime();\n        var pc = 1-((nw-this.ts)/this.spd);\n        var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);\n        return (pc<0) ? this.ed : this.st+Math.round(this.df*bz);\n      },\n      update:function(ed,spd){\n        this.st = this.getNow();\n        this.ed = ed;\n        this.spd = spd;\n        this.ts = (new Date()).getTime();\n        this.df = this.ed-this.st;\n        return this;\n      }\n    };\n\n    if (this.ishwscroll) {\n    // hw accelerated scroll\n      this.doc.translate = {x:0,y:0,tx:\"0px\",ty:\"0px\"};\n\n      //this one can help to enable hw accel on ios6 http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/\n      if (cap.hastranslate3d&&cap.isios) this.doc.css(\"-webkit-backface-visibility\",\"hidden\");  // prevent flickering http://stackoverflow.com/questions/3461441/\n\n      //derived from http://stackoverflow.com/questions/11236090/\n      function getMatrixValues() {\n        var tr = self.doc.css(cap.trstyle);\n        if (tr&&(tr.substr(0,6)==\"matrix\")) {\n          return tr.replace(/^.*\\((.*)\\)$/g, \"$1\").replace(/px/g,'').split(/, +/);\n        }\n        return false;\n      }\n\n      this.getScrollTop = function(last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return (mtx.length==16) ? -mtx[13] : -mtx[5];  //matrix3d 16 on IE10\n          if (self.timerscroll&&self.timerscroll.bz) return self.timerscroll.bz.getNow();\n        }\n        return self.doc.translate.y;\n      };\n\n      this.getScrollLeft = function(last) {\n        if (!last) {\n          var mtx = getMatrixValues();\n          if (mtx) return (mtx.length==16) ? -mtx[12] : -mtx[4];  //matrix3d 16 on IE10\n          if (self.timerscroll&&self.timerscroll.bh) return self.timerscroll.bh.getNow();\n        }\n        return self.doc.translate.x;\n      };\n\n      if (document.createEvent) {\n        this.notifyScrollEvent = function(el) {\n          var e = document.createEvent(\"UIEvents\");\n          e.initUIEvent(\"scroll\", false, true, window, 1);\n          el.dispatchEvent(e);\n        };\n      }\n      else if (document.fireEvent) {\n        this.notifyScrollEvent = function(el) {\n          var e = document.createEventObject();\n          el.fireEvent(\"onscroll\");\n          e.cancelBubble = true;\n        };\n      }\n      else {\n        this.notifyScrollEvent = function(el,add) {}; //NOPE\n      }\n\n      if (cap.hastranslate3d&&self.opt.enabletranslate3d) {\n        this.setScrollTop = function(val,silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = (val*-1)+\"px\";\n          self.doc.css(cap.trstyle,\"translate3d(\"+self.doc.translate.tx+\",\"+self.doc.translate.ty+\",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n        this.setScrollLeft = function(val,silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = (val*-1)+\"px\";\n          self.doc.css(cap.trstyle,\"translate3d(\"+self.doc.translate.tx+\",\"+self.doc.translate.ty+\",0px)\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      } else {\n        this.setScrollTop = function(val,silent) {\n          self.doc.translate.y = val;\n          self.doc.translate.ty = (val*-1)+\"px\";\n          self.doc.css(cap.trstyle,\"translate(\"+self.doc.translate.tx+\",\"+self.doc.translate.ty+\")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n        this.setScrollLeft = function(val,silent) {\n          self.doc.translate.x = val;\n          self.doc.translate.tx = (val*-1)+\"px\";\n          self.doc.css(cap.trstyle,\"translate(\"+self.doc.translate.tx+\",\"+self.doc.translate.ty+\")\");\n          if (!silent) self.notifyScrollEvent(self.win[0]);\n        };\n      }\n    } else {\n    // native scroll\n      this.getScrollTop = function() {\n        return self.docscroll.scrollTop();\n      };\n      this.setScrollTop = function(val) {\n        return self.docscroll.scrollTop(val);\n      };\n      this.getScrollLeft = function() {\n        return self.docscroll.scrollLeft();\n      };\n      this.setScrollLeft = function(val) {\n        return self.docscroll.scrollLeft(val);\n      };\n    }\n\n    this.getTarget = function(e) {\n      if (!e) return false;\n      if (e.target) return e.target;\n      if (e.srcElement) return e.srcElement;\n      return false;\n    };\n\n    this.hasParent = function(e,id) {\n      if (!e) return false;\n      var el = e.target||e.srcElement||e||false;\n      while (el && el.id != id) {\n        el = el.parentNode||false;\n      }\n      return (el!==false);\n    };\n\n    function getZIndex() {\n      var dom = self.win;\n      if (\"zIndex\" in dom) return dom.zIndex();  // use jQuery UI method when available\n      while (dom.length>0) {\n        if (dom[0].nodeType==9) return false;\n        var zi = dom.css('zIndex');\n        if (!isNaN(zi)&&zi!=0) return parseInt(zi);\n        dom = dom.parent();\n      }\n      return false;\n    };\n\n//inspired by http://forum.jquery.com/topic/width-includes-border-width-when-set-to-thin-medium-thick-in-ie\n    var _convertBorderWidth = {\"thin\":1,\"medium\":3,\"thick\":5};\n    function getWidthToPixel(dom,prop,chkheight) {\n      var wd = dom.css(prop);\n      var px = parseFloat(wd);\n      if (isNaN(px)) {\n        px = _convertBorderWidth[wd]||0;\n        var brd = (px==3) ? ((chkheight)?(self.win.outerHeight() - self.win.innerHeight()):(self.win.outerWidth() - self.win.innerWidth())) : 1; //DON'T TRUST CSS\n        if (self.isie8&&px) px+=1;\n        return (brd) ? px : 0;\n      }\n      return px;\n    };\n\n    this.getOffset = function() {\n      if (self.isfixed) return {top:parseFloat(self.win.css('top')),left:parseFloat(self.win.css('left'))};\n      if (!self.viewport) return self.win.offset();\n      var ww = self.win.offset();\n      var vp = self.viewport.offset();\n      return {top:ww.top-vp.top+self.viewport.scrollTop(),left:ww.left-vp.left+self.viewport.scrollLeft()};\n    };\n\n    this.updateScrollBar = function(len) {\n      if (self.ishwscroll) {\n        self.rail.css({height:self.win.innerHeight()});\n        if (self.railh) self.railh.css({width:self.win.innerWidth()});\n      } else {\n        var wpos = self.getOffset();\n        var pos = {top:wpos.top,left:wpos.left};\n        pos.top+= getWidthToPixel(self.win,'border-top-width',true);\n        var brd = (self.win.outerWidth() - self.win.innerWidth())/2;\n        pos.left+= (self.rail.align) ? self.win.outerWidth() - getWidthToPixel(self.win,'border-right-width') - self.rail.width : getWidthToPixel(self.win,'border-left-width');\n\n        var off = self.opt.railoffset;\n        if (off) {\n          if (off.top) pos.top+=off.top;\n          if (self.rail.align&&off.left) pos.left+=off.left;\n        }\n\n\t\t\t\tif (!self.locked) self.rail.css({top:pos.top,left:pos.left,height:(len)?len.h:self.win.innerHeight()});\n\n\t\t\t\tif (self.zoom) {\n\t\t\t\t  self.zoom.css({top:pos.top+1,left:(self.rail.align==1) ? pos.left-20 : pos.left+self.rail.width+4});\n\t\t\t  }\n\n\t\t\t\tif (self.railh&&!self.locked) {\n\t\t\t\t\tvar pos = {top:wpos.top,left:wpos.left};\n\t\t\t\t\tvar y = (self.railh.align) ? pos.top + getWidthToPixel(self.win,'border-top-width',true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win,'border-top-width',true);\n\t\t\t\t\tvar x = pos.left + getWidthToPixel(self.win,'border-left-width');\n\t\t\t\t\tself.railh.css({top:y,left:x,width:self.railh.width});\n\t\t\t\t}\n\n\n      }\n    };\n\n    this.doRailClick = function(e,dbl,hr) {\n\n      var fn,pg,cur,pos;\n\n//      if (self.rail.drag&&self.rail.drag.pt!=1) return;\n      if (self.locked) return;\n//      if (self.rail.drag) return;\n\n//      self.cancelScroll();\n\n      self.cancelEvent(e);\n\n      if (dbl) {\n        fn = (hr) ? self.doScrollLeft : self.doScrollTop;\n        cur = (hr) ? ((e.pageX - self.railh.offset().left - (self.cursorwidth/2)) * self.scrollratio.x) : ((e.pageY - self.rail.offset().top - (self.cursorheight/2)) * self.scrollratio.y);\n        fn(cur);\n      } else {\n//        console.log(e.pageY);\n        fn = (hr) ? self.doScrollLeftBy : self.doScrollBy;\n        cur = (hr) ? self.scroll.x : self.scroll.y;\n        pos = (hr) ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;\n        pg = (hr) ? self.view.w : self.view.h;\n        (cur>=pos) ? fn(pg) : fn(-pg);\n      }\n\n    }\n\n    self.hasanimationframe = (setAnimationFrame);\n    self.hascancelanimationframe = (clearAnimationFrame);\n\n    if (!self.hasanimationframe) {\n      setAnimationFrame=function(fn){return setTimeout(fn,15-Math.floor((+new Date)/1000)%16)}; // 1000/60)};\n      clearAnimationFrame=clearInterval;\n    }\n    else if (!self.hascancelanimationframe) clearAnimationFrame=function(){self.cancelAnimationFrame=true};\n\n    this.init = function() {\n\n      self.saved.css = [];\n\n      if (cap.isie7mobile) return true; // SORRY, DO NOT WORK!\n      if (cap.isoperamini) return true; // SORRY, DO NOT WORK!\n\n      if (cap.hasmstouch) self.css((self.ispage)?$(\"html\"):self.win,{'-ms-touch-action':'none'});\n\n      self.zindex = \"auto\";\n      if (!self.ispage&&self.opt.zindex==\"auto\") {\n        self.zindex = getZIndex()||\"auto\";\n      } else {\n        self.zindex = self.opt.zindex;\n      }\n\n      if (!self.ispage&&self.zindex!=\"auto\") {\n        if (self.zindex>globalmaxzindex) globalmaxzindex=self.zindex;\n      }\n\n      if (self.isie&&self.zindex==0&&self.opt.zindex==\"auto\") {  // fix IE auto == 0\n        self.zindex=\"auto\";\n      }\n\n/*\n      self.ispage = true;\n      self.haswrapper = true;\n//      self.win = $(window);\n      self.docscroll = $(\"body\");\n//      self.doc = $(\"body\");\n*/\n\n      if (!self.ispage || (!cap.cantouch && !cap.isieold && !cap.isie9mobile)) {\n\n        var cont = self.docscroll;\n        if (self.ispage) cont = (self.haswrapper)?self.win:self.doc;\n\n        if (!cap.isie9mobile) self.css(cont,{'overflow-y':'hidden'});\n\n        if (self.ispage&&cap.isie7) {\n          if (self.doc[0].nodeName=='BODY') self.css($(\"html\"),{'overflow-y':'hidden'});  //IE7 double scrollbar issue\n          else if (self.doc[0].nodeName=='HTML') self.css($(\"body\"),{'overflow-y':'hidden'});  //IE7 double scrollbar issue\n        }\n\n        if (cap.isios&&!self.ispage&&!self.haswrapper) self.css($(\"body\"),{\"-webkit-overflow-scrolling\":\"touch\"});  //force hw acceleration\n\n        var cursor = $(document.createElement('div'));\n        cursor.css({\n          position:\"relative\",top:0,\"float\":\"right\",width:self.opt.cursorwidth,height:\"0px\",\n          'background-color':self.opt.cursorcolor,\n          border:self.opt.cursorborder,\n          'background-clip':'padding-box',\n          '-webkit-border-radius':self.opt.cursorborderradius,\n          '-moz-border-radius':self.opt.cursorborderradius,\n          'border-radius':self.opt.cursorborderradius\n        });\n\n        cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());\n        self.cursor = cursor;\n\n        var rail = $(document.createElement('div'));\n        rail.attr('id',self.id);\n        rail.addClass('nicescroll-rails');\n\n        var v,a,kp = [\"left\",\"right\"];  //\"top\",\"bottom\"\n        for(var n in kp) {\n          a=kp[n];\n          v = self.opt.railpadding[a];\n          (v) ? rail.css(\"padding-\"+a,v+\"px\") : self.opt.railpadding[a] = 0;\n        }\n\n        rail.append(cursor);\n\n        rail.width = Math.max(parseFloat(self.opt.cursorwidth),cursor.outerWidth()) + self.opt.railpadding['left'] + self.opt.railpadding['right'];\n        rail.css({width:rail.width+\"px\",'zIndex':self.zindex,\"background\":self.opt.background,cursor:\"default\"});\n\n        rail.visibility = true;\n        rail.scrollable = true;\n\n        rail.align = (self.opt.railalign==\"left\") ? 0 : 1;\n\n        self.rail = rail;\n\n        self.rail.drag = false;\n\n        var zoom = false;\n        if (self.opt.boxzoom&&!self.ispage&&!cap.isieold) {\n          zoom = document.createElement('div');\n          self.bind(zoom,\"click\",self.doZoom);\n          self.zoom = $(zoom);\n          self.zoom.css({\"cursor\":\"pointer\",'z-index':self.zindex,'backgroundImage':'url('+scriptpath+'zoomico.png)','height':18,'width':18,'backgroundPosition':'0px 0px'});\n          if (self.opt.dblclickzoom) self.bind(self.win,\"dblclick\",self.doZoom);\n          if (cap.cantouch&&self.opt.gesturezoom) {\n            self.ongesturezoom = function(e) {\n              if (e.scale>1.5) self.doZoomIn(e);\n              if (e.scale<0.8) self.doZoomOut(e);\n              return self.cancelEvent(e);\n            };\n            self.bind(self.win,\"gestureend\",self.ongesturezoom);\n          }\n        }\n\n// init HORIZ\n\n        self.railh = false;\n\n        if (self.opt.horizrailenabled) {\n\n          self.css(cont,{'overflow-x':'hidden'});\n\n          var cursor = $(document.createElement('div'));\n          cursor.css({\n            position:\"relative\",top:0,height:self.opt.cursorwidth,width:\"0px\",\n            'background-color':self.opt.cursorcolor,\n            border:self.opt.cursorborder,\n            'background-clip':'padding-box',\n            '-webkit-border-radius':self.opt.cursorborderradius,\n            '-moz-border-radius':self.opt.cursorborderradius,\n            'border-radius':self.opt.cursorborderradius\n          });\n\n          cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());\n          self.cursorh = cursor;\n\n          var railh = $(document.createElement('div'));\n          railh.attr('id',self.id+'-hr');\n          railh.addClass('nicescroll-rails');\n          railh.height = Math.max(parseFloat(self.opt.cursorwidth),cursor.outerHeight());\n          railh.css({height:railh.height+\"px\",'zIndex':self.zindex,\"background\":self.opt.background});\n\n          railh.append(cursor);\n\n          railh.visibility = true;\n          railh.scrollable = true;\n\n          railh.align = (self.opt.railvalign==\"top\") ? 0 : 1;\n\n          self.railh = railh;\n\n          self.railh.drag = false;\n\n        }\n\n//\n\n        if (self.ispage) {\n          rail.css({position:\"fixed\",top:\"0px\",height:\"100%\"});\n          (rail.align) ? rail.css({right:\"0px\"}) : rail.css({left:\"0px\"});\n          self.body.append(rail);\n          if (self.railh) {\n            railh.css({position:\"fixed\",left:\"0px\",width:\"100%\"});\n            (railh.align) ? railh.css({bottom:\"0px\"}) : railh.css({top:\"0px\"});\n            self.body.append(railh);\n          }\n        } else {\n          if (self.ishwscroll) {\n            if (self.win.css('position')=='static') self.css(self.win,{'position':'relative'});\n            var bd = (self.win[0].nodeName == 'HTML') ? self.body : self.win;\n            if (self.zoom) {\n              self.zoom.css({position:\"absolute\",top:1,right:0,\"margin-right\":rail.width+4});\n              bd.append(self.zoom);\n            }\n            rail.css({position:\"absolute\",top:0});\n            (rail.align) ? rail.css({right:0}) : rail.css({left:0});\n            bd.append(rail);\n            if (railh) {\n              railh.css({position:\"absolute\",left:0,bottom:0});\n              (railh.align) ? railh.css({bottom:0}) : railh.css({top:0});\n              bd.append(railh);\n            }\n          } else {\n            self.isfixed = (self.win.css(\"position\")==\"fixed\");\n            var rlpos = (self.isfixed) ? \"fixed\" : \"absolute\";\n\n            if (!self.isfixed) self.viewport = self.getViewport(self.win[0]);\n            if (self.viewport) {\n              self.body = self.viewport;\n              if ((/relative|absolute/.test(self.viewport.css(\"position\")))==false) self.css(self.viewport,{\"position\":\"relative\"});\n            }\n\n            rail.css({position:rlpos});\n            if (self.zoom) self.zoom.css({position:rlpos});\n            self.updateScrollBar();\n            self.body.append(rail);\n            if (self.zoom) self.body.append(self.zoom);\n            if (self.railh) {\n              railh.css({position:rlpos});\n              self.body.append(railh);\n            }\n          }\n\n          if (cap.isios) self.css(self.win,{'-webkit-tap-highlight-color':'rgba(0,0,0,0)','-webkit-touch-callout':'none'});  // prevent grey layer on click\n\n\t\t\t\t\tif (cap.isie&&self.opt.disableoutline) self.win.attr(\"hideFocus\",\"true\");  // IE, prevent dotted rectangle on focused div\n\t\t\t\t\tif (cap.iswebkit&&self.opt.disableoutline) self.win.css({\"outline\":\"none\"});\n//          if (cap.isopera&&self.opt.disableoutline) self.win.css({\"outline\":\"0\"});  // Opera to test [TODO]\n\n        }\n\n        if (self.opt.autohidemode===false) {\n          self.autohidedom = false;\n          self.rail.css({opacity:self.opt.cursoropacitymax});\n          if (self.railh) self.railh.css({opacity:self.opt.cursoropacitymax});\n        }\n        else if (self.opt.autohidemode===true) {\n          self.autohidedom = $().add(self.rail);\n          if (cap.isie8) self.autohidedom=self.autohidedom.add(self.cursor);\n          if (self.railh) self.autohidedom=self.autohidedom.add(self.railh);\n          if (self.railh&&cap.isie8) self.autohidedom=self.autohidedom.add(self.cursorh);\n        }\n        else if (self.opt.autohidemode==\"scroll\") {\n          self.autohidedom = $().add(self.rail);\n          if (self.railh) self.autohidedom=self.autohidedom.add(self.railh);\n        }\n        else if (self.opt.autohidemode==\"cursor\") {\n          self.autohidedom = $().add(self.cursor);\n          if (self.railh) self.autohidedom=self.autohidedom.add(self.cursorh);\n        }\n        else if (self.opt.autohidemode==\"hidden\") {\n          self.autohidedom = false;\n          self.hide();\n          self.locked = false;\n        }\n\n        if (cap.isie9mobile) {\n\n          self.scrollmom = new ScrollMomentumClass2D(self);\n\n          /*\n          var trace = function(msg) {\n            var db = $(\"#debug\");\n            if (isNaN(msg)&&(typeof msg != \"string\")) {\n              var x = [];\n              for(var a in msg) {\n                x.push(a+\":\"+msg[a]);\n              }\n              msg =\"{\"+x.join(\",\")+\"}\";\n            }\n            if (db.children().length>0) {\n              db.children().eq(0).before(\"<div>\"+msg+\"</div>\");\n            } else {\n              db.append(\"<div>\"+msg+\"</div>\");\n            }\n          }\n          window.onerror = function(msg,url,ln) {\n            trace(\"ERR: \"+msg+\" at \"+ln);\n          }\n*/\n\n          self.onmangotouch = function(e) {\n            var py = self.getScrollTop();\n            var px = self.getScrollLeft();\n\n            if ((py == self.scrollmom.lastscrolly)&&(px == self.scrollmom.lastscrollx)) return true;\n//            $(\"#debug\").html('DRAG:'+py);\n\n            var dfy = py-self.mangotouch.sy;\n            var dfx = px-self.mangotouch.sx;\n            var df = Math.round(Math.sqrt(Math.pow(dfx,2)+Math.pow(dfy,2)));\n            if (df==0) return;\n\n            var dry = (dfy<0)?-1:1;\n            var drx = (dfx<0)?-1:1;\n\n            var tm = +new Date();\n            if (self.mangotouch.lazy) clearTimeout(self.mangotouch.lazy);\n\n            if (((tm-self.mangotouch.tm)>80)||(self.mangotouch.dry!=dry)||(self.mangotouch.drx!=drx)) {\n//              trace('RESET+'+(tm-self.mangotouch.tm));\n              self.scrollmom.stop();\n              self.scrollmom.reset(px,py);\n              self.mangotouch.sy = py;\n              self.mangotouch.ly = py;\n              self.mangotouch.sx = px;\n              self.mangotouch.lx = px;\n              self.mangotouch.dry = dry;\n              self.mangotouch.drx = drx;\n              self.mangotouch.tm = tm;\n            } else {\n\n              self.scrollmom.stop();\n              self.scrollmom.update(self.mangotouch.sx-dfx,self.mangotouch.sy-dfy);\n              var gap = tm - self.mangotouch.tm;\n              self.mangotouch.tm = tm;\n\n//              trace('MOVE:'+df+\" - \"+gap);\n\n              var ds = Math.max(Math.abs(self.mangotouch.ly-py),Math.abs(self.mangotouch.lx-px));\n              self.mangotouch.ly = py;\n              self.mangotouch.lx = px;\n\n              if (ds>2) {\n                self.mangotouch.lazy = setTimeout(function(){\n//                  trace('END:'+ds+'+'+gap);\n                  self.mangotouch.lazy = false;\n                  self.mangotouch.dry = 0;\n                  self.mangotouch.drx = 0;\n                  self.mangotouch.tm = 0;\n                  self.scrollmom.doMomentum(30);\n                },100);\n              }\n            }\n          }\n\n          var top = self.getScrollTop();\n          var lef = self.getScrollLeft();\n          self.mangotouch = {sy:top,ly:top,dry:0,sx:lef,lx:lef,drx:0,lazy:false,tm:0};\n\n          self.bind(self.docscroll,\"scroll\",self.onmangotouch);\n\n        } else {\n\n          if (cap.cantouch||self.istouchcapable||self.opt.touchbehavior||cap.hasmstouch) {\n\n            self.scrollmom = new ScrollMomentumClass2D(self);\n\n            self.ontouchstart = function(e) {\n              if (e.pointerType&&e.pointerType!=2) return false;\n\n              if (!self.locked) {\n\n                if (cap.hasmstouch) {\n                  var tg = (e.target) ? e.target : false;\n                  while (tg) {\n                    var nc = $(tg).getNiceScroll();\n                    if ((nc.length>0)&&(nc[0].me == self.me)) break;\n                    if (nc.length>0) return false;\n                    if ((tg.nodeName=='DIV')&&(tg.id==self.id)) break;\n                    tg = (tg.parentNode) ? tg.parentNode : false;\n                  }\n                }\n\n                self.cancelScroll();\n\n                var tg = self.getTarget(e);\n\n                if (tg) {\n                  var skp = (/INPUT/i.test(tg.nodeName))&&(/range/i.test(tg.type));\n                  if (skp) return self.stopPropagation(e);\n                }\n\n                if (!(\"clientX\" in e) && (\"changedTouches\" in e)) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  var e = {\"original\":(e.original)?e.original:e};\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                self.rail.drag = {x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,st:self.getScrollTop(),sl:self.getScrollLeft(),pt:2,dl:false};\n\n                if (self.ispage||!self.opt.directionlockdeadzone) {\n                  self.rail.drag.dl = \"f\";\n                } else {\n\n                  var view = {\n                    w:$(window).width(),\n                    h:$(window).height()\n                  };\n\n                  var page = {\n                    w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),\n                    h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)\n                  }\n\n                  var maxh = Math.max(0,page.h - view.h);\n                  var maxw = Math.max(0,page.w - view.w);\n\n                  if (!self.rail.scrollable&&self.railh.scrollable) self.rail.drag.ck = (maxh>0) ? \"v\" : false;\n                  else if (self.rail.scrollable&&!self.railh.scrollable) self.rail.drag.ck = (maxw>0) ? \"h\" : false;\n                  else self.rail.drag.ck = false;\n                  if (!self.rail.drag.ck) self.rail.drag.dl = \"f\";\n                }\n\n                if (self.opt.touchbehavior&&self.isiframe&&cap.isie) {\n                  var wp = self.win.position();\n                  self.rail.drag.x+=wp.left;\n                  self.rail.drag.y+=wp.top;\n                }\n\n                self.hasmoving = false;\n                self.lastmouseup = false;\n                self.scrollmom.reset(e.clientX,e.clientY);\n                if (!cap.cantouch&&!this.istouchcapable&&!cap.hasmstouch) {\n\n                  var ip = (tg)?/INPUT|SELECT|TEXTAREA/i.test(tg.nodeName):false;\n                  if (!ip) {\n                    if (!self.ispage&&cap.hasmousecapture) tg.setCapture();\n//                  return self.cancelEvent(e);\n                    return (self.opt.touchbehavior) ? self.cancelEvent(e) : self.stopPropagation(e);\n                  }\n                  if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))) {\n                    pc = {\"tg\":tg,\"click\":false};\n                    self.preventclick = pc;\n                  }\n\n                }\n              }\n\n            };\n\n            self.ontouchend = function(e) {\n              if (e.pointerType&&e.pointerType!=2) return false;\n              if (self.rail.drag&&(self.rail.drag.pt==2)) {\n                self.scrollmom.doMomentum();\n                self.rail.drag = false;\n                if (self.hasmoving) {\n                  self.hasmoving = false;\n                  self.lastmouseup = true;\n                  self.hideCursor();\n                  if (cap.hasmousecapture) document.releaseCapture();\n                  if (!cap.cantouch) return self.cancelEvent(e);\n                }\n              }\n\n            };\n\n            var moveneedoffset = (self.opt.touchbehavior&&self.isiframe&&!cap.hasmousecapture);\n\n            self.ontouchmove = function(e,byiframe) {\n\n              if (e.pointerType&&e.pointerType!=2) return false;\n\n              if (self.rail.drag&&(self.rail.drag.pt==2)) {\n                if (cap.cantouch&&(typeof e.original == \"undefined\")) return true;  // prevent ios \"ghost\" events by clickable elements\n\n                self.hasmoving = true;\n\n                if (self.preventclick&&!self.preventclick.click) {\n                  self.preventclick.click = self.preventclick.tg.onclick||false;\n                  self.preventclick.tg.onclick = self.onpreventclick;\n                }\n\n                var ev = $.extend({\"original\":e},e);\n                e = ev;\n\n                if ((\"changedTouches\" in e)) {\n                  e.clientX = e.changedTouches[0].clientX;\n                  e.clientY = e.changedTouches[0].clientY;\n                }\n\n                if (self.forcescreen) {\n                  var le = e;\n                  var e = {\"original\":(e.original)?e.original:e};\n                  e.clientX = le.screenX;\n                  e.clientY = le.screenY;\n                }\n\n                var ofx = ofy = 0;\n\n                if (moveneedoffset&&!byiframe) {\n                  var wp = self.win.position();\n                  ofx=-wp.left;\n                  ofy=-wp.top;\n                }\n\n                var fy = e.clientY + ofy;\n                var my = (fy-self.rail.drag.y);\n                var fx = e.clientX + ofx;\n                var mx = (fx-self.rail.drag.x);\n\n                var ny = self.rail.drag.st-my;\n\n                if (self.ishwscroll&&self.opt.bouncescroll) {\n                  if (ny<0) {\n                    ny = Math.round(ny/2);\n//                    fy = 0;\n                  }\n                  else if (ny>self.page.maxh) {\n                    ny = self.page.maxh+Math.round((ny-self.page.maxh)/2);\n//                    fy = 0;\n                  }\n                } else {\n                  if (ny<0) {ny=0;fy=0}\n                  if (ny>self.page.maxh) {ny=self.page.maxh;fy=0}\n                }\n\n                if (self.railh&&self.railh.scrollable) {\n                  var nx = self.rail.drag.sl-mx;\n\n                  if (self.ishwscroll&&self.opt.bouncescroll) {\n                    if (nx<0) {\n                      nx = Math.round(nx/2);\n//                      fx = 0;\n                    }\n                    else if (nx>self.page.maxw) {\n                      nx = self.page.maxw+Math.round((nx-self.page.maxw)/2);\n//                      fx = 0;\n                    }\n                  } else {\n                    if (nx<0) {nx=0;fx=0}\n                    if (nx>self.page.maxw) {nx=self.page.maxw;fx=0}\n                  }\n\n                }\n\n                var grabbed = false;\n                if (self.rail.drag.dl) {\n                  grabbed = true;\n                  if (self.rail.drag.dl==\"v\") nx = self.rail.drag.sl;\n                  else if (self.rail.drag.dl==\"h\") ny = self.rail.drag.st;\n                } else {\n                  var ay = Math.abs(my);\n                  var ax = Math.abs(mx);\n                  var dz = self.opt.directionlockdeadzone;\n                  if (self.rail.drag.ck==\"v\") {\n                    if (ay>dz&&(ax<=(ay*0.3))) {\n                      self.rail.drag = false;\n                      return true;\n                    }\n                    else if (ax>dz) {\n                      self.rail.drag.dl=\"f\";\n                      $(\"body\").scrollTop($(\"body\").scrollTop());  // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  }\n                  else if (self.rail.drag.ck==\"h\") {\n                    if (ax>dz&&(ay<=(ax*0.3))) {\n                      self.rail.drag = false;\n                      return true;\n                    }\n                    else if (ay>dz) {\n                      self.rail.drag.dl=\"f\";\n                      $(\"body\").scrollLeft($(\"body\").scrollLeft());  // stop iOS native scrolling (when active javascript has blocked)\n                    }\n                  }\n                }\n\n                self.synched(\"touchmove\",function(){\n                  if (self.rail.drag&&(self.rail.drag.pt==2)) {\n                    if (self.prepareTransition) self.prepareTransition(0);\n                    if (self.rail.scrollable) self.setScrollTop(ny);\n                    self.scrollmom.update(fx,fy);\n                    if (self.railh&&self.railh.scrollable) {\n                      self.setScrollLeft(nx);\n                      self.showCursor(ny,nx);\n                    } else {\n                      self.showCursor(ny);\n                    }\n                    if (cap.isie10) document.selection.clear();\n                  }\n                });\n\n                if (cap.ischrome&&self.istouchcapable) grabbed=false;  //chrome touch emulation doesn't like!\n                if (grabbed) return self.cancelEvent(e);\n              }\n\n            };\n\n          }\n\n          self.onmousedown = function(e,hronly) {\n            if (self.rail.drag&&self.rail.drag.pt!=1) return;\n            if (self.locked) return self.cancelEvent(e);\n            self.cancelScroll();\n            self.rail.drag = {x:e.clientX,y:e.clientY,sx:self.scroll.x,sy:self.scroll.y,pt:1,hr:(!!hronly)};\n            var tg = self.getTarget(e);\n            if (!self.ispage&&cap.hasmousecapture) tg.setCapture();\n            if (self.isiframe&&!cap.hasmousecapture) {\n              self.saved[\"csspointerevents\"] = self.doc.css(\"pointer-events\");\n              self.css(self.doc,{\"pointer-events\":\"none\"});\n            }\n            return self.cancelEvent(e);\n          };\n\n          self.onmouseup = function(e) {\n            if (self.rail.drag) {\n              if (cap.hasmousecapture) document.releaseCapture();\n              if (self.isiframe&&!cap.hasmousecapture) self.doc.css(\"pointer-events\",self.saved[\"csspointerevents\"]);\n              if(self.rail.drag.pt!=1)return;\n              self.rail.drag = false;\n              //if (!self.rail.active) self.hideCursor();\n              return self.cancelEvent(e);\n            }\n          };\n\n          self.onmousemove = function(e) {\n            if (self.rail.drag) {\n              if(self.rail.drag.pt!=1)return;\n\n              if (cap.ischrome&&e.which==0) return self.onmouseup(e);\n\n              self.cursorfreezed = true;\n\n              if (self.rail.drag.hr) {\n                self.scroll.x = self.rail.drag.sx + (e.clientX-self.rail.drag.x);\n                if (self.scroll.x<0) self.scroll.x=0;\n                var mw = self.scrollvaluemaxw;\n                if (self.scroll.x>mw) self.scroll.x=mw;\n              } else {\n                self.scroll.y = self.rail.drag.sy + (e.clientY-self.rail.drag.y);\n                if (self.scroll.y<0) self.scroll.y=0;\n                var my = self.scrollvaluemax;\n                if (self.scroll.y>my) self.scroll.y=my;\n              }\n\n              self.synched('mousemove',function(){\n                if (self.rail.drag&&(self.rail.drag.pt==1)) {\n                  self.showCursor();\n                  if (self.rail.drag.hr) self.doScrollLeft(Math.round(self.scroll.x*self.scrollratio.x),self.opt.cursordragspeed);\n                  else self.doScrollTop(Math.round(self.scroll.y*self.scrollratio.y),self.opt.cursordragspeed);\n                }\n              });\n\n              return self.cancelEvent(e);\n            }\n/*\n            else {\n              self.checkarea = true;\n            }\n*/\n          };\n\n          if (cap.cantouch||self.opt.touchbehavior) {\n\n            self.onpreventclick = function(e) {\n              if (self.preventclick) {\n                self.preventclick.tg.onclick = self.preventclick.click;\n                self.preventclick = false;\n                return self.cancelEvent(e);\n              }\n            }\n\n//            self.onmousedown = self.ontouchstart;\n//            self.onmouseup = self.ontouchend;\n//            self.onmousemove = self.ontouchmove;\n\n            self.bind(self.win,\"mousedown\",self.ontouchstart);  // control content dragging\n\n            self.onclick = (cap.isios) ? false : function(e) {\n              if (self.lastmouseup) {\n                self.lastmouseup = false;\n                return self.cancelEvent(e);\n              } else {\n                return true;\n              }\n            };\n\n            if (self.opt.grabcursorenabled&&cap.cursorgrabvalue) {\n              self.css((self.ispage)?self.doc:self.win,{'cursor':cap.cursorgrabvalue});\n              self.css(self.rail,{'cursor':cap.cursorgrabvalue});\n            }\n\n          } else {\n\n            function checkSelectionScroll(e) {\n              if (!self.selectiondrag) return;\n\n              if (e) {\n                var ww = self.win.outerHeight();\n                var df = (e.pageY - self.selectiondrag.top);\n                if (df>0&&df<ww) df=0;\n                if (df>=ww) df-=ww;\n                self.selectiondrag.df = df;\n              }\n              if (self.selectiondrag.df==0) return;\n\n              var rt = -Math.floor(self.selectiondrag.df/6)*2;\n//              self.doScrollTop(self.getScrollTop(true)+rt);\n              self.doScrollBy(rt);\n\n              self.debounced(\"doselectionscroll\",function(){checkSelectionScroll()},50);\n            }\n\n            if (\"getSelection\" in document) {  // A grade - Major browsers\n              self.hasTextSelected = function() {\n                return (document.getSelection().rangeCount>0);\n              }\n            }\n            else if (\"selection\" in document) {  //IE9-\n              self.hasTextSelected = function() {\n                return (document.selection.type != \"None\");\n              }\n            }\n            else {\n              self.hasTextSelected = function() {  // no support\n                return false;\n              }\n            }\n\n            self.onselectionstart = function(e) {\n              if (self.ispage) return;\n              self.selectiondrag = self.win.offset();\n            }\n            self.onselectionend = function(e) {\n              self.selectiondrag = false;\n            }\n            self.onselectiondrag = function(e) {\n              if (!self.selectiondrag) return;\n              if (self.hasTextSelected()) self.debounced(\"selectionscroll\",function(){checkSelectionScroll(e)},250);\n            }\n\n\n          }\n\n          if (cap.hasmstouch) {\n            self.css(self.rail,{'-ms-touch-action':'none'});\n            self.css(self.cursor,{'-ms-touch-action':'none'});\n\n            self.bind(self.win,\"MSPointerDown\",self.ontouchstart);\n            self.bind(document,\"MSPointerUp\",self.ontouchend);\n            self.bind(document,\"MSPointerMove\",self.ontouchmove);\n            self.bind(self.cursor,\"MSGestureHold\",function(e){e.preventDefault()});\n            self.bind(self.cursor,\"contextmenu\",function(e){e.preventDefault()});\n          }\n\n          if (this.istouchcapable) {  //desktop with screen touch enabled\n            self.bind(self.win,\"touchstart\",self.ontouchstart);\n            self.bind(document,\"touchend\",self.ontouchend);\n            self.bind(document,\"touchcancel\",self.ontouchend);\n            self.bind(document,\"touchmove\",self.ontouchmove);\n          }\n\n          self.bind(self.cursor,\"mousedown\",self.onmousedown);\n          self.bind(self.cursor,\"mouseup\",self.onmouseup);\n\n          if (self.railh) {\n            self.bind(self.cursorh,\"mousedown\",function(e){self.onmousedown(e,true)});\n            self.bind(self.cursorh,\"mouseup\",function(e){\n              if (self.rail.drag&&self.rail.drag.pt==2) return;\n              self.rail.drag = false;\n              self.hasmoving = false;\n              self.hideCursor();\n              if (cap.hasmousecapture) document.releaseCapture();\n              return self.cancelEvent(e);\n            });\n          }\n\n          if (self.opt.cursordragontouch||!cap.cantouch&&!self.opt.touchbehavior) {\n\n            self.rail.css({\"cursor\":\"default\"});\n            self.railh&&self.railh.css({\"cursor\":\"default\"});\n\n            self.jqbind(self.rail,\"mouseenter\",function() {\n              if (self.canshowonmouseevent) self.showCursor();\n              self.rail.active = true;\n            });\n            self.jqbind(self.rail,\"mouseleave\",function() {\n              self.rail.active = false;\n              if (!self.rail.drag) self.hideCursor();\n            });\n\n            if (self.opt.sensitiverail) {\n              self.bind(self.rail,\"click\",function(e){self.doRailClick(e,false,false)});\n              self.bind(self.rail,\"dblclick\",function(e){self.doRailClick(e,true,false)});\n              self.bind(self.cursor,\"click\",function(e){self.cancelEvent(e)});\n              self.bind(self.cursor,\"dblclick\",function(e){self.cancelEvent(e)});\n            }\n\n            if (self.railh) {\n              self.jqbind(self.railh,\"mouseenter\",function() {\n                if (self.canshowonmouseevent) self.showCursor();\n                self.rail.active = true;\n              });\n              self.jqbind(self.railh,\"mouseleave\",function() {\n                self.rail.active = false;\n                if (!self.rail.drag) self.hideCursor();\n              });\n\n              if (self.opt.sensitiverail) {\n                self.bind(self.railh, \"click\", function(e){self.doRailClick(e,false,true)});\n                self.bind(self.railh, \"dblclick\", function(e){self.doRailClick(e, true, true) });\n                self.bind(self.cursorh, \"click\", function (e) { self.cancelEvent(e) });\n                self.bind(self.cursorh, \"dblclick\", function (e) { self.cancelEvent(e) });\n              }\n\n            }\n\n          }\n\n          if (!cap.cantouch&&!self.opt.touchbehavior) {\n\n            self.bind((cap.hasmousecapture)?self.win:document,\"mouseup\",self.onmouseup);\n            self.bind(document,\"mousemove\",self.onmousemove);\n            if (self.onclick) self.bind(document,\"click\",self.onclick);\n\n            if (!self.ispage&&self.opt.enablescrollonselection) {\n              self.bind(self.win[0],\"mousedown\",self.onselectionstart);\n              self.bind(document,\"mouseup\",self.onselectionend);\n              self.bind(self.cursor,\"mouseup\",self.onselectionend);\n              if (self.cursorh) self.bind(self.cursorh,\"mouseup\",self.onselectionend);\n              self.bind(document,\"mousemove\",self.onselectiondrag);\n            }\n\n\t\t\t\t\t\tif (self.zoom) {\n\t\t\t\t\t\t\tself.jqbind(self.zoom,\"mouseenter\",function() {\n\t\t\t\t\t\t\t\tif (self.canshowonmouseevent) self.showCursor();\n\t\t\t\t\t\t\t\tself.rail.active = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tself.jqbind(self.zoom,\"mouseleave\",function() {\n\t\t\t\t\t\t\t\tself.rail.active = false;\n\t\t\t\t\t\t\t\tif (!self.rail.drag) self.hideCursor();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n          } else {\n\n            self.bind((cap.hasmousecapture)?self.win:document,\"mouseup\",self.ontouchend);\n            self.bind(document,\"mousemove\",self.ontouchmove);\n            if (self.onclick) self.bind(document,\"click\",self.onclick);\n\n            if (self.opt.cursordragontouch) {\n              self.bind(self.cursor,\"mousedown\",self.onmousedown);\n              self.bind(self.cursor,\"mousemove\",self.onmousemove);\n              self.cursorh&&self.bind(self.cursorh,\"mousedown\",self.onmousedown);\n              self.cursorh&&self.bind(self.cursorh,\"mousemove\",self.onmousemove);\n            }\n\n          }\n\n\t\t\t\t\tif (self.opt.enablemousewheel) {\n\t\t\t\t\t\tif (!self.isiframe) self.bind((cap.isie&&self.ispage) ? document : self.win /*self.docscroll*/ ,\"mousewheel\",self.onmousewheel);\n\t\t\t\t\t\tself.bind(self.rail,\"mousewheel\",self.onmousewheel);\n\t\t\t\t\t\tif (self.railh) self.bind(self.railh,\"mousewheel\",self.onmousewheelhr);\n\t\t\t\t\t}\n\n          if (!self.ispage&&!cap.cantouch&&!(/HTML|BODY/.test(self.win[0].nodeName))) {\n            if (!self.win.attr(\"tabindex\")) self.win.attr({\"tabindex\":tabindexcounter++});\n\n            self.jqbind(self.win,\"focus\",function(e) {\n              domfocus = (self.getTarget(e)).id||true;\n              self.hasfocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win,\"blur\",function(e) {\n              domfocus = false;\n              self.hasfocus = false;\n            });\n\n            self.jqbind(self.win,\"mouseenter\",function(e) {\n              mousefocus = (self.getTarget(e)).id||true;\n              self.hasmousefocus = true;\n              if (self.canshowonmouseevent) self.noticeCursor();\n            });\n            self.jqbind(self.win,\"mouseleave\",function() {\n              mousefocus = false;\n              self.hasmousefocus = false;\n            });\n\n          };\n\n        }  // !ie9mobile\n\n        //Thanks to http://www.quirksmode.org !!\n        self.onkeypress = function(e) {\n          if (self.locked&&self.page.maxh==0) return true;\n\n          e = (e) ? e : window.e;\n          var tg = self.getTarget(e);\n          if (tg&&/INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {\n            var tp = tg.getAttribute('type')||tg.type||false;\n            if ((!tp)||!(/submit|button|cancel/i.tp)) return true;\n          }\n\n          if (self.hasfocus||(self.hasmousefocus&&!domfocus)||(self.ispage&&!domfocus&&!mousefocus)) {\n            var key = e.keyCode;\n\n            if (self.locked&&key!=27) return self.cancelEvent(e);\n\n            var ctrl = e.ctrlKey||false;\n            var shift = e.shiftKey || false;\n\n            var ret = false;\n            switch (key) {\n              case 38:\n              case 63233: //safari\n                self.doScrollBy(24*3);\n                ret = true;\n                break;\n              case 40:\n              case 63235: //safari\n                self.doScrollBy(-24*3);\n                ret = true;\n                break;\n              case 37:\n              case 63232: //safari\n                if (self.railh) {\n                  (ctrl) ? self.doScrollLeft(0) : self.doScrollLeftBy(24*3);\n                  ret = true;\n                }\n                break;\n              case 39:\n              case 63234: //safari\n                if (self.railh) {\n                  (ctrl) ? self.doScrollLeft(self.page.maxw) : self.doScrollLeftBy(-24*3);\n                  ret = true;\n                }\n                break;\n              case 33:\n              case 63276: // safari\n                self.doScrollBy(self.view.h);\n                ret = true;\n                break;\n              case 34:\n              case 63277: // safari\n                self.doScrollBy(-self.view.h);\n                ret = true;\n                break;\n              case 36:\n              case 63273: // safari\n                (self.railh&&ctrl) ? self.doScrollPos(0,0) : self.doScrollTo(0);\n                ret = true;\n                break;\n              case 35:\n              case 63275: // safari\n                (self.railh&&ctrl) ? self.doScrollPos(self.page.maxw,self.page.maxh) : self.doScrollTo(self.page.maxh);\n                ret = true;\n                break;\n              case 32:\n                if (self.opt.spacebarenabled) {\n                  (shift) ? self.doScrollBy(self.view.h) : self.doScrollBy(-self.view.h);\n                  ret = true;\n                }\n                break;\n              case 27: // ESC\n                if (self.zoomactive) {\n                  self.doZoom();\n                  ret = true;\n                }\n                break;\n            }\n            if (ret) return self.cancelEvent(e);\n          }\n        };\n\n        if (self.opt.enablekeyboard) self.bind(document,(cap.isopera&&!cap.isopera12)?\"keypress\":\"keydown\",self.onkeypress);\n\n        self.bind(window,'resize',self.lazyResize);\n        self.bind(window,'orientationchange',self.lazyResize);\n\n        self.bind(window,\"load\",self.lazyResize);\n\n        if (cap.ischrome&&!self.ispage&&!self.haswrapper) { //chrome void scrollbar bug - it persists in version 26\n          var tmp=self.win.attr(\"style\");\n\t\t\t\t\tvar ww = parseFloat(self.win.css(\"width\"))+1;\n          self.win.css('width',ww);\n          self.synched(\"chromefix\",function(){self.win.attr(\"style\",tmp)});\n        }\n\n\n// Trying a cross-browser implementation - good luck!\n\n        self.onAttributeChange = function(e) {\n          self.lazyResize(250);\n        }\n\n        if (!self.ispage&&!self.haswrapper) {\n          // redesigned MutationObserver for Chrome18+/Firefox14+/iOS6+ with support for: remove div, add/remove content\n          if (clsMutationObserver !== false) {\n            self.observer = new clsMutationObserver(function(mutations) {\n              mutations.forEach(self.onAttributeChange);\n            });\n            self.observer.observe(self.win[0],{childList: true, characterData: false, attributes: true, subtree: false});\n\n            self.observerremover = new clsMutationObserver(function(mutations) {\n               mutations.forEach(function(mo){\n                 if (mo.removedNodes.length>0) {\n                   for (var dd in mo.removedNodes) {\n                     if (mo.removedNodes[dd]==self.win[0]) return self.remove();\n                   }\n                 }\n               });\n            });\n            self.observerremover.observe(self.win[0].parentNode,{childList: true, characterData: false, attributes: false, subtree: false});\n\n          } else {\n            self.bind(self.win,(cap.isie&&!cap.isie9)?\"propertychange\":\"DOMAttrModified\",self.onAttributeChange);\n            if (cap.isie9) self.win[0].attachEvent(\"onpropertychange\",self.onAttributeChange); //IE9 DOMAttrModified bug\n            self.bind(self.win,\"DOMNodeRemoved\",function(e){\n              if (e.target==self.win[0]) self.remove();\n            });\n          }\n        }\n\n//\n\n        if (!self.ispage&&self.opt.boxzoom) self.bind(window,\"resize\",self.resizeZoom);\n        if (self.istextarea) self.bind(self.win,\"mouseup\",self.lazyResize);\n\n        self.checkrtlmode = true;\n        self.lazyResize(30);\n\n      }\n\n      if (this.doc[0].nodeName == 'IFRAME') {\n        function oniframeload(e) {\n          self.iframexd = false;\n          try {\n            var doc = 'contentDocument' in this ? this.contentDocument : this.contentWindow.document;\n            var a = doc.domain;\n          } catch(e){self.iframexd = true;doc=false};\n\n          if (self.iframexd) {\n            if (\"console\" in window) console.log('NiceScroll error: policy restriced iframe');\n            return true;  //cross-domain - I can't manage this\n          }\n\n          self.forcescreen = true;\n\n          if (self.isiframe) {\n            self.iframe = {\n              \"doc\":$(doc),\n              \"html\":self.doc.contents().find('html')[0],\n              \"body\":self.doc.contents().find('body')[0]\n            };\n            self.getContentSize = function(){\n              return {\n                w:Math.max(self.iframe.html.scrollWidth,self.iframe.body.scrollWidth),\n                h:Math.max(self.iframe.html.scrollHeight,self.iframe.body.scrollHeight)\n              }\n            }\n            self.docscroll = $(self.iframe.body);//$(this.contentWindow);\n          }\n\n          if (!cap.isios&&self.opt.iframeautoresize&&!self.isiframe) {\n            self.win.scrollTop(0); // reset position\n            self.doc.height(\"\");  //reset height to fix browser bug\n            var hh=Math.max(doc.getElementsByTagName('html')[0].scrollHeight,doc.body.scrollHeight);\n            self.doc.height(hh);\n          }\n          self.lazyResize(30);\n\n          if (cap.isie7) self.css($(self.iframe.html),{'overflow-y':'hidden'});\n          //self.css($(doc.body),{'overflow-y':'hidden'});\n          self.css($(self.iframe.body),{'overflow-y':'hidden'});\n\n          if (cap.isios&&self.haswrapper) {\n            self.css($(doc.body),{'-webkit-transform':'translate3d(0,0,0)'});  // avoid iFrame content clipping - thanks to http://blog.derraab.com/2012/04/02/avoid-iframe-content-clipping-with-css-transform-on-ios/\n\n            console.log(1);\n\n          }\n\n          if ('contentWindow' in this) {\n            self.bind(this.contentWindow,\"scroll\",self.onscroll);  //IE8 & minor\n          } else {\n            self.bind(doc,\"scroll\",self.onscroll);\n          }\n\n          if (self.opt.enablemousewheel) {\n            self.bind(doc,\"mousewheel\",self.onmousewheel);\n          }\n\n          if (self.opt.enablekeyboard) self.bind(doc,(cap.isopera)?\"keypress\":\"keydown\",self.onkeypress);\n\n          if (cap.cantouch||self.opt.touchbehavior) {\n            self.bind(doc,\"mousedown\",self.ontouchstart);\n            self.bind(doc,\"mousemove\",function(e){self.ontouchmove(e,true)});\n            if (self.opt.grabcursorenabled&&cap.cursorgrabvalue) self.css($(doc.body),{'cursor':cap.cursorgrabvalue});\n          }\n\n          self.bind(doc,\"mouseup\",self.ontouchend);\n\n          if (self.zoom) {\n            if (self.opt.dblclickzoom) self.bind(doc,'dblclick',self.doZoom);\n            if (self.ongesturezoom) self.bind(doc,\"gestureend\",self.ongesturezoom);\n          }\n        };\n\n        if (this.doc[0].readyState&&this.doc[0].readyState==\"complete\"){\n          setTimeout(function(){oniframeload.call(self.doc[0],false)},500);\n        }\n        self.bind(this.doc,\"load\",oniframeload);\n\n      }\n\n    };\n\n    this.showCursor = function(py,px) {\n      if (self.cursortimeout) {\n        clearTimeout(self.cursortimeout);\n        self.cursortimeout = 0;\n      }\n      if (!self.rail) return;\n      if (self.autohidedom) {\n        self.autohidedom.stop().css({opacity:self.opt.cursoropacitymax});\n        self.cursoractive = true;\n      }\n\n      if (!self.rail.drag||self.rail.drag.pt!=1) {\n        if ((typeof py != \"undefined\")&&(py!==false)) {\n          self.scroll.y = Math.round(py * 1/self.scrollratio.y);\n        }\n        if (typeof px != \"undefined\") {\n          self.scroll.x = Math.round(px * 1/self.scrollratio.x);\n        }\n      }\n\n      self.cursor.css({height:self.cursorheight,top:self.scroll.y});\n      if (self.cursorh) {\n        (!self.rail.align&&self.rail.visibility) ? self.cursorh.css({width:self.cursorwidth,left:self.scroll.x+self.rail.width}) : self.cursorh.css({width:self.cursorwidth,left:self.scroll.x});\n        self.cursoractive = true;\n      }\n\n      if (self.zoom) self.zoom.stop().css({opacity:self.opt.cursoropacitymax});\n    };\n\n    this.hideCursor = function(tm) {\n      if (self.cursortimeout) return;\n      if (!self.rail) return;\n      if (!self.autohidedom) return;\n      self.cursortimeout = setTimeout(function() {\n         if (!self.rail.active||!self.showonmouseevent) {\n           self.autohidedom.stop().animate({opacity:self.opt.cursoropacitymin});\n           if (self.zoom) self.zoom.stop().animate({opacity:self.opt.cursoropacitymin});\n           self.cursoractive = false;\n         }\n         self.cursortimeout = 0;\n      },tm||self.opt.hidecursordelay);\n    };\n\n    this.noticeCursor = function(tm,py,px) {\n      self.showCursor(py,px);\n      if (!self.rail.active) self.hideCursor(tm);\n    };\n\n    this.getContentSize =\n      (self.ispage) ?\n        function(){\n          return {\n            w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),\n            h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)\n          }\n        }\n      : (self.haswrapper) ?\n        function(){\n          return {\n            w:self.doc.outerWidth()+parseInt(self.win.css('paddingLeft'))+parseInt(self.win.css('paddingRight')),\n            h:self.doc.outerHeight()+parseInt(self.win.css('paddingTop'))+parseInt(self.win.css('paddingBottom'))\n          }\n        }\n      : function() {\n        return {\n          w:self.docscroll[0].scrollWidth,\n          h:self.docscroll[0].scrollHeight\n        }\n      };\n\n    this.onResize = function(e,page) {\n\n\t  if (!self.win) return false;\n\n      if (!self.haswrapper&&!self.ispage) {\n        if (self.win.css('display')=='none') {\n          if (self.visibility) self.hideRail().hideRailHr();\n          return false;\n        } else {\n          if (!self.hidden&&!self.visibility) self.showRail().showRailHr();\n        }\n      }\n\n      var premaxh = self.page.maxh;\n      var premaxw = self.page.maxw;\n\n      var preview = {h:self.view.h,w:self.view.w};\n\n      self.view = {\n        w:(self.ispage) ? self.win.width() : parseInt(self.win[0].clientWidth),\n        h:(self.ispage) ? self.win.height() : parseInt(self.win[0].clientHeight)\n      };\n\n      self.page = (page) ? page : self.getContentSize();\n\n      self.page.maxh = Math.max(0,self.page.h - self.view.h);\n      self.page.maxw = Math.max(0,self.page.w - self.view.w);\n\n      if ((self.page.maxh==premaxh)&&(self.page.maxw==premaxw)&&(self.view.w==preview.w)) {\n        // test position\n        if (!self.ispage) {\n          var pos = self.win.offset();\n          if (self.lastposition) {\n            var lst = self.lastposition;\n            if ((lst.top==pos.top)&&(lst.left==pos.left)) return self; //nothing to do\n          }\n          self.lastposition = pos;\n        } else {\n          return self; //nothing to do\n        }\n      }\n\n      if (self.page.maxh==0) {\n        self.hideRail();\n        self.scrollvaluemax = 0;\n        self.scroll.y = 0;\n        self.scrollratio.y = 0;\n        self.cursorheight = 0;\n        self.setScrollTop(0);\n        self.rail.scrollable = false;\n      } else {\n        self.rail.scrollable = true;\n      }\n\n      if (self.page.maxw==0) {\n        self.hideRailHr();\n        self.scrollvaluemaxw = 0;\n        self.scroll.x = 0;\n        self.scrollratio.x = 0;\n        self.cursorwidth = 0;\n        self.setScrollLeft(0);\n        self.railh.scrollable = false;\n      } else {\n        self.railh.scrollable = true;\n      }\n\n      self.locked = (self.page.maxh==0)&&(self.page.maxw==0);\n      if (self.locked) {\n\t\t\t\tif (!self.ispage) self.updateScrollBar(self.view);\n\t\t\t  return false;\n\t\t  }\n\n      if (!self.hidden&&!self.visibility) {\n        self.showRail().showRailHr();\n      }\n      else if (!self.hidden&&!self.railh.visibility) self.showRailHr();\n\n      if (self.istextarea&&self.win.css('resize')&&self.win.css('resize')!='none') self.view.h-=20;\n\n      self.cursorheight = Math.min(self.view.h,Math.round(self.view.h * (self.view.h / self.page.h)));\n      self.cursorheight = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight,self.cursorheight);\n\n      self.cursorwidth = Math.min(self.view.w,Math.round(self.view.w * (self.view.w / self.page.w)));\n      self.cursorwidth = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight,self.cursorwidth);\n\n      self.scrollvaluemax = self.view.h-self.cursorheight-self.cursor.hborder;\n\n      if (self.railh) {\n        self.railh.width = (self.page.maxh>0) ? (self.view.w-self.rail.width) : self.view.w;\n        self.scrollvaluemaxw = self.railh.width-self.cursorwidth-self.cursorh.wborder;\n      }\n\n      if (self.checkrtlmode&&self.railh) {\n        self.checkrtlmode = false;\n        if (self.opt.rtlmode&&self.scroll.x==0) self.setScrollLeft(self.page.maxw);\n      }\n\n      if (!self.ispage) self.updateScrollBar(self.view);\n\n      self.scrollratio = {\n        x:(self.page.maxw/self.scrollvaluemaxw),\n        y:(self.page.maxh/self.scrollvaluemax)\n      };\n\n      var sy = self.getScrollTop();\n      if (sy>self.page.maxh) {\n        self.doScrollTop(self.page.maxh);\n      } else {\n        self.scroll.y = Math.round(self.getScrollTop() * (1/self.scrollratio.y));\n        self.scroll.x = Math.round(self.getScrollLeft() * (1/self.scrollratio.x));\n        if (self.cursoractive) self.noticeCursor();\n      }\n\n      if (self.scroll.y&&(self.getScrollTop()==0)) self.doScrollTo(Math.floor(self.scroll.y*self.scrollratio.y));\n\n      return self;\n    };\n\n    this.resize = self.onResize;\n\n    this.lazyResize = function(tm) {   // event debounce\n      tm = (isNaN(tm)) ? 30 : tm;\n      self.delayed('resize',self.resize,tm);\n      return self;\n    }\n\n// modified by MDN https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/wheel\n    function _modernWheelEvent(dom,name,fn,bubble) {\n      self._bind(dom,name,function(e){\n        var  e = (e) ? e : window.event;\n        var event = {\n          original: e,\n          target: e.target || e.srcElement,\n          type: \"wheel\",\n          deltaMode: e.type == \"MozMousePixelScroll\" ? 0 : 1,\n          deltaX: 0,\n          deltaZ: 0,\n          preventDefault: function() {\n            e.preventDefault ? e.preventDefault() : e.returnValue = false;\n            return false;\n          },\n          stopImmediatePropagation: function() {\n            (e.stopImmediatePropagation) ? e.stopImmediatePropagation() : e.cancelBubble = true;\n          }\n        };\n\n        if (name==\"mousewheel\") {\n          event.deltaY = - 1/40 * e.wheelDelta;\n          e.wheelDeltaX && (event.deltaX = - 1/40 * e.wheelDeltaX);\n        } else {\n          event.deltaY = e.detail;\n        }\n\n        return fn.call(dom,event);\n      },bubble);\n    };\n\n    this._bind = function(el,name,fn,bubble) {  // primitive bind\n      self.events.push({e:el,n:name,f:fn,b:bubble,q:false});\n      if (el.addEventListener) {\n        el.addEventListener(name,fn,bubble||false);\n      }\n      else if (el.attachEvent) {\n        el.attachEvent(\"on\"+name,fn);\n      }\n      else {\n        el[\"on\"+name] = fn;\n      }\n    };\n\n    this.jqbind = function(dom,name,fn) {  // use jquery bind for non-native events (mouseenter/mouseleave)\n      self.events.push({e:dom,n:name,f:fn,q:true});\n      $(dom).bind(name,fn);\n    }\n\n    this.bind = function(dom,name,fn,bubble) {  // touch-oriented & fixing jquery bind\n      var el = (\"jquery\" in dom) ? dom[0] : dom;\n\n      if (name=='mousewheel') {\n        if (\"onwheel\" in self.win) {\n          self._bind(el,\"wheel\",fn,bubble||false);\n        } else {\n          var wname = (typeof document.onmousewheel != \"undefined\") ? \"mousewheel\" : \"DOMMouseScroll\";  // older IE/Firefox\n          _modernWheelEvent(el,wname,fn,bubble||false);\n          if (wname==\"DOMMouseScroll\") _modernWheelEvent(el,\"MozMousePixelScroll\",fn,bubble||false);  // Firefox legacy\n        }\n      }\n      else if (el.addEventListener) {\n        if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) {  // touch device support\n          var tt=(name=='mousedown')?'touchstart':(name=='mouseup')?'touchend':'touchmove';\n          self._bind(el,tt,function(e){\n            if (e.touches) {\n              if (e.touches.length<2) {var ev=(e.touches.length)?e.touches[0]:e;ev.original=e;fn.call(this,ev);}\n            }\n            else if (e.changedTouches) {var ev=e.changedTouches[0];ev.original=e;fn.call(this,ev);}  //blackberry\n          },bubble||false);\n        }\n        self._bind(el,name,fn,bubble||false);\n        if (cap.cantouch && name==\"mouseup\") self._bind(el,\"touchcancel\",fn,bubble||false);\n      }\n      else {\n        self._bind(el,name,function(e) {\n          e = e||window.event||false;\n          if (e) {\n            if (e.srcElement) e.target=e.srcElement;\n          }\n          if (!(\"pageY\" in e)) {\n            e.pageX = e.clientX + document.documentElement.scrollLeft;\n            e.pageY = e.clientY + document.documentElement.scrollTop;\n          }\n          return ((fn.call(el,e)===false)||bubble===false) ? self.cancelEvent(e) : true;\n        });\n      }\n    };\n\n    this._unbind = function(el,name,fn,bub) {  // primitive unbind\n      if (el.removeEventListener) {\n        el.removeEventListener(name,fn,bub);\n      }\n      else if (el.detachEvent) {\n        el.detachEvent('on'+name,fn);\n      } else {\n        el['on'+name] = false;\n      }\n    };\n\n    this.unbindAll = function() {\n      for(var a=0;a<self.events.length;a++) {\n        var r = self.events[a];\n        (r.q) ? r.e.unbind(r.n,r.f) : self._unbind(r.e,r.n,r.f,r.b);\n      }\n    };\n\n    // Thanks to http://www.switchonthecode.com !!\n    this.cancelEvent = function(e) {\n      var e = (e.original) ? e.original : (e) ? e : window.event||false;\n      if (!e) return false;\n      if(e.preventDefault) e.preventDefault();\n      if(e.stopPropagation) e.stopPropagation();\n      if(e.preventManipulation) e.preventManipulation();  //IE10\n      e.cancelBubble = true;\n      e.cancel = true;\n      e.returnValue = false;\n      return false;\n    };\n\n    this.stopPropagation = function(e) {\n      var e = (e.original) ? e.original : (e) ? e : window.event||false;\n      if (!e) return false;\n      if (e.stopPropagation) return e.stopPropagation();\n      if (e.cancelBubble) e.cancelBubble=true;\n      return false;\n    }\n\n    this.showRail = function() {\n      if ((self.page.maxh!=0)&&(self.ispage||self.win.css('display')!='none')) {\n        self.visibility = true;\n        self.rail.visibility = true;\n        self.rail.css('display','block');\n      }\n      return self;\n    };\n\n    this.showRailHr = function() {\n      if (!self.railh) return self;\n      if ((self.page.maxw!=0)&&(self.ispage||self.win.css('display')!='none')) {\n        self.railh.visibility = true;\n        self.railh.css('display','block');\n      }\n      return self;\n    };\n\n    this.hideRail = function() {\n      self.visibility = false;\n      self.rail.visibility = false;\n      self.rail.css('display','none');\n      return self;\n    };\n\n    this.hideRailHr = function() {\n      if (!self.railh) return self;\n      self.railh.visibility = false;\n      self.railh.css('display','none');\n      return self;\n    };\n\n    this.show = function() {\n      self.hidden = false;\n      self.locked = false;\n      return self.showRail().showRailHr();\n    };\n\n    this.hide = function() {\n      self.hidden = true;\n      self.locked = true;\n      return self.hideRail().hideRailHr();\n    };\n\n    this.toggle = function() {\n      return (self.hidden) ? self.show() : self.hide();\n    };\n\n    this.remove = function() {\n      self.stop();\n      if (self.cursortimeout) clearTimeout(self.cursortimeout);\n      self.doZoomOut();\n      self.unbindAll();\n\n      if (cap.isie9) self.win[0].detachEvent(\"onpropertychange\",self.onAttributeChange); //IE9 DOMAttrModified bug\n\n      if (self.observer !== false) self.observer.disconnect();\n      if (self.observerremover !== false) self.observerremover.disconnect();\n\n      self.events = null;\n\n      if (self.cursor) {\n        self.cursor.remove();\n      }\n      if (self.cursorh) {\n        self.cursorh.remove();\n      }\n      if (self.rail) {\n        self.rail.remove();\n      }\n      if (self.railh) {\n        self.railh.remove();\n      }\n      if (self.zoom) {\n        self.zoom.remove();\n      }\n      for(var a=0;a<self.saved.css.length;a++) {\n        var d=self.saved.css[a];\n        d[0].css(d[1],(typeof d[2]==\"undefined\") ? '' : d[2]);\n      }\n      self.saved = false;\n      self.me.data('__nicescroll',''); //erase all traces\n\n      // memory leak fixed by GianlucaGuarini - thanks a lot!\n      // remove the current nicescroll from the $.nicescroll array & normalize array\n      var lst = $.nicescroll;\n      lst.each(function(i){\n        if (!this) return;\n        if(this.id === self.id) {\n          delete lst[i];\n          for(var b=++i;b<lst.length;b++,i++) lst[i]=lst[b];\n          lst.length--;\n          if (lst.length) delete lst[lst.length];\n        }\n      });\n\n      for (var i in self) {\n        self[i] = null;\n        delete self[i];\n      }\n\n      self = null;\n\n    };\n\n    this.scrollstart = function(fn) {\n      this.onscrollstart = fn;\n      return self;\n    }\n    this.scrollend = function(fn) {\n      this.onscrollend = fn;\n      return self;\n    }\n    this.scrollcancel = function(fn) {\n      this.onscrollcancel = fn;\n      return self;\n    }\n\n    this.zoomin = function(fn) {\n      this.onzoomin = fn;\n      return self;\n    }\n    this.zoomout = function(fn) {\n      this.onzoomout = fn;\n      return self;\n    }\n\n    this.isScrollable = function(e) {\n      var dom = (e.target) ? e.target : e;\n      if (dom.nodeName == 'OPTION') return true;\n      while (dom&&(dom.nodeType==1)&&!(/BODY|HTML/.test(dom.nodeName))) {\n        var dd = $(dom);\n        var ov = dd.css('overflowY')||dd.css('overflowX')||dd.css('overflow')||'';\n        if (/scroll|auto/.test(ov)) return (dom.clientHeight!=dom.scrollHeight);\n        dom = (dom.parentNode) ? dom.parentNode : false;\n      }\n      return false;\n    };\n\n    this.getViewport = function(me) {\n      var dom = (me&&me.parentNode) ? me.parentNode : false;\n      while (dom&&(dom.nodeType==1)&&!(/BODY|HTML/.test(dom.nodeName))) {\n        var dd = $(dom);\n        var ov = dd.css('overflowY')||dd.css('overflowX')||dd.css('overflow')||'';\n        if ((/scroll|auto/.test(ov))&&(dom.clientHeight!=dom.scrollHeight)) return dd;\n        if (dd.getNiceScroll().length>0) return dd;\n        dom = (dom.parentNode) ? dom.parentNode : false;\n      }\n      return false;\n    };\n\n    function execScrollWheel(e,hr,chkscroll) {\n      var px,py;\n      var rt = 1;\n\n      if (e.deltaMode==0) {  // PIXEL\n        px = -Math.floor(e.deltaX*(self.opt.mousescrollstep/(18*3)));\n        py = -Math.floor(e.deltaY*(self.opt.mousescrollstep/(18*3)));\n      }\n      else if (e.deltaMode==1) {  // LINE\n        px = -Math.floor(e.deltaX*self.opt.mousescrollstep);\n        py = -Math.floor(e.deltaY*self.opt.mousescrollstep);\n      }\n\n      if (hr&&self.opt.oneaxismousemode&&(px==0)&&py) {  // classic vertical-only mousewheel + browser with x/y support\n        px = py;\n        py = 0;\n      }\n\n      if (px) {\n        if (self.scrollmom) {self.scrollmom.stop()}\n        self.lastdeltax+=px;\n        self.debounced(\"mousewheelx\",function(){var dt=self.lastdeltax;self.lastdeltax=0;if(!self.rail.drag){self.doScrollLeftBy(dt)}},120);\n      }\n      if (py) {\n        if (self.opt.nativeparentscrolling&&chkscroll&&!self.ispage&&!self.zoomactive) {\n          if (py<0) {\n            if (self.getScrollTop()>=self.page.maxh) return true;\n          } else {\n            if (self.getScrollTop()<=0) return true;\n          }\n        }\n        if (self.scrollmom) {self.scrollmom.stop()}\n        self.lastdeltay+=py;\n        self.debounced(\"mousewheely\",function(){var dt=self.lastdeltay;self.lastdeltay=0;if(!self.rail.drag){self.doScrollBy(dt)}},120);\n      }\n\n      e.stopImmediatePropagation();\n      return e.preventDefault();\n//      return self.cancelEvent(e);\n    };\n\n    this.onmousewheel = function(e) {\n      if (self.locked) {\n        self.debounced(\"checkunlock\",self.resize,250);\n        return true;\n      }\n      if (self.rail.drag) return self.cancelEvent(e);\n\n      if (self.opt.oneaxismousemode==\"auto\"&&e.deltaX!=0) self.opt.oneaxismousemode = false;  // check two-axis mouse support (not very elegant)\n\n      if (self.opt.oneaxismousemode&&e.deltaX==0) {\n        if (!self.rail.scrollable) {\n          if (self.railh&&self.railh.scrollable) {\n            return self.onmousewheelhr(e);\n          } else {\n            return true;\n          }\n        }\n      }\n\n      var nw = +(new Date());\n      var chk = false;\n      if (self.opt.preservenativescrolling&&((self.checkarea+600)<nw)) {\n//        self.checkarea = false;\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n//      if (self.locked) return self.cancelEvent(e);\n      var ret = execScrollWheel(e,false,chk);\n      if (ret) self.checkarea = 0;\n      return ret;\n    };\n\n    this.onmousewheelhr = function(e) {\n      if (self.locked||!self.railh.scrollable) return true;\n      if (self.rail.drag) return self.cancelEvent(e);\n\n      var nw = +(new Date());\n      var chk = false;\n      if (self.opt.preservenativescrolling&&((self.checkarea+600)<nw)) {\n//        self.checkarea = false;\n        self.nativescrollingarea = self.isScrollable(e);\n        chk = true;\n      }\n      self.checkarea = nw;\n      if (self.nativescrollingarea) return true; // this isn't my business\n      if (self.locked) return self.cancelEvent(e);\n\n      return execScrollWheel(e,true,chk);\n    };\n\n    this.stop = function() {\n      self.cancelScroll();\n      if (self.scrollmon) self.scrollmon.stop();\n      self.cursorfreezed = false;\n      self.scroll.y = Math.round(self.getScrollTop() * (1/self.scrollratio.y));\n      self.noticeCursor();\n      return self;\n    };\n\n    this.getTransitionSpeed = function(dif) {\n      var sp = Math.round(self.opt.scrollspeed*10);\n      var ex = Math.min(sp,Math.round((dif / 20) * self.opt.scrollspeed));\n      return (ex>20) ? ex : 0;\n    }\n\n    if (!self.opt.smoothscroll) {\n      this.doScrollLeft = function(x,spd) {  //direct\n        var y = self.getScrollTop();\n        self.doScrollPos(x,y,spd);\n      }\n      this.doScrollTop = function(y,spd) {   //direct\n        var x = self.getScrollLeft();\n        self.doScrollPos(x,y,spd);\n      }\n      this.doScrollPos = function(x,y,spd) {  //direct\n        var nx = (x>self.page.maxw) ? self.page.maxw : x;\n        if (nx<0) nx=0;\n        var ny = (y>self.page.maxh) ? self.page.maxh : y;\n        if (ny<0) ny=0;\n        self.synched('scroll',function(){\n          self.setScrollTop(ny);\n          self.setScrollLeft(nx);\n        });\n      }\n      this.cancelScroll = function() {}; // direct\n    }\n    else if (self.ishwscroll&&cap.hastransition&&self.opt.usetransition) {\n      this.prepareTransition = function(dif,istime) {\n        var ex = (istime) ? ((dif>20)?dif:0) : self.getTransitionSpeed(dif);\n        var trans = (ex) ? cap.prefixstyle+'transform '+ex+'ms ease-out' : '';\n        if (!self.lasttransitionstyle||self.lasttransitionstyle!=trans) {\n          self.lasttransitionstyle = trans;\n          self.doc.css(cap.transitionstyle,trans);\n        }\n        return ex;\n      };\n\n      this.doScrollLeft = function(x,spd) {  //trans\n        var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x,y,spd);\n      }\n\n      this.doScrollTop = function(y,spd) {   //trans\n        var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x,y,spd);\n      }\n\n      this.doScrollPos = function(x,y,spd) {  //trans\n\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n\n        if (((self.newscrolly-py)*(y-py)<0)||((self.newscrollx-px)*(x-px)<0)) self.cancelScroll();  //inverted movement detection\n\n        if (self.opt.bouncescroll==false) {\n          if (y<0) y=0;\n          else if (y>self.page.maxh) y=self.page.maxh;\n          if (x<0) x=0;\n          else if (x>self.page.maxw) x=self.page.maxw;\n        }\n\n        if (self.scrollrunning&&x==self.newscrollx&&y==self.newscrolly) return false;\n\n        self.newscrolly = y;\n        self.newscrollx = x;\n\n        self.newscrollspeed = spd||false;\n\n        if (self.timer) return false;\n\n        self.timer = setTimeout(function(){\n\n          var top = self.getScrollTop();\n          var lft = self.getScrollLeft();\n\n          var dst = {};\n          dst.x = x-lft;\n          dst.y = y-top;\n          dst.px = lft;\n          dst.py = top;\n\n          var dd = Math.round(Math.sqrt(Math.pow(dst.x,2)+Math.pow(dst.y,2)));\n\n//          var df = (self.newscrollspeed) ? self.newscrollspeed : dd;\n\n          var ms = (self.newscrollspeed && self.newscrollspeed>1) ? self.newscrollspeed : self.getTransitionSpeed(dd);\n          if (self.newscrollspeed&&self.newscrollspeed<=1) ms*=self.newscrollspeed;\n\n          self.prepareTransition(ms,true);\n\n          if (self.timerscroll&&self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n\n          if (ms>0) {\n\n            if (!self.scrollrunning&&self.onscrollstart) {\n              var info = {\"type\":\"scrollstart\",\"current\":{\"x\":lft,\"y\":top},\"request\":{\"x\":x,\"y\":y},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly},\"speed\":ms};\n              self.onscrollstart.call(self,info);\n            }\n\n            if (cap.transitionend) {\n              if (!self.scrollendtrapped) {\n                self.scrollendtrapped = true;\n                self.bind(self.doc,cap.transitionend,self.onScrollEnd,false); //I have got to do something usefull!!\n              }\n            } else {\n              if (self.scrollendtrapped) clearTimeout(self.scrollendtrapped);\n              self.scrollendtrapped = setTimeout(self.onScrollEnd,ms);  // simulate transitionend event\n            }\n\n            var py = top;\n            var px = lft;\n            self.timerscroll = {\n              bz: new BezierClass(py,self.newscrolly,ms,0,0,0.58,1),\n              bh: new BezierClass(px,self.newscrollx,ms,0,0,0.58,1)\n            };\n            if (!self.cursorfreezed) self.timerscroll.tm=setInterval(function(){self.showCursor(self.getScrollTop(),self.getScrollLeft())},60);\n\n          }\n\n          self.synched(\"doScroll-set\",function(){\n            self.timer = 0;\n            if (self.scrollendtrapped) self.scrollrunning = true;\n            self.setScrollTop(self.newscrolly);\n            self.setScrollLeft(self.newscrollx);\n            if (!self.scrollendtrapped) self.onScrollEnd();\n          });\n\n\n        },50);\n\n      };\n\n      this.cancelScroll = function() {\n        if (!self.scrollendtrapped) return true;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.scrollrunning = false;\n        if (!cap.transitionend) clearTimeout(cap.transitionend);\n        self.scrollendtrapped = false;\n        self._unbind(self.doc,cap.transitionend,self.onScrollEnd);\n        self.prepareTransition(0);\n        self.setScrollTop(py); // fire event onscroll\n        if (self.railh) self.setScrollLeft(px);\n        if (self.timerscroll&&self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n\n        self.cursorfreezed = false;\n\n        //self.noticeCursor(false,py,px);\n        self.showCursor(py,px);\n        return self;\n      };\n      this.onScrollEnd = function() {\n        if (self.scrollendtrapped) self._unbind(self.doc,cap.transitionend,self.onScrollEnd);\n        self.scrollendtrapped = false;\n        self.prepareTransition(0);\n        if (self.timerscroll&&self.timerscroll.tm) clearInterval(self.timerscroll.tm);\n        self.timerscroll = false;\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n        self.setScrollTop(py);  // fire event onscroll\n        if (self.railh) self.setScrollLeft(px);  // fire event onscroll left\n\n        self.noticeCursor(false,py,px);\n\n        self.cursorfreezed = false;\n\n        if (py<0) py=0\n        else if (py>self.page.maxh) py=self.page.maxh;\n        if (px<0) px=0\n        else if (px>self.page.maxw) px=self.page.maxw;\n        if((py!=self.newscrolly)||(px!=self.newscrollx)) return self.doScrollPos(px,py,self.opt.snapbackspeed);\n\n        if (self.onscrollend&&self.scrollrunning) {\n          var info = {\"type\":\"scrollend\",\"current\":{\"x\":px,\"y\":py},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly}};\n          self.onscrollend.call(self,info);\n        }\n        self.scrollrunning = false;\n\n      };\n\n    } else {\n\n      this.doScrollLeft = function(x,spd) {  //no-trans\n        var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\n        self.doScrollPos(x,y,spd);\n      }\n\n      this.doScrollTop = function(y,spd) {  //no-trans\n        var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\n        self.doScrollPos(x,y,spd);\n      }\n\n      this.doScrollPos = function(x,y,spd) {  //no-trans\n        var y = ((typeof y == \"undefined\")||(y===false)) ? self.getScrollTop(true) : y;\n\n        if  ((self.timer)&&(self.newscrolly==y)&&(self.newscrollx==x)) return true;\n\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n\n        var py = self.getScrollTop();\n        var px = self.getScrollLeft();\n\n        if (((self.newscrolly-py)*(y-py)<0)||((self.newscrollx-px)*(x-px)<0)) self.cancelScroll();  //inverted movement detection\n\n        self.newscrolly = y;\n        self.newscrollx = x;\n\n        if (!self.bouncescroll||!self.rail.visibility) {\n          if (self.newscrolly<0) {\n            self.newscrolly = 0;\n          }\n          else if (self.newscrolly>self.page.maxh) {\n            self.newscrolly = self.page.maxh;\n          }\n        }\n        if (!self.bouncescroll||!self.railh.visibility) {\n          if (self.newscrollx<0) {\n            self.newscrollx = 0;\n          }\n          else if (self.newscrollx>self.page.maxw) {\n            self.newscrollx = self.page.maxw;\n          }\n        }\n\n        self.dst = {};\n        self.dst.x = x-px;\n        self.dst.y = y-py;\n        self.dst.px = px;\n        self.dst.py = py;\n\n        var dst = Math.round(Math.sqrt(Math.pow(self.dst.x,2)+Math.pow(self.dst.y,2)));\n\n        self.dst.ax = self.dst.x / dst;\n        self.dst.ay = self.dst.y / dst;\n\n        var pa = 0;\n        var pe = dst;\n\n        if (self.dst.x==0) {\n          pa = py;\n          pe = y;\n          self.dst.ay = 1;\n          self.dst.py = 0;\n        } else if (self.dst.y==0) {\n          pa = px;\n          pe = x;\n          self.dst.ax = 1;\n          self.dst.px = 0;\n        }\n\n        var ms = self.getTransitionSpeed(dst);\n        if (spd&&spd<=1) ms*=spd;\n        if (ms>0) {\n          self.bzscroll = (self.bzscroll) ? self.bzscroll.update(pe,ms) : new BezierClass(pa,pe,ms,0,1,0,1);\n        } else {\n          self.bzscroll = false;\n        }\n\n        if (self.timer) return;\n\n        if ((py==self.page.maxh&&y>=self.page.maxh)||(px==self.page.maxw&&x>=self.page.maxw)) self.checkContentSize();\n\n        var sync = 1;\n\n        function scrolling() {\n          if (self.cancelAnimationFrame) return true;\n\n          self.scrollrunning = true;\n\n          sync = 1-sync;\n          if (sync) return (self.timer = setAnimationFrame(scrolling)||1);\n\n          var done = 0;\n\n          var sc = sy = self.getScrollTop();\n          if (self.dst.ay) {\n            sc = (self.bzscroll) ? self.dst.py + (self.bzscroll.getNow()*self.dst.ay) : self.newscrolly;\n            var dr=sc-sy;\n            if ((dr<0&&sc<self.newscrolly)||(dr>0&&sc>self.newscrolly)) sc = self.newscrolly;\n            self.setScrollTop(sc);\n            if (sc == self.newscrolly) done=1;\n          } else {\n            done=1;\n          }\n\n          var scx = sx = self.getScrollLeft();\n          if (self.dst.ax) {\n            scx = (self.bzscroll) ? self.dst.px + (self.bzscroll.getNow()*self.dst.ax) : self.newscrollx;\n            var dr=scx-sx;\n            if ((dr<0&&scx<self.newscrollx)||(dr>0&&scx>self.newscrollx)) scx = self.newscrollx;\n            self.setScrollLeft(scx);\n            if (scx == self.newscrollx) done+=1;\n          } else {\n            done+=1;\n          }\n\n          if (done==2) {\n            self.timer = 0;\n            self.cursorfreezed = false;\n            self.bzscroll = false;\n            self.scrollrunning = false;\n            if (sc<0) sc=0;\n            else if (sc>self.page.maxh) sc=self.page.maxh;\n            if (scx<0) scx=0;\n            else if (scx>self.page.maxw) scx=self.page.maxw;\n            if ((scx!=self.newscrollx)||(sc!=self.newscrolly)) self.doScrollPos(scx,sc);\n            else {\n              if (self.onscrollend) {\n                var info = {\"type\":\"scrollend\",\"current\":{\"x\":sx,\"y\":sy},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly}};\n                self.onscrollend.call(self,info);\n              }\n            }\n          } else {\n            self.timer = setAnimationFrame(scrolling)||1;\n          }\n        };\n        self.cancelAnimationFrame=false;\n        self.timer = 1;\n\n        if (self.onscrollstart&&!self.scrollrunning) {\n          var info = {\"type\":\"scrollstart\",\"current\":{\"x\":px,\"y\":py},\"request\":{\"x\":x,\"y\":y},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly},\"speed\":ms};\n          self.onscrollstart.call(self,info);\n        }\n\n        scrolling();\n\n        if ((py==self.page.maxh&&y>=py)||(px==self.page.maxw&&x>=px)) self.checkContentSize();\n\n        self.noticeCursor();\n      };\n\n      this.cancelScroll = function() {\n        if (self.timer) clearAnimationFrame(self.timer);\n        self.timer = 0;\n        self.bzscroll = false;\n        self.scrollrunning = false;\n        return self;\n      };\n\n    }\n\n    this.doScrollBy = function(stp,relative) {\n      var ny = 0;\n      if (relative) {\n        ny = Math.floor((self.scroll.y-stp)*self.scrollratio.y)\n      } else {\n        var sy = (self.timer) ? self.newscrolly : self.getScrollTop(true);\n        ny = sy-stp;\n      }\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.h/2);\n        if (ny<-haf) ny=-haf\n        else if (ny>(self.page.maxh+haf)) ny = (self.page.maxh+haf);\n      }\n      self.cursorfreezed = false;\n\n      py = self.getScrollTop(true);\n      if (ny<0&&py<=0) return self.noticeCursor();\n      else if (ny>self.page.maxh&&py>=self.page.maxh) {\n        self.checkContentSize();\n        return self.noticeCursor();\n      }\n\n      self.doScrollTop(ny);\n    };\n\n    this.doScrollLeftBy = function(stp,relative) {\n      var nx = 0;\n      if (relative) {\n        nx = Math.floor((self.scroll.x-stp)*self.scrollratio.x)\n      } else {\n        var sx = (self.timer) ? self.newscrollx : self.getScrollLeft(true);\n        nx = sx-stp;\n      }\n      if (self.bouncescroll) {\n        var haf = Math.round(self.view.w/2);\n        if (nx<-haf) nx=-haf\n        else if (nx>(self.page.maxw+haf)) nx = (self.page.maxw+haf);\n      }\n      self.cursorfreezed = false;\n\n      px = self.getScrollLeft(true);\n      if (nx<0&&px<=0) return self.noticeCursor();\n      else if (nx>self.page.maxw&&px>=self.page.maxw) return self.noticeCursor();\n\n      self.doScrollLeft(nx);\n    };\n\n    this.doScrollTo = function(pos,relative) {\n      var ny = (relative) ? Math.round(pos*self.scrollratio.y) : pos;\n      if (ny<0) ny=0\n      else if (ny>self.page.maxh) ny = self.page.maxh;\n      self.cursorfreezed = false;\n      self.doScrollTop(pos);\n    };\n\n    this.checkContentSize = function() {\n      var pg = self.getContentSize();\n      if ((pg.h!=self.page.h)||(pg.w!=self.page.w)) self.resize(false,pg);\n    };\n\n    self.onscroll = function(e) {\n      if (self.rail.drag) return;\n      if (!self.cursorfreezed) {\n        self.synched('scroll',function(){\n          self.scroll.y = Math.round(self.getScrollTop() * (1/self.scrollratio.y));\n          if (self.railh) self.scroll.x = Math.round(self.getScrollLeft() * (1/self.scrollratio.x));\n          self.noticeCursor();\n        });\n      }\n    };\n    self.bind(self.docscroll,\"scroll\",self.onscroll);\n\n    this.doZoomIn = function(e) {\n      if (self.zoomactive) return;\n      self.zoomactive = true;\n\n      self.zoomrestore = {\n        style:{}\n      };\n      var lst = ['position','top','left','zIndex','backgroundColor','marginTop','marginBottom','marginLeft','marginRight'];\n      var win = self.win[0].style;\n      for(var a in lst) {\n        var pp = lst[a];\n        self.zoomrestore.style[pp] = (typeof win[pp] != \"undefined\") ? win[pp] : '';\n      }\n\n      self.zoomrestore.style.width = self.win.css('width');\n      self.zoomrestore.style.height = self.win.css('height');\n\n      self.zoomrestore.padding = {\n        w:self.win.outerWidth()-self.win.width(),\n        h:self.win.outerHeight()-self.win.height()\n      };\n\n      if (cap.isios4) {\n        self.zoomrestore.scrollTop = $(window).scrollTop();\n        $(window).scrollTop(0);\n      }\n\n      self.win.css({\n        \"position\":(cap.isios4)?\"absolute\":\"fixed\",\n        \"top\":0,\n        \"left\":0,\n        \"z-index\":globalmaxzindex+100,\n        \"margin\":\"0px\"\n      });\n      var bkg = self.win.css(\"backgroundColor\");\n      if (bkg==\"\"||/transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(bkg)) self.win.css(\"backgroundColor\",\"#fff\");\n      self.rail.css({\"z-index\":globalmaxzindex+101});\n      self.zoom.css({\"z-index\":globalmaxzindex+102});\n      self.zoom.css('backgroundPosition','0px -18px');\n      self.resizeZoom();\n\n      if (self.onzoomin) self.onzoomin.call(self);\n\n      return self.cancelEvent(e);\n    };\n\n    this.doZoomOut = function(e) {\n      if (!self.zoomactive) return;\n      self.zoomactive = false;\n\n      self.win.css(\"margin\",\"\");\n      self.win.css(self.zoomrestore.style);\n\n      if (cap.isios4) {\n        $(window).scrollTop(self.zoomrestore.scrollTop);\n      }\n\n      self.rail.css({\"z-index\":self.zindex});\n      self.zoom.css({\"z-index\":self.zindex});\n      self.zoomrestore = false;\n      self.zoom.css('backgroundPosition','0px 0px');\n      self.onResize();\n\n      if (self.onzoomout) self.onzoomout.call(self);\n\n      return self.cancelEvent(e);\n    };\n\n    this.doZoom = function(e) {\n      return (self.zoomactive) ? self.doZoomOut(e) : self.doZoomIn(e);\n    };\n\n    this.resizeZoom = function() {\n      if (!self.zoomactive) return;\n\n      var py = self.getScrollTop(); //preserve scrolling position\n      self.win.css({\n        width:$(window).width()-self.zoomrestore.padding.w+\"px\",\n        height:$(window).height()-self.zoomrestore.padding.h+\"px\"\n      });\n      self.onResize();\n\n      self.setScrollTop(Math.min(self.page.maxh,py));\n    };\n\n    this.init();\n\n    $.nicescroll.push(this);\n\n  };\n\n// Inspired by the work of Kin Blas\n// http://webpro.host.adobe.com/people/jblas/momentum/includes/jquery.momentum.0.7.js\n\n\n  var ScrollMomentumClass2D = function(nc) {\n    var self = this;\n    this.nc = nc;\n\n    this.lastx = 0;\n    this.lasty = 0;\n    this.speedx = 0;\n    this.speedy = 0;\n    this.lasttime = 0;\n    this.steptime = 0;\n    this.snapx = false;\n    this.snapy = false;\n    this.demulx = 0;\n    this.demuly = 0;\n\n    this.lastscrollx = -1;\n    this.lastscrolly = -1;\n\n    this.chkx = 0;\n    this.chky = 0;\n\n    this.timer = 0;\n\n    this.time = function() {\n      return +new Date();//beautifull hack\n    };\n\n    this.reset = function(px,py) {\n      self.stop();\n      var now = self.time();\n      self.steptime = 0;\n      self.lasttime = now;\n      self.speedx = 0;\n      self.speedy = 0;\n      self.lastx = px;\n      self.lasty = py;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.update = function(px,py) {\n      var now = self.time();\n      self.steptime = now - self.lasttime;\n      self.lasttime = now;\n      var dy = py - self.lasty;\n      var dx = px - self.lastx;\n      var sy = self.nc.getScrollTop();\n      var sx = self.nc.getScrollLeft();\n      var newy = sy + dy;\n      var newx = sx + dx;\n      self.snapx = (newx<0)||(newx>self.nc.page.maxw);\n      self.snapy = (newy<0)||(newy>self.nc.page.maxh);\n      self.speedx = dx;\n      self.speedy = dy;\n      self.lastx = px;\n      self.lasty = py;\n    };\n\n    this.stop = function() {\n      self.nc.unsynched(\"domomentum2d\");\n      if (self.timer) clearTimeout(self.timer);\n      self.timer = 0;\n      self.lastscrollx = -1;\n      self.lastscrolly = -1;\n    };\n\n    this.doSnapy = function(nx,ny) {\n      var snap = false;\n\n      if (ny<0) {\n        ny=0;\n        snap=true;\n      }\n      else if (ny>self.nc.page.maxh) {\n        ny=self.nc.page.maxh;\n        snap=true;\n      }\n\n      if (nx<0) {\n        nx=0;\n        snap=true;\n      }\n      else if (nx>self.nc.page.maxw) {\n        nx=self.nc.page.maxw;\n        snap=true;\n      }\n\n      if (snap) self.nc.doScrollPos(nx,ny,self.nc.opt.snapbackspeed);\n    };\n\n    this.doMomentum = function(gp) {\n      var t = self.time();\n      var l = (gp) ? t+gp : self.lasttime;\n\n      var sl = self.nc.getScrollLeft();\n      var st = self.nc.getScrollTop();\n\n      var pageh = self.nc.page.maxh;\n      var pagew = self.nc.page.maxw;\n\n      self.speedx = (pagew>0) ? Math.min(60,self.speedx) : 0;\n      self.speedy = (pageh>0) ? Math.min(60,self.speedy) : 0;\n\n      var chk = l && (t - l) <= 60;\n\n      if ((st<0)||(st>pageh)||(sl<0)||(sl>pagew)) chk = false;\n\n      var sy = (self.speedy && chk) ? self.speedy : false;\n      var sx = (self.speedx && chk) ? self.speedx : false;\n\n      if (sy||sx) {\n        var tm = Math.max(16,self.steptime); //timeout granularity\n\n        if (tm>50) {  // do smooth\n          var xm = tm/50;\n          self.speedx*=xm;\n          self.speedy*=xm;\n          tm = 50;\n        }\n\n        self.demulxy = 0;\n\n        self.lastscrollx = self.nc.getScrollLeft();\n        self.chkx = self.lastscrollx;\n        self.lastscrolly = self.nc.getScrollTop();\n        self.chky = self.lastscrolly;\n\n        var nx = self.lastscrollx;\n        var ny = self.lastscrolly;\n\n        var onscroll = function(){\n          var df = ((self.time()-t)>600) ? 0.04 : 0.02;\n\n          if (self.speedx) {\n            nx = Math.floor(self.lastscrollx - (self.speedx*(1-self.demulxy)));\n            self.lastscrollx = nx;\n            if ((nx<0)||(nx>pagew)) df=0.10;\n          }\n\n          if (self.speedy) {\n            ny = Math.floor(self.lastscrolly - (self.speedy*(1-self.demulxy)));\n            self.lastscrolly = ny;\n            if ((ny<0)||(ny>pageh)) df=0.10;\n          }\n\n          self.demulxy = Math.min(1,self.demulxy+df);\n\n          self.nc.synched(\"domomentum2d\",function(){\n\n            if (self.speedx) {\n              var scx = self.nc.getScrollLeft();\n              if (scx!=self.chkx) self.stop();\n              self.chkx=nx;\n              self.nc.setScrollLeft(nx);\n            }\n\n            if (self.speedy) {\n              var scy = self.nc.getScrollTop();\n              if (scy!=self.chky) self.stop();\n              self.chky=ny;\n              self.nc.setScrollTop(ny);\n            }\n\n            if(!self.timer) {\n              self.nc.hideCursor();\n              self.doSnapy(nx,ny);\n            }\n\n          });\n\n          if (self.demulxy<1) {\n            self.timer = setTimeout(onscroll,tm);\n          } else {\n            self.stop();\n            self.nc.hideCursor();\n            self.doSnapy(nx,ny);\n          }\n        };\n\n        onscroll();\n\n      } else {\n        self.doSnapy(self.nc.getScrollLeft(),self.nc.getScrollTop());\n      }\n\n    }\n\n  };\n\n\n// override jQuery scrollTop\n\n  var _scrollTop = jQuery.fn.scrollTop; // preserve original function\n\n  jQuery.cssHooks[\"pageYOffset\"] = {\n    get: function(elem,computed,extra) {\n      var nice = $.data(elem,'__nicescroll')||false;\n      return (nice&&nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(elem);\n    },\n    set: function(elem,value) {\n      var nice = $.data(elem,'__nicescroll')||false;\n      (nice&&nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call(elem,value);\n      return this;\n    }\n  };\n\n/*\n  $.fx.step[\"scrollTop\"] = function(fx){\n    $.cssHooks[\"scrollTop\"].set( fx.elem, fx.now + fx.unit );\n  };\n*/\n\n  jQuery.fn.scrollTop = function(value) {\n    if (typeof value == \"undefined\") {\n      var nice = (this[0]) ? $.data(this[0],'__nicescroll')||false : false;\n      return (nice&&nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(this);\n    } else {\n      return this.each(function() {\n        var nice = $.data(this,'__nicescroll')||false;\n        (nice&&nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call($(this),value);\n      });\n    }\n  }\n\n// override jQuery scrollLeft\n\n  var _scrollLeft = jQuery.fn.scrollLeft; // preserve original function\n\n  $.cssHooks.pageXOffset = {\n    get: function(elem,computed,extra) {\n      var nice = $.data(elem,'__nicescroll')||false;\n      return (nice&&nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(elem);\n    },\n    set: function(elem,value) {\n      var nice = $.data(elem,'__nicescroll')||false;\n      (nice&&nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call(elem,value);\n      return this;\n    }\n  };\n\n/*\n  $.fx.step[\"scrollLeft\"] = function(fx){\n    $.cssHooks[\"scrollLeft\"].set( fx.elem, fx.now + fx.unit );\n  };\n*/\n\n  jQuery.fn.scrollLeft = function(value) {\n    if (typeof value == \"undefined\") {\n      var nice = (this[0]) ? $.data(this[0],'__nicescroll')||false : false;\n      return (nice&&nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(this);\n    } else {\n      return this.each(function() {\n        var nice = $.data(this,'__nicescroll')||false;\n        (nice&&nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call($(this),value);\n      });\n    }\n  }\n\n  var NiceScrollArray = function(doms) {\n    var self = this;\n    this.length = 0;\n    this.name = \"nicescrollarray\";\n\n    this.each = function(fn) {\n      for(var a=0,i=0;a<self.length;a++) fn.call(self[a],i++);\n      return self;\n    };\n\n    this.push = function(nice) {\n      self[self.length]=nice;\n      self.length++;\n    };\n\n    this.eq = function(idx) {\n      return self[idx];\n    };\n\n    if (doms) {\n      for(a=0;a<doms.length;a++) {\n        var nice = $.data(doms[a],'__nicescroll')||false;\n        if (nice) {\n          this[this.length]=nice;\n          this.length++;\n        }\n      };\n    }\n\n    return this;\n  };\n\n  function mplex(el,lst,fn) {\n    for(var a=0;a<lst.length;a++) fn(el,lst[a]);\n  };\n  mplex(\n    NiceScrollArray.prototype,\n    ['show','hide','toggle','onResize','resize','remove','stop','doScrollPos'],\n    function(e,n) {\n      e[n] = function(){\n        var args = arguments;\n        return this.each(function(){\n          this[n].apply(this,args);\n        });\n      };\n    }\n  );\n\n  jQuery.fn.getNiceScroll = function(index) {\n    if (typeof index == \"undefined\") {\n      return new NiceScrollArray(this);\n    } else {\n      var nice = this[index]&&$.data(this[index],'__nicescroll')||false;\n      return nice;\n    }\n  };\n\n  jQuery.extend(jQuery.expr[':'], {\n    nicescroll: function(a) {\n      return ($.data(a,'__nicescroll'))?true:false;\n    }\n  });\n\n  $.fn.niceScroll = function(wrapper,opt) {\n    if (typeof opt==\"undefined\") {\n      if ((typeof wrapper==\"object\")&&!(\"jquery\" in wrapper)) {\n        opt = wrapper;\n        wrapper = false;\n      }\n    }\n    var ret = new NiceScrollArray();\n    if (typeof opt==\"undefined\") opt = {};\n\n    if (wrapper||false) {\n      opt.doc = $(wrapper);\n      opt.win = $(this);\n    }\n    var docundef = !(\"doc\" in opt);\n    if (!docundef&&!(\"win\" in opt)) opt.win = $(this);\n\n    this.each(function() {\n      var nice = $(this).data('__nicescroll')||false;\n      if (!nice) {\n        opt.doc = (docundef) ? $(this) : opt.doc;\n        nice = new NiceScrollClass(opt,$(this));\n        $(this).data('__nicescroll',nice);\n      }\n      ret.push(nice);\n    });\n    return (ret.length==1) ? ret[0] : ret;\n  };\n\n  window.NiceScroll = {\n    getjQuery:function(){return jQuery}\n  };\n\n  if (!$.nicescroll) {\n   $.nicescroll = new NiceScrollArray();\n   $.nicescroll.options = _globaloptions;\n  }\n\n})( jQuery );\n"]},"metadata":{},"sourceType":"module"}